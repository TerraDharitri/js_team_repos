"use strict";var Ho=Object.create;var Oe=Object.defineProperty,Xo=Object.defineProperties,Yo=Object.getOwnPropertyDescriptor,jo=Object.getOwnPropertyDescriptors,Jo=Object.getOwnPropertyNames,gr=Object.getOwnPropertySymbols,Qo=Object.getPrototypeOf,xr=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable;var Tr=(r,e,t)=>e in r?Oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,I=(r,e)=>{for(var t in e||(e={}))xr.call(e,t)&&Tr(r,t,e[t]);if(gr)for(var t of gr(e))ei.call(e,t)&&Tr(r,t,e[t]);return r},$=(r,e)=>Xo(r,jo(e));var ti=(r,e)=>()=>(r&&(e=r(r=0)),e);var Ye=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ri=(r,e)=>{for(var t in e)Oe(r,t,{get:e[t],enumerable:!0})},yr=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Jo(e))!xr.call(r,o)&&o!==t&&Oe(r,o,{get:()=>e[o],enumerable:!(n=Yo(e,o))||n.enumerable});return r};var h=(r,e,t)=>(t=r!=null?Ho(Qo(r)):{},yr(e||!r||!r.__esModule?Oe(t,"default",{value:r,enumerable:!0}):t,r)),ni=r=>yr(Oe({},"__esModule",{value:!0}),r);var v=(r,e,t)=>new Promise((n,o)=>{var a=f=>{try{p(t.next(f))}catch(d){o(d)}},s=f=>{try{p(t.throw(f))}catch(d){o(d)}},p=f=>f.done?n(f.value):Promise.resolve(f.value).then(a,s);p((t=t.apply(r,e)).next())});var vr=Ye(je=>{"use strict";i();je.byteLength=ii;je.toByteArray=si;je.fromByteArray=ui;var se=[],j=[],oi=typeof Uint8Array!="undefined"?Uint8Array:Array,vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ae=0,hr=vt.length;Ae<hr;++Ae)se[Ae]=vt[Ae],j[vt.charCodeAt(Ae)]=Ae;var Ae,hr;j["-".charCodeAt(0)]=62;j["_".charCodeAt(0)]=63;function Er(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function ii(r){var e=Er(r),t=e[0],n=e[1];return(t+n)*3/4-n}function ai(r,e,t){return(e+t)*3/4-t}function si(r){var e,t=Er(r),n=t[0],o=t[1],a=new oi(ai(r,n,o)),s=0,p=o>0?n-4:n,f;for(f=0;f<p;f+=4)e=j[r.charCodeAt(f)]<<18|j[r.charCodeAt(f+1)]<<12|j[r.charCodeAt(f+2)]<<6|j[r.charCodeAt(f+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return o===2&&(e=j[r.charCodeAt(f)]<<2|j[r.charCodeAt(f+1)]>>4,a[s++]=e&255),o===1&&(e=j[r.charCodeAt(f)]<<10|j[r.charCodeAt(f+1)]<<4|j[r.charCodeAt(f+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function ci(r){return se[r>>18&63]+se[r>>12&63]+se[r>>6&63]+se[r&63]}function mi(r,e,t){for(var n,o=[],a=e;a<t;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(r[a+2]&255),o.push(ci(n));return o.join("")}function ui(r){for(var e,t=r.length,n=t%3,o=[],a=16383,s=0,p=t-n;s<p;s+=a)o.push(mi(r,s,s+a>p?p:s+a));return n===1?(e=r[t-1],o.push(se[e>>2]+se[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],o.push(se[e>>10]+se[e>>4&63]+se[e<<2&63]+"=")),o.join("")}});var Ar=Ye(At=>{i();At.read=function(r,e,t,n,o){var a,s,p=o*8-n-1,f=(1<<p)-1,d=f>>1,T=-7,g=t?o-1:0,x=t?-1:1,y=r[e+g];for(g+=x,a=y&(1<<-T)-1,y>>=-T,T+=p;T>0;a=a*256+r[e+g],g+=x,T-=8);for(s=a&(1<<-T)-1,a>>=-T,T+=n;T>0;s=s*256+r[e+g],g+=x,T-=8);if(a===0)a=1-d;else{if(a===f)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-d}return(y?-1:1)*s*Math.pow(2,a-n)};At.write=function(r,e,t,n,o,a){var s,p,f,d=a*8-o-1,T=(1<<d)-1,g=T>>1,x=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:a-1,E=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(p=isNaN(e)?1:0,s=T):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+g>=1?e+=x/f:e+=x*Math.pow(2,1-g),e*f>=2&&(s++,f/=2),s+g>=T?(p=0,s=T):s+g>=1?(p=(e*f-1)*Math.pow(2,o),s=s+g):(p=e*Math.pow(2,g-1)*Math.pow(2,o),s=0));o>=8;r[t+y]=p&255,y+=E,p/=256,o-=8);for(s=s<<o|p,d+=o;d>0;r[t+y]=s&255,y+=E,s/=256,d-=8);r[t+y-E]|=w*128}});var Dr=Ye(Se=>{"use strict";i();var Ct=vr(),Le=Ar(),Cr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Se.Buffer=l;Se.SlowBuffer=Ti;Se.INSPECT_MAX_BYTES=50;var Je=2147483647;Se.kMaxLength=Je;l.TYPED_ARRAY_SUPPORT=pi();!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pi(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(t){return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}});Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function de(r){if(r>Je)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,l.prototype),e}function l(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lt(r)}return Ir(r,e,t)}l.poolSize=8192;function Ir(r,e,t){if(typeof r=="string")return fi(r,e);if(ArrayBuffer.isView(r))return di(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ce(r,ArrayBuffer)||r&&ce(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ce(r,SharedArrayBuffer)||r&&ce(r.buffer,SharedArrayBuffer)))return bt(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return l.from(n,e,t);var o=gi(r);if(o)return o;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return l.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}l.from=function(r,e,t){return Ir(r,e,t)};Object.setPrototypeOf(l.prototype,Uint8Array.prototype);Object.setPrototypeOf(l,Uint8Array);function Lr(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function li(r,e,t){return Lr(r),r<=0?de(r):e!==void 0?typeof t=="string"?de(r).fill(e,t):de(r).fill(e):de(r)}l.alloc=function(r,e,t){return li(r,e,t)};function Lt(r){return Lr(r),de(r<0?0:St(r)|0)}l.allocUnsafe=function(r){return Lt(r)};l.allocUnsafeSlow=function(r){return Lt(r)};function fi(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=Sr(r,e)|0,n=de(t),o=n.write(r,e);return o!==t&&(n=n.slice(0,o)),n}function wt(r){for(var e=r.length<0?0:St(r.length)|0,t=de(e),n=0;n<e;n+=1)t[n]=r[n]&255;return t}function di(r){if(ce(r,Uint8Array)){var e=new Uint8Array(r);return bt(e.buffer,e.byteOffset,e.byteLength)}return wt(r)}function bt(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,l.prototype),n}function gi(r){if(l.isBuffer(r)){var e=St(r.length)|0,t=de(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||kt(r.length)?de(0):wt(r);if(r.type==="Buffer"&&Array.isArray(r.data))return wt(r.data)}function St(r){if(r>=Je)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Je.toString(16)+" bytes");return r|0}function Ti(r){return+r!=r&&(r=0),l.alloc(+r)}l.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==l.prototype};l.compare=function(e,t){if(ce(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),ce(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,o=t.length,a=0,s=Math.min(n,o);a<s;++a)if(e[a]!==t[a]){n=e[a],o=t[a];break}return n<o?-1:o<n?1:0};l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(ce(s,Uint8Array))a+s.length>o.length?l.from(s).copy(o,a):Uint8Array.prototype.set.call(o,s,a);else if(l.isBuffer(s))s.copy(o,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return o};function Sr(r,e){if(l.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ce(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return It(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Br(r).length;default:if(o)return n?-1:It(r).length;e=(""+e).toLowerCase(),o=!0}}l.byteLength=Sr;function xi(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Li(this,e,t);case"utf8":case"utf-8":return Pr(this,e,t);case"ascii":return bi(this,e,t);case"latin1":case"binary":return Ii(this,e,t);case"base64":return Ci(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Si(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}l.prototype._isBuffer=!0;function Ce(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ce(this,t,t+1);return this};l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ce(this,t,t+3),Ce(this,t+1,t+2);return this};l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ce(this,t,t+7),Ce(this,t+1,t+6),Ce(this,t+2,t+5),Ce(this,t+3,t+4);return this};l.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Pr(this,0,e):xi.apply(this,arguments)};l.prototype.toLocaleString=l.prototype.toString;l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0};l.prototype.inspect=function(){var e="",t=Se.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Cr&&(l.prototype[Cr]=l.prototype.inspect);l.prototype.compare=function(e,t,n,o,a){if(ce(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),o===void 0&&(o=0),a===void 0&&(a=this.length),t<0||n>e.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&t>=n)return 0;if(o>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,o>>>=0,a>>>=0,this===e)return 0;for(var s=a-o,p=n-t,f=Math.min(s,p),d=this.slice(o,a),T=e.slice(t,n),g=0;g<f;++g)if(d[g]!==T[g]){s=d[g],p=T[g];break}return s<p?-1:p<s?1:0};function kr(r,e,t,n,o){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,kt(t)&&(t=o?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(o)return-1;t=r.length-1}else if(t<0)if(o)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,n)),l.isBuffer(e))return e.length===0?-1:wr(r,e,t,n,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):wr(r,[e],t,n,o);throw new TypeError("val must be string, number or Buffer")}function wr(r,e,t,n,o){var a=1,s=r.length,p=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;a=2,s/=2,p/=2,t/=2}function f(y,E){return a===1?y[E]:y.readUInt16BE(E*a)}var d;if(o){var T=-1;for(d=t;d<s;d++)if(f(r,d)===f(e,T===-1?0:d-T)){if(T===-1&&(T=d),d-T+1===p)return T*a}else T!==-1&&(d-=d-T),T=-1}else for(t+p>s&&(t=s-p),d=t;d>=0;d--){for(var g=!0,x=0;x<p;x++)if(f(r,d+x)!==f(e,x)){g=!1;break}if(g)return d}return-1}l.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};l.prototype.indexOf=function(e,t,n){return kr(this,e,t,n,!0)};l.prototype.lastIndexOf=function(e,t,n){return kr(this,e,t,n,!1)};function yi(r,e,t,n){t=Number(t)||0;var o=r.length-t;n?(n=Number(n),n>o&&(n=o)):n=o;var a=e.length;n>a/2&&(n=a/2);for(var s=0;s<n;++s){var p=parseInt(e.substr(s*2,2),16);if(kt(p))return s;r[t+s]=p}return s}function hi(r,e,t,n){return Qe(It(e,r.length-t),r,t,n)}function Ei(r,e,t,n){return Qe(Fi(e),r,t,n)}function vi(r,e,t,n){return Qe(Br(e),r,t,n)}function Ai(r,e,t,n){return Qe(Gi(e,r.length-t),r,t,n)}l.prototype.write=function(e,t,n,o){if(t===void 0)o="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")o=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-t;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return yi(this,e,t,n);case"utf8":case"utf-8":return hi(this,e,t,n);case"ascii":case"latin1":case"binary":return Ei(this,e,t,n);case"base64":return vi(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ai(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ci(r,e,t){return e===0&&t===r.length?Ct.fromByteArray(r):Ct.fromByteArray(r.slice(e,t))}function Pr(r,e,t){t=Math.min(r.length,t);for(var n=[],o=e;o<t;){var a=r[o],s=null,p=a>239?4:a>223?3:a>191?2:1;if(o+p<=t){var f,d,T,g;switch(p){case 1:a<128&&(s=a);break;case 2:f=r[o+1],(f&192)===128&&(g=(a&31)<<6|f&63,g>127&&(s=g));break;case 3:f=r[o+1],d=r[o+2],(f&192)===128&&(d&192)===128&&(g=(a&15)<<12|(f&63)<<6|d&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:f=r[o+1],d=r[o+2],T=r[o+3],(f&192)===128&&(d&192)===128&&(T&192)===128&&(g=(a&15)<<18|(f&63)<<12|(d&63)<<6|T&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,p=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),o+=p}return wi(n)}var br=4096;function wi(r){var e=r.length;if(e<=br)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=br));return t}function bi(r,e,t){var n="";t=Math.min(r.length,t);for(var o=e;o<t;++o)n+=String.fromCharCode(r[o]&127);return n}function Ii(r,e,t){var n="";t=Math.min(r.length,t);for(var o=e;o<t;++o)n+=String.fromCharCode(r[o]);return n}function Li(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var o="",a=e;a<t;++a)o+=Ni[r[a]];return o}function Si(r,e,t){for(var n=r.slice(e,t),o="",a=0;a<n.length-1;a+=2)o+=String.fromCharCode(n[a]+n[a+1]*256);return o}l.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var o=this.subarray(e,t);return Object.setPrototypeOf(o,l.prototype),o};function U(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||U(e,t,this.length);for(var o=this[e],a=1,s=0;++s<t&&(a*=256);)o+=this[e+s]*a;return o};l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||U(e,t,this.length);for(var o=this[e+--t],a=1;t>0&&(a*=256);)o+=this[e+--t]*a;return o};l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e=e>>>0,t||U(e,1,this.length),this[e]};l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||U(e,2,this.length),this[e]|this[e+1]<<8};l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||U(e,2,this.length),this[e]<<8|this[e+1]};l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||U(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||U(e,t,this.length);for(var o=this[e],a=1,s=0;++s<t&&(a*=256);)o+=this[e+s]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o};l.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||U(e,t,this.length);for(var o=t,a=1,s=this[e+--o];o>0&&(a*=256);)s+=this[e+--o]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s};l.prototype.readInt8=function(e,t){return e=e>>>0,t||U(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};l.prototype.readInt16LE=function(e,t){e=e>>>0,t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};l.prototype.readInt16BE=function(e,t){e=e>>>0,t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};l.prototype.readInt32LE=function(e,t){return e=e>>>0,t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function(e,t){return e=e>>>0,t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function(e,t){return e=e>>>0,t||U(e,4,this.length),Le.read(this,e,!0,23,4)};l.prototype.readFloatBE=function(e,t){return e=e>>>0,t||U(e,4,this.length),Le.read(this,e,!1,23,4)};l.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||U(e,8,this.length),Le.read(this,e,!0,52,8)};l.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||U(e,8,this.length),Le.read(this,e,!1,52,8)};function Y(r,e,t,n,o,a){if(!l.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t=t>>>0,n=n>>>0,!o){var a=Math.pow(2,8*n)-1;Y(this,e,t,n,a,0)}var s=1,p=0;for(this[t]=e&255;++p<n&&(s*=256);)this[t+p]=e/s&255;return t+n};l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t=t>>>0,n=n>>>0,!o){var a=Math.pow(2,8*n)-1;Y(this,e,t,n,a,0)}var s=n-1,p=1;for(this[t+s]=e&255;--s>=0&&(p*=256);)this[t+s]=e/p&255;return t+n};l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,1,255,0),this[t]=e&255,t+1};l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};l.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t=t>>>0,!o){var a=Math.pow(2,8*n-1);Y(this,e,t,n,a-1,-a)}var s=0,p=1,f=0;for(this[t]=e&255;++s<n&&(p*=256);)e<0&&f===0&&this[t+s-1]!==0&&(f=1),this[t+s]=(e/p>>0)-f&255;return t+n};l.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t=t>>>0,!o){var a=Math.pow(2,8*n-1);Y(this,e,t,n,a-1,-a)}var s=n-1,p=1,f=0;for(this[t+s]=e&255;--s>=0&&(p*=256);)e<0&&f===0&&this[t+s+1]!==0&&(f=1),this[t+s]=(e/p>>0)-f&255;return t+n};l.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};l.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};l.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};l.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};l.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Fr(r,e,t,n,o,a){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Gr(r,e,t,n,o){return e=+e,t=t>>>0,o||Fr(r,e,t,4,34028234663852886e22,-34028234663852886e22),Le.write(r,e,t,n,23,4),t+4}l.prototype.writeFloatLE=function(e,t,n){return Gr(this,e,t,!0,n)};l.prototype.writeFloatBE=function(e,t,n){return Gr(this,e,t,!1,n)};function Nr(r,e,t,n,o){return e=+e,t=t>>>0,o||Fr(r,e,t,8,17976931348623157e292,-17976931348623157e292),Le.write(r,e,t,n,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,n){return Nr(this,e,t,!0,n)};l.prototype.writeDoubleBE=function(e,t,n){return Nr(this,e,t,!1,n)};l.prototype.copy=function(e,t,n,o){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var a=o-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),t),a};l.prototype.fill=function(e,t,n,o){if(typeof e=="string"){if(typeof t=="string"?(o=t,t=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var a=e.charCodeAt(0);(o==="utf8"&&a<128||o==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{var p=l.isBuffer(e)?e:l.from(e,o),f=p.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=p[s%f]}return this};var ki=/[^+/0-9A-Za-z-_]/g;function Pi(r){if(r=r.split("=")[0],r=r.trim().replace(ki,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function It(r,e){e=e||1/0;for(var t,n=r.length,o=null,a=[],s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function Fi(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Gi(r,e){for(var t,n,o,a=[],s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,o=t%256,a.push(o),a.push(n);return a}function Br(r){return Ct.toByteArray(Pi(r))}function Qe(r,e,t,n){for(var o=0;o<n&&!(o+t>=e.length||o>=r.length);++o)e[o+t]=r[o];return o}function ce(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function kt(r){return r!==r}var Ni=function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var n=t*16,o=0;o<16;++o)e[n+o]=r[t]+r[o];return e}()});var _r=Ye((ts,Mr)=>{i();var F=Mr.exports={},me,ue;function Pt(){throw new Error("setTimeout has not been defined")}function Ft(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?me=setTimeout:me=Pt}catch(r){me=Pt}try{typeof clearTimeout=="function"?ue=clearTimeout:ue=Ft}catch(r){ue=Ft}})();function Ur(r){if(me===setTimeout)return setTimeout(r,0);if((me===Pt||!me)&&setTimeout)return me=setTimeout,setTimeout(r,0);try{return me(r,0)}catch(e){try{return me.call(null,r,0)}catch(t){return me.call(this,r,0)}}}function Bi(r){if(ue===clearTimeout)return clearTimeout(r);if((ue===Ft||!ue)&&clearTimeout)return ue=clearTimeout,clearTimeout(r);try{return ue(r)}catch(e){try{return ue.call(null,r)}catch(t){return ue.call(this,r)}}}var ge=[],ke=!1,we,et=-1;function Di(){!ke||!we||(ke=!1,we.length?ge=we.concat(ge):et=-1,ge.length&&Vr())}function Vr(){if(!ke){var r=Ur(Di);ke=!0;for(var e=ge.length;e;){for(we=ge,ge=[];++et<e;)we&&we[et].run();et=-1,e=ge.length}we=null,ke=!1,Bi(r)}}F.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ge.push(new Rr(r,e)),ge.length===1&&!ke&&Ur(Vr)};function Rr(r,e){this.fun=r,this.array=e}Rr.prototype.run=function(){this.fun.apply(null,this.array)};F.title="browser";F.browser=!0;F.env={};F.argv=[];F.version="";F.versions={};function Te(){}F.on=Te;F.addListener=Te;F.once=Te;F.off=Te;F.removeListener=Te;F.removeAllListeners=Te;F.emit=Te;F.prependListener=Te;F.prependOnceListener=Te;F.listeners=function(r){return[]};F.binding=function(r){throw new Error("process.binding is not supported")};F.cwd=function(){return"/"};F.chdir=function(r){throw new Error("process.chdir is not supported")};F.umask=function(){return 0}});var c,m,rs,i=ti(()=>{c=h(Dr()),m=h(_r()),rs=function(r){function e(){var n=this||self;return delete r.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var t=__magic__;return t}(Object)});var Ya={};ri(Ya,{AccountContext:()=>Nt,AccountContextProvider:()=>Bt,AppInfoContextProvider:()=>Xa,FormContext:()=>qt,FormContextProvider:()=>Ot,NetworkContext:()=>$t,NetworkContextProvider:()=>Kt,ReceiverContext:()=>ar,ReceiverContextProvider:()=>sr,SendFormContext:()=>pr,SendFormContextProvider:()=>lr,TokensContext:()=>zt,TokensContextProvider:()=>Ht,useAccountContext:()=>H,useFetchKnownAddresses:()=>tr,useFormContext:()=>q,useNetworkConfigContext:()=>ne,useReceiverContext:()=>Xe,useScamError:()=>or,useSendFormContext:()=>Ha,useTokensContext:()=>ye,useVerifyScamAddress:()=>nr});module.exports=ni(Ya);i();var W=h(require("react")),_o=require("@terradharitri/sdk-dapp/constants/index");i();i();i();var Yr=h(require("axios"));i();i();i();var Hr=require("@terradharitri/sdk-dapp/apiCalls/configuration/getServerConfiguration");i();var Zr=require("@terradharitri/sdk-dapp/constants/index");i();i();i();i();var qr=10,Pe="500000",Or=75e4,$r=1e6,Kr=2e5,Wr="5000000000000000",C="0";var Ui={D:"devnet",T:"testnet",1:"mainnet"};function Fe(r){return Ui[r]}function zr(r){let e=Fe(r),t=Zr.fallbackNetworkConfigurations[e].apiAddress;if(!t)throw"Could not extract api address for environment, check if you have a valid chainID";return t}function tt(r){return v(this,null,function*(){let e=zr(r);return yield(0,Hr.getServerConfiguration)(e)})}i();var Vi={mainnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqxwakt2g7u9atsnr03gqcgmhcv38pt7mkd94q8vqld4",delegationContractData:{minGasLimit:"75000000"}},devnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqeyzkqc",delegationContractData:{minGasLimit:"75000000"}},testnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqeyzkqc",delegationContractData:{minGasLimit:"75000000"}}};function Xr(r){let e=Fe(r);return e?Vi[e]:null}var rt={value:null};function nt(r){return rt.value={baseURL:r.apiAddress,timeout:Number(r.apiTimeout)},rt.value}function _(r){return v(this,null,function*(){if(rt.value!=null)return rt.value;if(console.error("Cannot get API config before initialization, make sure to call setApiConfig first"),r!=null){let t=yield tt(r);return nt(t)}let e="Cannot get api config, make sure to initialize the context before calling APIs";throw console.error(e),e})}function jr(r,e){return v(this,null,function*(){let t=e||(yield _()),{data:n}=yield Yr.default.get(`/accounts/${r}`,t);return n})}i();i();var Jr=h(require("axios"));function Qr(){return v(this,null,function*(){try{let r=yield _(),{data:e}=yield Jr.default.get("economics",r);return e}catch(r){return console.error("err fetching economics info",r),null}})}i();i();var ot=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),Ri=require("@terradharitri/sdk-dapp/apiCalls/tokens/getPersistedToken"),en=h(require("axios")),tn=h(require("lodash/uniqBy"));var Mi=1e3,Gt=100;function _i(o){return v(this,arguments,function*({address:r,size:e,from:t,search:n}){let a=new URLSearchParams($(I(I({},t!=null&&e!=null?{from:String(t),size:String(e)}:{}),n?{search:n}:{}),{includeMetaDCDT:"true"})).toString(),s=yield _();return en.default.get(`/${ot.ACCOUNTS_ENDPOINT}/${r}/${ot.TOKENS_ENDPOINT}?${a}`,s)})}function qi(o){return v(this,arguments,function*({address:r,page:e=1,search:t,size:n}){let a={address:r,search:t};n!=null&&(a.from=(e-1)*Gt,a.size=Gt);let{data:s}=yield _i(a);return s})}function rn(r){return v(this,null,function*(){let e=[],t=!0,n=1;for(;t;)try{let o=yield qi({address:r,size:Mi,page:n});if(o==null||(o==null?void 0:o.length)===0){t=!1;break}let a=o.map(s=>I({},s));if(e.push(...a),o.length!=Gt){t=!1;break}n++}catch(o){console.log(o),t=!1}return(0,tn.default)(e,o=>o.identifier)})}i();var nn=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),on=h(require("axios"));i();i();i();var J=require("@terradharitri/sdk-dapp/types/tokens.types");i();var xe=(d=>(d.receiver="receiver",d.gasPrice="gasPrice",d.data="data",d.tokenId="tokenId",d.amount="amount",d.gasLimit="gasLimit",d.receiverUsername="receiverUsername",d.rawReceiverUsername="rawReceiverUsername",d.senderUsername="senderUsername",d))(xe||{});i();i();function an(r,e){return v(this,null,function*(){if(r.type!==J.NftEnumType.MetaDCDT)return null;let t=e||(yield _());try{let{data:n}=yield on.default.get(`/${nn.COLLECTIONS_ENDPOINT}/${r.collection}`,t);return(n==null?void 0:n.canTransfer)===!1?n==null?void 0:n.roles.map(({address:s,canTransfer:p})=>p?s:"").filter(s=>Boolean(s)):null}catch(n){return console.error(`Unable to get canTransfer information for collection ${r.collection}`,n),null}})}i();var sn=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),Oi=h(require("axios"));i();i();var cn=h(require("axios"));function mn(r){return v(this,null,function*(){try{let e=yield _(),{data:t}=yield cn.default.post("/transaction/cost",r,e);return{data:t,success:!0}}catch(e){return console.error(e),{success:!1}}})}i();var Ge=h(require("react")),Nt=(0,Ge.createContext)({});function Bt({children:r,value:e}){return Ge.default.createElement(Nt.Provider,{value:e},r)}function H(){return(0,Ge.useContext)(Nt)}i();i();var O=h(require("react")),mo=require("@terradharitri/sdk-dapp/constants/index"),uo=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),xt=h(require("bignumber.js")),po=require("formik");i();i();i();var $e=require("bech32"),$i=r=>{let e=$e.bech32.toWords(c.Buffer.from(r,"hex"));return $e.bech32.encode("drt",e)},Ki=r=>{let e=$e.bech32.decode(r,256);return c.Buffer.from($e.bech32.fromWords(e.words)).toString("hex")},un={encode:$i,decode:Ki};i();i();var be=({initialValues:r,gasLimit:e,touched:t})=>r.gasLimit!==e&&t.gasLimit;i();var pn=(r,e)=>typeof e=="boolean"?e:Array.isArray(e)&&e.includes(r);i();i();var ln=r=>Boolean(r==null?void 0:r.startsWith("drt1"));i();var Zi=require("@terradharitri/sdk-dapp/constants"),zi=require("@terradharitri/sdk-dapp/utils/account/getAccount");i();i();var Hi=require("@terradharitri/sdk-dapp/utils/transactions/transactionInfoHelpers/getScamFlag");i();var Xi=require("@terradharitri/sdk-dapp/utils/buildUrlParams");i();var Yi=h(require("anchorme"));i();i();var Dt=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),pe=require("@terradharitri/sdk-dapp/utils/operations/formatAmount"),fn=require("@terradharitri/sdk-dapp/utils/operations/getUsdValue"),K=require("@terradharitri/sdk-dapp/utils/operations/parseAmount");i();i();var X=h(require("react")),Vn=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType"),Rn=require("formik");i();i();var Gn=require("@terradharitri/sdk-dapp/constants/index"),aa=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),sa=h(require("bignumber.js"));i();i();var dn=require("@terradharitri/sdk-dapp/constants/index");i();var gn=require("@terradharitri/sdk-dapp/constants/index");var he=(r="")=>{let e=Or+r.length*gn.GAS_PER_DATA_BYTE;return r.startsWith("DCDTNFTBurn")?Kr.toString():String(Math.max(e,$r))};i();var it=require("@terradharitri/sdk-dapp/constants/index"),Ut=h(require("bignumber.js"));i();var Tn=require("@terradharitri/sdk-dapp/constants/index");function te(r=!1){return r?Tn.EXTRA_GAS_LIMIT_GUARDED_TX:0}var Ee=({data:r,isGuarded:e})=>{let t=new Ut.default(it.GAS_LIMIT),n=new Ut.default(it.GAS_PER_DATA_BYTE),o=r?n.times(c.Buffer.from(r).length):0,a=te(e);return t.plus(o).plus(a).toString(10)};i();var xn=require("@terradharitri/sdk-dapp/constants/index");function Ke({tokens:r,tokenId:e}){let t=r.find(({identifier:a})=>a===e),n=t?t.decimals:xn.DECIMALS,o=(t==null?void 0:t.balance)||C;return $(I({},t),{decimals:n,identifier:(t==null?void 0:t.identifier)||"",name:(t==null?void 0:t.name)||"",ticker:(t==null?void 0:t.ticker)||"",balance:o})}var Vt=Ke;i();i();var re=require("@terradharitri/sdk-core"),yn=require("@terradharitri/sdk-dapp/constants/index"),hn=h(require("bignumber.js"));function Rt({amount:r,data:e,nonce:t,receiver:n,receiverUsername:o,sender:a,senderUsername:s,gasPrice:p,gasLimit:f,chainId:d}){let T=new hn.default((0,K.parseAmount)(r));return new re.Transaction({nonce:t,value:re.TokenPayment.rewaFromBigInteger(T.toString(10)),sender:new re.Address(a),receiver:new re.Address(n),gasPrice:parseInt(p),gasLimit:parseInt(f),senderUsername:s,receiverUsername:o,data:new re.TransactionPayload(e),chainID:d,version:new re.TransactionVersion(yn.VERSION)})}i();function Ne(r){return isNaN(Number(r))||r===""?(0,K.parseAmount)("0"):(0,K.parseAmount)(r)}i();var Ji=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger");i();var En=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType");function vn({nft:r,tokenId:e}){let{isDcdt:t,isNft:n,isRewa:o}=(0,En.getIdentifierType)(e);return o?"REWA":(r==null?void 0:r.type)===J.NftEnumType.NonFungibleDCDT?"NonFungibleDCDT":(r==null?void 0:r.type)===J.NftEnumType.SemiFungibleDCDT?"SemiFungibleDCDT":(r==null?void 0:r.type)===J.NftEnumType.MetaDCDT||n?"MetaDCDT":t?"DCDT":"REWA"}i();var at=h(require("bignumber.js"));var st=r=>r.length%2===0?r:`0${r}`,Qi=({amount:r,decimals:e,tokenId:t})=>{let n=Boolean(r)?r:C,o=st(c.Buffer.from(t).toString("hex")),a=st(new at.default((0,K.parseAmount)(n,e)).toString(16));return`DCDTTransfer@${o}@${a}`},ea=({nft:r,amount:e,receiver:t,errors:n})=>{if(!(r&&e&&t&&!n))return"";try{let a="DCDTNFTTransfer",s=(r==null?void 0:r.type)===J.NftEnumType.MetaDCDT?(0,K.parseAmount)(e,r.decimals):e;return a+=`@${c.Buffer.from(String(r.collection)).toString("hex")}`,a+=`@${st(new at.default(String(r.nonce)).toString(16))}`,a+=`@${st(new at.default(s).toString(16))}`,a+=`@${un.decode(t)}`,a}catch(a){return""}},An=({txType:r,values:e,nft:t,amountError:n,receiverError:o})=>{let{tokens:a,tokenId:s,amount:p,receiver:f}=e;if(a&&r==="DCDT"&&!n){let{decimals:d}=Vt({tokens:a,tokenId:s});return Qi({amount:p,tokenId:s,decimals:d})}return r!=="REWA"?ea({nft:t,amount:p,receiver:f,errors:Boolean(n||o)}):e.data};i();var ta=require("@terradharitri/sdk-dapp/constants/index"),ra=require("@terradharitri/sdk-dapp/utils/smartContracts"),na=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType"),oa=h(require("bignumber.js"));i();var Cn=h(require("bignumber.js"));var wn=s=>v(void 0,[s],function*({balance:r,address:e,isGuarded:t,nonce:n,values:o,chainId:a}){var M,k,Z;let{amount:p,receiver:f,data:d,gasLimit:T,gasPrice:g}=o,y=Rt({balance:r,amount:String(p),gasLimit:String(T),gasPrice:Ne(g),data:d.trim(),receiver:f,sender:e,nonce:n,chainId:a}).toPlainObject(),{data:E,success:w}=yield mn($(I({},y),{sender:e})),b=Number((M=E==null?void 0:E.data)==null?void 0:M.txGasUnits),G=(k=E==null?void 0:E.data)==null?void 0:k.returnMessage;if(!Boolean(w&&(E==null?void 0:E.code)==="successful"&&b&&b!==0))return{gasLimit:T,gasLimitCostError:(Z=E==null?void 0:E.data)==null?void 0:Z.returnMessage};if(!G)return{gasLimit:new Cn.default(b).times(qr).dividedToIntegerBy(100).plus(b).toString(10)};let S=Ee({data:o.data?o.data.trim():"",isGuarded:t});return{gasLimit:String(b)===C?S:String(b)}});i();var Be=require("@terradharitri/sdk-dapp/constants/index"),Sn=h(require("bignumber.js"));var bn,In,Ln,ct=(0,pe.formatAmount)({input:String((bn=Be.GAS_PRICE)!=null?bn:1e9),decimals:(In=Be.DECIMALS)!=null?In:18,showLastNonZeroDecimal:!0,digits:(Ln=Be.DIGITS)!=null?Ln:4}),ia=new Sn.default(ct).times(10).toString(10);i();var ve=require("@terradharitri/sdk-dapp/constants/index"),We=h(require("bignumber.js"));function kn({balance:r=C,gasLimit:e=C,gasPrice:t,decimals:n,digits:o,data:a="",chainId:s}){let p=new We.default(r),f=new We.default(Wr),d=new We.default((0,Dt.calculateFeeLimit)({gasPrice:t,gasLimit:e,data:a,chainId:s,gasPerDataByte:String(ve.GAS_PER_DATA_BYTE),gasPriceModifier:String(ve.GAS_PRICE_MODIFIER)})),T=p.minus(d),g=T.minus(f),x=T.isGreaterThanOrEqualTo(0)?(0,pe.formatAmount)({input:T.toString(10),decimals:n,digits:o,showLastNonZeroDecimal:!0,addCommas:!1}):C,y=g.isGreaterThanOrEqualTo(0)?(0,pe.formatAmount)({input:g.toString(10),decimals:n,digits:o,showLastNonZeroDecimal:!0,addCommas:!1}):x;return{entireBalance:x,entireBalanceMinusDust:y,parsedEntireBalance:T.isGreaterThan(0)?T.toString(10):C}}function Mt({balance:r=C,decimals:e=ve.DECIMALS,digits:t=ve.DIGITS}){let n=new We.default(r);if(n.isGreaterThanOrEqualTo(0)){let o=n.toString(10);return(0,pe.formatAmount)({input:o,decimals:e,digits:t>e?e:t,showLastNonZeroDecimal:!0,addCommas:!1})}return C}i();var Pn=h(require("bignumber.js"));function Fn({txType:r,data:e="",isGuarded:t}){let n=te(t),o=he();return r==="DCDT"&&(o=Pe),r==="REWA"&&(o=Ee({data:e.trim()})),new Pn.default(o).plus(n).toString(10)}i();i();var Dn=require("yup");i();var mt=require("@terradharitri/sdk-dapp/constants/ledger.constants"),Nn=h(require("@terradharitri/sdk-dapp/utils/operations/ledger/getLedgerVersionOptions")),ut=require("yup"),ca=(0,ut.string)().test("ledgerDataActive","Data option is disabled in the Ledger DharitrI app",function(e){let{ledger:t}=this.parent;return!(t&&e&&e.length&&!t.ledgerDataActive)}),ma=(0,ut.string)().test({name:"hashSign",test:function(e){let{ledger:t,isGuarded:n}=this.parent;if(t){let{ledgerWithHashSign:o,ledgerWithGuardians:a}=(0,Nn.default)(t.version);if(e&&e.length>300&&!o)return this.createError({message:`Data too long. You need at least DharitrI app version ${mt.LEDGER_HASH_SIGN_MINIMUM_VERSION}. Update DharitrI app to continue`,path:"data"});if(n&&!a)return this.createError({message:`You need at least DharitrI app version ${mt.LEDGER_WITH_GUARDIANS_MINIMUM_VERSION} to use Guardians`,path:"data"})}return!0}}),ua=[ca,ma],pu=ua.reduce((r,e)=>r.concat(e),(0,ut.string)());i();var pa=require("@terradharitri/sdk-dapp/constants/index"),la=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),fa=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),da=require("yup");i();var ya=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),ha=h(require("bignumber.js")),Ea=require("yup");i();var ga=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),Ta=h(require("bignumber.js")),xa=require("yup");i();var va=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),Aa=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Ca=h(require("bignumber.js")),wa=require("yup");i();var ba=h(require("bignumber.js")),Ia=require("yup");i();var La=require("@terradharitri/sdk-dapp/constants/index"),Sa=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),ka=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Pa=h(require("bignumber.js")),Fa=require("yup");i();var Ga=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),Na=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Ba=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),Da=h(require("bignumber.js")),Ua=require("yup");i();var Va=h(require("bignumber.js")),Ra=require("yup");i();var Ma=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),_a=require("yup");i();var qa=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),Oa=require("yup");i();var Un=({shouldValidateForm:r,errors:e,touched:t})=>n=>Boolean(e[n]&&(t[n]||r));i();var qt=(0,X.createContext)({});function Ot({children:r,value:e}){let{skipToConfirm:t}=e,[n,o]=(0,X.useState)(Boolean(t)),[a,s]=(0,X.useState)(!1),[p,f]=(0,X.useState)(Date.now()),{values:d,errors:T,touched:g,validateForm:x,setFieldTouched:y,setErrors:E,isValid:w,handleSubmit:b}=(0,Rn.useFormikContext)(),G=(0,X.useCallback)(e.onCloseForm,[]),{isDcdt:B,isNft:S,isRewa:N}=(0,Vn.getIdentifierType)(d.tokenId),M=(0,X.useCallback)(Un({shouldValidateForm:n,errors:T,touched:g}),[n,T,g]),k=(0,X.useCallback)(()=>v(this,null,function*(){o(!0),Object.values(xe).forEach(D=>{y(D,!0)});let L=yield x();if(Object.keys(L).length===0){e.setIsFormSubmitted(!0);return}T.gasLimit||L.gasPrice?(E(L),f(Date.now())):y("gasLimit",!1)}),[T,x]),Z=(0,X.useCallback)(()=>{a?s(!1):e.setIsFormSubmitted(!1)},[a]),P=$(I({},e),{checkInvalid:M,isRewaTransaction:N,isDcdtTransaction:B,isNftTransaction:S,shouldValidateForm:n,areValidatedValuesReady:Boolean(e.isFormSubmitted||t)&&w,isGuardianScreenVisible:a,setIsGuardianScreenVisible:s,isFormValid:w,renderKey:p,txType:d.txType,onValidateForm:k,onInvalidateForm:Z,onCloseForm:G,onSubmitForm:b});return X.default.createElement(qt.Provider,{value:P},r)}function q(){return(0,X.useContext)(qt)}i();i();var V=h(require("react")),$n=require("formik"),Kn=h(require("lodash/uniqBy"));i();i();var le=h(require("react"));var $t=(0,le.createContext)({});function Kt({children:r,value:{networkConfig:e}}){let[t,n]=(0,le.useState)(null);(0,le.useEffect)(()=>{o()},[e]);function o(){let a=Xr(e.id);n(a)}return le.default.createElement($t.Provider,{value:{networkConfig:e,delegationContractData:t}},r)}function ne(){return(0,le.useContext)($t)}i();i();var lt=require("react"),Mn=require("@terradharitri/sdk-dapp/constants/index");var pt=require("@terradharitri/sdk-dapp/types/enums.types");function _n(){let{networkConfig:r}=ne(),[e,t]=(0,lt.useState)(0);function n(){return v(this,null,function*(){let o=yield Qr(),a=(o==null?void 0:o.price)||0;t(a)})}return(0,lt.useEffect)(()=>{![pt.EnvironmentsEnum.mainnet,pt.EnvironmentsEnum.testnet,pt.EnvironmentsEnum.devnet].includes(r==null?void 0:r.id)||n()},[r==null?void 0:r.id]),{rewaLabel:r.rewaLabel,rewaPriceInUsd:e,digits:Mn.DIGITS}}i();var ft={},qn=r=>v(void 0,null,function*(){if(!r)return null;if(r.collection in ft)return ft[r.collection];let e=yield an(r);return ft[r.collection]=e,ft[r.collection]});var zt=(0,V.createContext)({}),On="tokenId",Wt="nft",$a="tokens",Ka="txType",Zt=[];function Ht({children:r,value:e}){let[t,n]=(0,V.useState)(!0),{values:{tokenId:o,tokens:a,nft:s},errors:{tokenId:p},setFieldValue:f}=(0,$n.useFormikContext)(),{address:d,balance:T}=H(),{checkInvalid:g}=q(),{networkConfig:{decimals:x}}=ne(),y=(0,V.useRef)(!1),{rewaPriceInUsd:E,digits:w,rewaLabel:b}=_n(),G=a||Zt,B=(0,V.useCallback)((P=!0)=>v(this,null,function*(){if(n(P),y.current)return;y.current=!0;let L=yield rn(d),A=a!=null?a:[],D=(0,Kn.default)([...A,...L],ie=>ie.identifier);f($a,D),Zt=D,y.current=!1,n(!1)}),[d]),S=(0,V.useCallback)(P=>{f(On,P,!1)},[]);(0,V.useEffect)(()=>(B(!1),()=>{Zt=[]}),[]);let N=()=>v(this,null,function*(){let P=vn({nft:s,tokenId:o});if(f(Ka,P),P==="SemiFungibleDCDT"||P==="NonFungibleDCDT")return;let L=(k==null?void 0:k.find(A=>A.identifier===o))||s;if(P==="MetaDCDT"&&L){let A=L;f(Wt,A);let D=yield qn(A);A=$(I({},A),{allowedReceivers:D}),f(Wt,A)}else f(Wt,void 0)}),M=g(On),k=[{name:"DharitrI eGold",identifier:b,balance:T,decimals:Number(x),ticker:b,usdPrice:E},...G];(0,V.useEffect)(()=>{N()},[o]);let Z=(0,V.useMemo)(()=>Ke({tokens:k||[],tokenId:o}),[o,a]);return V.default.createElement(zt.Provider,{value:{nft:s||(e==null?void 0:e.initialNft),tokens:G,allAvailableTokens:k,areTokensLoading:t&&G.length===0,tokenIdError:p,tokenId:o,tokenDetails:Z,rewaLabel:b,RewaIcon:e==null?void 0:e.RewaIcon,rewaPriceInUsd:E,digits:w,isTokenIdInvalid:M,getTokens:B,onChangeTokenId:S}},r)}function ye(){return(0,V.useContext)(zt)}i();i();var Ve=require("@terradharitri/sdk-dapp/constants/index"),so=require("formik");i();i();var R=h(require("react")),Tt=require("@terradharitri/sdk-dapp/constants/index"),to=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),ro=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Jt=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),no=h(require("bignumber.js")),oo=require("formik");i();i();i();i();var Xt=h(require("bignumber.js"));function Wn({amount:r="",available:e,readonly:t=!1,entireBalanceMinusDust:n}){let o=new Xt.default(r),s=new Xt.default(n).isGreaterThan(o),p=!r,f=pn("amount",t);return(p||s)&&e!==C&&!f}function Zn({nft:r,amount:e,readonly:t,maxAmountAvailable:n,maxAmountMinusDust:o,txType:a}){switch(a){case"REWA":return Wn({amount:e,entireBalanceMinusDust:o,readonly:t,available:n});case"DCDT":return e!==n&&!t&&n!==C;default:return r!=null&&e!==(r==null?void 0:r.balance)&&!t}}i();var Yt=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Ze=h(require("bignumber.js"));var ze=(r,e)=>{let t=(0,Yt.stringIsFloat)(String(r))?r:C,n=(0,Yt.stringIsFloat)(String(e))?new Ze.default(e):new Ze.default(C),o=(0,Ze.default)(100).dividedBy(n.dividedBy(t)).toNumber();return Ze.default.minimum(o,100).toNumber()};i();function dt({values:r,errors:e,touched:t}){let n=Boolean(e["amount"]&&t["amount"]);return r.txType==="REWA"?r.amount!=C?n:!1:n}i();var He=require("react"),zn=require("@terradharitri/sdk-dapp/constants/index"),Hn=require("@terradharitri/sdk-dapp/utils/smartContracts"),Xn=h(require("bignumber.js")),Yn=require("formik");i();var gt=require("react");function Wa(r,e){let[t,n]=(0,gt.useState)(r);return(0,gt.useEffect)(()=>{let a=setTimeout(()=>n(r),e);return()=>clearTimeout(a)},[r]),t}var De=Wa;var jt=500;function Za(r){let{networkConfig:{chainId:e}}=ne(),{prefilledForm:t}=q(),n=(0,Yn.useFormikContext)(),{balance:o,address:a,nonce:s}=H(),{values:p,initialValues:f,touched:d,errors:{gasLimit:T,amount:g},setFieldValue:x}=n,{data:y,amount:E,gasLimit:w}=p,b=De(y,jt),G=De(E,jt),B=De(w,jt),[S,N]=(0,He.useState)(!1),[M,k]=(0,He.useState)(r),Z=()=>v(this,null,function*(){let P=T||g,L=b.length>0,A=new Xn.default(G).isGreaterThanOrEqualTo(0),D=be({initialValues:f,gasLimit:w,touched:d}),ie=e!==zn.MAINNET_CHAIN_ID||!1;if(!t&&(0,Hn.isContract)(p.receiver)&&ie&&!D&&!P&&L&&A){N(!0);try{let{gasLimit:fe,gasLimitCostError:ht}=yield wn({balance:o,address:a,nonce:s,values:p,chainId:e});N(!1),k(ht),x("gasLimit",fe,!0)}catch(fe){N(!1),console.error(fe)}}});return(0,He.useEffect)(()=>{Z()},[b,G,B,p.receiver,t]),{gasCostLoading:S,gasCostError:M}}var jn=Za;i();i();var Jn=require("@terradharitri/sdk-dapp/constants/index"),Qn=h(require("bignumber.js"));var eo=({isNftTransaction:r,isDcdtTransaction:e,data:t,isGuarded:n})=>{let o=te(n),a=Jn.GAS_LIMIT.toString();return r&&(a=he(t)),e&&(a=Pe),new Qn.default(a).plus(o).toString(10)};var io=(0,R.createContext)({});function ao({children:r,initGasLimitError:e}){let t=(0,oo.useFormikContext)(),{values:n,touched:o,errors:{gasPrice:a,gasLimit:s},setFieldValue:p,setFieldTouched:f,initialValues:d}=t,{gasPrice:T,gasLimit:g,data:x,tokenId:y,txType:E,isGuarded:w,receiver:b,amount:G}=n,B=te(w),{checkInvalid:S,isNftTransaction:N,isDcdtTransaction:M,prefilledForm:k,isRewaTransaction:Z}=q(),{networkConfig:{chainId:P}}=ne(),{gasCostLoading:L,gasCostError:A}=jn(e),D=eo({isNftTransaction:N,isDcdtTransaction:M,data:x,isGuarded:w}),ae=!dt({values:n,errors:t.errors,touched:o})&&S("gasLimit"),fe=S("gasPrice"),ht=(0,R.useCallback)((z,_e=!1)=>{var Ie;let qe=typeof z=="string"?z:(Ie=z==null?void 0:z.target)==null?void 0:Ie.value;p("gasPrice",qe,_e)},[]),Et=(0,R.useCallback)((z,_e=!1)=>{var Ie;let qe=typeof z=="string"?z:(Ie=z==null?void 0:z.target)==null?void 0:Ie.value;p("gasLimit",qe,_e)},[]),qo=(0,R.useCallback)(()=>{p("gasPrice",ct)},[]),Oo=(0,R.useCallback)(()=>{p("gasLimit",D)},[N]),$o=(0,R.useCallback)(()=>{f("gasPrice",!0)},[]),Ko=(0,R.useCallback)(()=>{f("gasLimit",!0)},[]),fr=Boolean(a)||Boolean(s),Wo=(0,R.useMemo)(()=>{let z=!(0,Jt.stringIsInteger)(g),_e=!(0,ro.stringIsFloat)(T);if(z||_e)return C;let qe=be({initialValues:d,gasLimit:g,touched:o}),zo=!k&&!qe&&Z?x.trim():"",dr=(0,to.calculateFeeLimit)({gasLimit:g,gasPrice:(0,K.parseAmount)(T),data:zo,chainId:P,gasPerDataByte:String(Tt.GAS_PER_DATA_BYTE),gasPriceModifier:String(Tt.GAS_PRICE_MODIFIER)});return(0,Jt.stringIsInteger)(dr)?dr:C},[fr,T,g,P,k,Z,o.gasLimit,x,b,G]);(0,R.useEffect)(()=>{let z=be({initialValues:d,gasLimit:g,touched:o});!k&&N&&!z&&Et(new no.default(he()).plus(B).toString())},[N,o]),(0,R.useEffect)(()=>{k||Et(Fn({txType:E,data:x,isGuarded:w}),!0)},[y,E]);let Zo={gasPrice:T,gasLimit:g,gasCostLoading:L,feeLimit:Wo,defaultGasLimit:D,gasPriceError:a,gasLimitError:s,gasCostError:A,hasErrors:fr,isGasLimitInvalid:ae,isGasPriceInvalid:fe,onChangeGasLimit:Et,onChangeGasPrice:ht,onBlurGasPrice:$o,onBlurGasLimit:Ko,onResetGasPrice:qo,onResetGasLimit:Oo};return R.default.createElement(io.Provider,{value:Zo},r)}function Ue(){return(0,R.useContext)(io)}function co(){let{values:r}=(0,so.useFormikContext)(),{balance:e}=H(),{networkConfig:{chainId:t}}=ne(),{nft:n,tokens:o}=ye(),{isDcdtTransaction:a,isNftTransaction:s,isRewaTransaction:p}=q(),{gasLimit:f,gasPrice:d}=Ue(),{tokenId:T}=r,g=null;s&&n&&(g=Mt({balance:n.balance,decimals:n.type===J.NftEnumType.MetaDCDT?n.decimals:0,digits:Ve.DIGITS}));let x=null;if(a){let{decimals:B,balance:S}=Ke({tokens:o,tokenId:T});x=Mt({balance:S,decimals:B,digits:Ve.DIGITS})}let y=C,E=e;if(e&&p){let{entireBalance:B,entireBalanceMinusDust:S}=kn({balance:e,gasPrice:Ne(d),gasLimit:f,decimals:Ve.DECIMALS,digits:Ve.DIGITS,chainId:t});y=B,E=S}let b=p?y:n&&g?g:x;return{maxAmountAvailable:b||C,maxAmountMinusDust:(p?E:b)||C}}var lo=(0,O.createContext)({});function fo({children:r}){let{values:e,errors:t,touched:n,handleBlur:o,setFieldValue:a,setFieldError:s,setFieldTouched:p}=(0,po.useFormikContext)(),{readonly:f,uiOptions:d}=q(),{maxAmountAvailable:T,maxAmountMinusDust:g}=co(),[x,y]=(0,O.useState)(ze(e.amount,g)),[E,w]=(0,O.useState)(!1),{nft:b}=ye(),G=d!=null&&d.showAmountSlider?!1:Zn({nft:b,amount:e.amount,readonly:f,maxAmountAvailable:T,maxAmountMinusDust:g,txType:e.txType});function B(){w(!1)}let S=(0,O.useCallback)((A,D=!0)=>{if(new xt.default(g).isZero()||!(0,uo.stringIsFloat)(A.toString())){y(0);return}let ae=new xt.default(g).times(A).dividedBy(100),fe=(0,pe.formatAmount)({input:(0,K.parseAmount)(String(ae)),digits:mo.DIGITS,showLastNonZeroDecimal:A>=100});if(D&&a("amount",fe),A<0){y(0);return}if(A>100){y(100);return}y(A)},[g,a]),N=(0,O.useCallback)((A,D=!0)=>{var ae;let ie=typeof A=="string"?A:(ae=A==null?void 0:A.target)==null?void 0:ae.value;return p("amount",!0),S(ze(ie,g),!1),a("amount",ie,D)},[a,S,g]),M=(0,O.useCallback)(A=>s("amount",A),[s]),k=(0,O.useCallback)(()=>{p("amount",!0)},[o]),Z=(0,O.useCallback)(()=>(w(!0),N(g||e.amount)),[g]);(0,O.useEffect)(()=>{(0,xt.default)(g).isGreaterThan(0)&&S(ze(e.amount,g),!1)},[ze,g]);let P=dt({values:e,errors:t,touched:n}),L={amount:e.amount,error:t.amount,isInvalid:P,maxAmountAvailable:T,maxAmountMinusDust:g,isMaxButtonVisible:G,isMaxClicked:E,amountRange:x,onFocus:B,onBlur:k,onChange:N,onMaxClicked:Z,onSetError:M,onSetAmountPercentage:S};return O.default.createElement(lo.Provider,{value:L},r)}function go(){return(0,O.useContext)(lo)}i();i();var Q=h(require("react")),To=require("formik");var xo=(0,Q.createContext)({});function yo({children:r}){let{values:e,errors:t,touched:n,setFieldValue:o,handleBlur:a,setFieldTouched:s,initialValues:p}=(0,To.useFormikContext)(),{checkInvalid:f,prefilledForm:d,isRewaTransaction:T}=q(),{nft:g}=ye(),{receiver:x,txType:y,amount:E,tokenId:w,isAdvancedModeEnabled:b,gasLimit:G}=e,{onChangeGasLimit:B}=Ue(),{isGuarded:S}=H(),N=f("data"),M=(L,A=!1)=>{var ae;let D=typeof L=="string"?L:(ae=L==null?void 0:L.target)==null?void 0:ae.value,ie=be({initialValues:p,gasLimit:G,touched:n});if(o("data",D,A),!d&&!ie&&T){let fe=Ee({data:D,isGuarded:S});B(fe)}},k=(0,Q.useCallback)(()=>{s("data",!0)},[a]),Z=(0,Q.useCallback)(()=>{M("")},[]);(0,Q.useEffect)(()=>{if(!d){let L=y!=="DCDT"?t.receiver:"",A=An({txType:y,values:e,nft:g,amountError:Boolean(t.amount),receiverError:L});M(A)}},[E,x,d,g,t.receiver,t.amount,y]),(0,Q.useEffect)(()=>{!d&&T&&M("")},[w,T]);let P={data:e.data,dataError:t.data,isDataInvalid:N,onChange:M,onBlur:k,onReset:Z,isAdvancedModeEnabled:b};return Q.default.createElement(xo.Provider,{value:P},r)}function ho(){return(0,Q.useContext)(xo)}i();i();var oe=h(require("react")),bo=require("formik");i();i();i();var yt=require("react"),vo=require("@terradharitri/sdk-dapp/apiCalls/transactions/getTransactions"),Ao=h(require("lodash/uniqBy"));i();i();var Qt=require("@terradharitri/sdk-dapp/hooks/account/helpers/trimUsernameDomain"),er=require("@terradharitri/sdk-dapp/utils"),Eo=r=>r.reduce((e,t)=>{var g,x;let n=(g=t.receiverAssets)==null?void 0:g.name,o=(x=t.senderAssets)==null?void 0:x.name,a=(0,Qt.trimUsernameDomain)(n),s=(0,Qt.trimUsernameDomain)(o),p=(0,er.isContract)(t.receiver),f=(0,er.isContract)(t.sender),d={address:t.receiver,username:p?void 0:a,rawUsername:p?void 0:n},T={address:t.sender,username:f?void 0:s,rawUsername:f?void 0:o};return t?[...e,d,T]:e},[]);function tr(){let{address:r}=H(),[e,t]=(0,yt.useState)(null);function n(){return v(this,null,function*(){try{let o=yield _(),{data:a}=yield(0,vo.getTransactions)({sender:r,receiver:r,transactionSize:50,apiAddress:o.baseURL,apiTimeout:o.timeout,withUsername:!0}),s=Eo(a),p=(0,Ao.default)(s,f=>f.address);t(p)}catch(o){console.error("Unable to fetch transactions",o),t([])}})}return(0,yt.useEffect)(()=>{n()},[]),e}i();var wo=require("react");i();var rr=require("react"),Co=require("@terradharitri/sdk-dapp/utils/account/addressIsValid");function nr(r){let[e,t]=(0,rr.useState)({}),[n,o]=(0,rr.useState)(!1);return{verifiedAddresses:e,verifyScamAddress:f=>v(this,[f],function*({address:s,addressToVerify:p=""}){let d=s!==p,T=!(p in e);if(d&&(0,Co.addressIsValid)(p)&&T&&!n){o(!0);try{let g=yield jr(p,r);t(x=>I(I({},x),g.scamInfo?{[p]:g.scamInfo}:{}))}catch(g){console.error("Unable to find address",g)}o(!1)}}),fetchingScamAddress:n}}function or(r){var s;let{address:e}=H(),{verifiedAddresses:t,verifyScamAddress:n,fetchingScamAddress:o}=nr(),a=(s=t[r])==null?void 0:s.info;return(0,wo.useEffect)(()=>{r&&n({address:e,addressToVerify:r})},[r]),{scamError:a,fetchingScamAddress:o}}var ar=(0,oe.createContext)({}),ir="receiver";function sr({children:r}){let{values:{receiver:e},errors:{receiver:t},setFieldValue:n,setFieldTouched:o}=(0,bo.useFormikContext)(),{checkInvalid:a}=q(),[s,p]=(0,oe.useState)(e),{scamError:f,fetchingScamAddress:d}=or(e),T=tr(),g=(0,oe.useCallback)((E,w=!1)=>{n(ir,E,w)},[]),x=(0,oe.useCallback)(()=>{o(ir,!0)},[]),y={receiver:e,receiverError:t,receiverInputValue:s,setReceiverInputValue:E=>p(E),isReceiverInvalid:a(ir),scamError:f,fetchingScamAddress:d,knownAddresses:T,onChangeReceiver:g,onBlurReceiver:x};return oe.default.createElement(ar.Provider,{value:y},r)}function Xe(){return(0,oe.useContext)(ar)}i();i();var Re=h(require("react")),Uo=require("formik");i();i();var Io=({knownAddresses:r,inputValue:e,key:t})=>!r||!e?!1:r.some(o=>{var a;return Boolean((a=o[t])==null?void 0:a.startsWith(e))});i();i();i();var No=require("react"),Bo=require("@terradharitri/sdk-dapp/utils");i();var mr=require("react"),ur=require("@terradharitri/sdk-dapp/hooks/account/helpers/trimUsernameDomain");i();i();var Lo=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),So=h(require("axios"));function ko(r,e){return v(this,null,function*(){var t;try{let n=e||(yield _()),{request:o,data:a}=yield So.default.get(`usernames/${r}`,n);if(!(o!=null&&o.responseURL))return null;let[,s]=(t=o.responseURL.split("/accounts/"))!=null?t:[],p=s!=null?s:a.address;return(0,Lo.addressIsValid)(p)?a:null}catch(n){return null}})}i();var Po=h(require("axios"));function Fo(r,e){return v(this,null,function*(){try{let{data:t}=yield Po.default.get(`${e}/accounts/${r}`);if(t!=null)return t}catch(t){console.error("error fetching numbat account")}return null})}var cr={};function Go(r){let[e,t]=(0,mr.useState)(!1),[n,o]=(0,mr.useState)(cr);return{usernameAccounts:n,fetchUsernameAccount:p=>v(this,null,function*(){if(!(p in n||e)){t(!0);try{let d=yield ko(p,r),T=d==null?void 0:d.username;o(g=>{var y;let x=$(I({},g),{[p]:{address:(y=d==null?void 0:d.address)!=null?y:"",username:T?String((0,ur.trimUsernameDomain)(T)):"",rawUsername:T!=null?T:""}});return cr=x,x})}catch(d){o(T=>$(I({},T),{[p]:null}))}t(!1)}}),fetchUsernameByAddress:p=>v(this,null,function*(){if(!(Object.values(n).find(d=>d&&d.address===p)||e)){t(!0);try{let d=r||(yield _()),T=yield Fo(p,d.baseURL),g=T==null?void 0:T.address,x=T==null?void 0:T.username,y=(0,ur.trimUsernameDomain)(x);if(!g||!y)return;o(E=>{let w=$(I({},E),{[y]:{address:g,username:String(y),rawUsername:x!=null?x:""}});return cr=w,w})}catch(d){console.error(d)}t(!1)}}),fetchingUsernameAccount:e}}var Do=({shouldSkipSearch:r=!1,searchPatternToLookFor:e})=>{let{fetchUsernameAccount:t,fetchUsernameByAddress:n,fetchingUsernameAccount:o,usernameAccounts:a}=Go(),s=(0,Bo.addressIsValid)(e);return(0,No.useEffect)(()=>{if(!(!e||r)){if(s){n(e);return}t(e)}},[e,s]),{fetchingUsernameAccount:o,usernameAccounts:a}};var Vo=(0,Re.createContext)({}),za=1e3;function Ro({children:r}){var b;let{values:{receiverUsername:e},errors:{receiverUsername:t}}=(0,Uo.useFormikContext)(),{receiverInputValue:n,knownAddresses:o}=Xe(),a=ln(n),s=De(n,za),p=o==null?void 0:o.some(G=>G.username===n),{usernameAccounts:f}=Do({shouldSkipSearch:Boolean(p),searchPatternToLookFor:s}),d=(b=f[n])==null?void 0:b.username,T=n!==s&&d!==null,g=Io({key:"username",knownAddresses:o,inputValue:n}),x=!T&&d===void 0&&n,y=Boolean(x&&!a&&!g),w={showUsernameError:Boolean(n&&s&&!T&&!x&&!d&&!a),isUsernameLoading:y,isUsernameDebouncing:T,usernameIsAmongKnown:g,receiverUsername:e,receiverUsernameError:t,isReceiverUsernameInvalid:Boolean(t),usernameAccounts:f,searchQueryIsAddress:a};return Re.default.createElement(Vo.Provider,{value:w},r)}function Mo(){return(0,Re.useContext)(Vo)}i();var Me=h(require("react"));var pr=(0,Me.createContext)({});function lr({children:r}){let e=H(),t=q(),n=ye(),o=go(),a=Ue(),s=ho(),p=Xe(),f=Mo();return Me.default.createElement(pr.Provider,{value:{accountInfo:e,formInfo:t,tokensInfo:n,gasInfo:a,dataFieldInfo:s,receiverInfo:p,receiverUsernameInfo:f,amountInfo:o}},r)}function Ha(){return(0,Me.useContext)(pr)}function Xa({accountInfo:r,formInfo:e,tokensInfo:t,networkConfig:n,children:o,Loader:a,initGasLimitError:s}){let[p,f]=(0,W.useState)();function d(){return v(this,null,function*(){let T=!n.skipFetchFromServer,{chainId:g}=n,x=Fe(g),y=_o.fallbackNetworkConfigurations[x]||{};if(T){let w=yield tt(g);if(w){let b=I(I(I({},y),w),n);nt(b),f(b);return}}let E=I(I({},y),n);nt(E),f(E)})}return(0,W.useEffect)(()=>{d()},[n]),p?W.default.createElement(Kt,{value:{networkConfig:p}},W.default.createElement(Bt,{value:r},W.default.createElement(Ot,{value:e},W.default.createElement(Ht,{value:t},W.default.createElement(sr,null,W.default.createElement(Ro,null,W.default.createElement(ao,{initGasLimitError:s},W.default.createElement(yo,null,W.default.createElement(fo,null,W.default.createElement(lr,null,o)))))))))):a!=null?W.default.createElement(a,null):null}0&&(module.exports={AccountContext,AccountContextProvider,AppInfoContextProvider,FormContext,FormContextProvider,NetworkContext,NetworkContextProvider,ReceiverContext,ReceiverContextProvider,SendFormContext,SendFormContextProvider,TokensContext,TokensContextProvider,useAccountContext,useFetchKnownAddresses,useFormContext,useNetworkConfigContext,useReceiverContext,useScamError,useSendFormContext,useTokensContext,useVerifyScamAddress});
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.js.map
