import{b as O}from"./chunk-FAKDNIGG.js";import{c as D}from"./chunk-DRZU3YBL.js";import{c as _}from"./chunk-W22JQH3P.js";import{a as U}from"./chunk-ISL7WVLN.js";import{a as S}from"./chunk-C4PJGKWQ.js";import{a as N}from"./chunk-AFIL4RBA.js";import{a as k}from"./chunk-G2KE7XO3.js";import{a as b}from"./chunk-EPSD43SA.js";import{a as M}from"./chunk-TV3MKOOM.js";import{d as A}from"./chunk-Y7MEMM4P.js";import{a as p}from"./chunk-HVGTS3FD.js";import{h as u}from"./chunk-VMXC44RX.js";import{i as B}from"./chunk-SVQK3TVL.js";B();import mt,{useCallback as s,createContext as ct,useContext as gt,useEffect as Y,useMemo as dt}from"react";import{GAS_PER_DATA_BYTE as lt,GAS_PRICE_MODIFIER as Gt}from"@terradharitri/sdk-dapp/constants/index";import{calculateFeeLimit as ut}from"@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit";import{stringIsFloat as pt}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import{stringIsInteger as Z}from"@terradharitri/sdk-dapp/utils/validation/stringIsInteger";import ft from"bignumber.js";import{useFormikContext as Lt}from"formik";var j=ct({});function jt({children:q,initGasLimitError:z}){let f=Lt(),{values:L,touched:o,errors:{gasPrice:P,gasLimit:C},setFieldValue:n,setFieldTouched:v,initialValues:h}=f,{gasPrice:m,gasLimit:i,data:c,tokenId:H,txType:E,isGuarded:l,receiver:J,amount:K}=L,Q=k(l),{checkInvalid:x,isNftTransaction:g,isDcdtTransaction:W,prefilledForm:d,isRewaTransaction:I}=_(),{networkConfig:{chainId:y}}=D(),{gasCostLoading:X,gasCostError:$}=O(z),T=U({isNftTransaction:g,isDcdtTransaction:W,data:c,isGuarded:l}),V=!M({values:L,errors:f.errors,touched:o})&&x("gasLimit"),w=x("gasPrice"),tt=s((t,r=!1)=>{var e;let a=typeof t=="string"?t:(e=t==null?void 0:t.target)==null?void 0:e.value;n("gasPrice",a,r)},[]),G=s((t,r=!1)=>{var e;let a=typeof t=="string"?t:(e=t==null?void 0:t.target)==null?void 0:e.value;n("gasLimit",a,r)},[]),it=s(()=>{n("gasPrice",S)},[]),et=s(()=>{n("gasLimit",T)},[g]),st=s(()=>{v("gasPrice",!0)},[]),ot=s(()=>{v("gasLimit",!0)},[]),F=Boolean(P)||Boolean(C),rt=dt(()=>{let t=!Z(i),r=!pt(m);if(t||r)return u;let a=p({initialValues:h,gasLimit:i,touched:o}),nt=!d&&!a&&I?c.trim():"",R=ut({gasLimit:i,gasPrice:A(m),data:nt,chainId:y,gasPerDataByte:String(lt),gasPriceModifier:String(Gt)});return Z(R)?R:u},[F,m,i,y,d,I,o.gasLimit,c,J,K]);Y(()=>{let t=p({initialValues:h,gasLimit:i,touched:o});!d&&g&&!t&&G(new ft(b()).plus(Q).toString())},[g,o]),Y(()=>{d||G(N({txType:E,data:c,isGuarded:l}),!0)},[H,E]);let at={gasPrice:m,gasLimit:i,gasCostLoading:X,feeLimit:rt,defaultGasLimit:T,gasPriceError:P,gasLimitError:C,gasCostError:$,hasErrors:F,isGasLimitInvalid:V,isGasPriceInvalid:w,onChangeGasLimit:G,onChangeGasPrice:tt,onBlurGasPrice:st,onBlurGasLimit:ot,onResetGasPrice:it,onResetGasLimit:et};return mt.createElement(j.Provider,{value:at},q)}function qt(){return gt(j)}export{j as a,jt as b,qt as c};
//# sourceMappingURL=chunk-CVZLP3HR.js.map
