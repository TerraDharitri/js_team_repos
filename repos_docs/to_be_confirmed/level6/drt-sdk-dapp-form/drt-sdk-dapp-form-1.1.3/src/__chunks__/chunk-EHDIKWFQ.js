import{a as v}from"./chunk-P6HYXFFX.js";import{a as S}from"./chunk-GE7CTJBA.js";import{c as N}from"./chunk-DRZU3YBL.js";import{c as F}from"./chunk-W22JQH3P.js";import{a as w}from"./chunk-JSOSCN4V.js";import{a as h}from"./chunk-5I5B5RVZ.js";import{c as b}from"./chunk-LQFLWU3Q.js";import{f as E}from"./chunk-7VOG2AES.js";import{a as P,b as C,g as f,i as I}from"./chunk-SVQK3TVL.js";I();import O,{useCallback as L,useContext as Q,useEffect as D,useMemo as W,useRef as Y,useState as Z,createContext as _}from"react";import{useFormikContext as $}from"formik";import ee from"lodash/uniqBy";var M=_({}),A="tokenId",p="nft",te="tokens",ne="txType",u=[];function Ie({children:R,value:n}){let[X,m]=Z(!0),{values:{tokenId:o,tokens:s,nft:l},errors:{tokenId:G},setFieldValue:r}=$(),{address:g,balance:J}=b(),{checkInvalid:V}=F(),{networkConfig:{decimals:z}}=N(),c=Y(!1),{rewaPriceInUsd:y,digits:U,rewaLabel:T}=v(),k=s||u,x=L((e=!0)=>f(this,null,function*(){if(m(e),c.current)return;c.current=!0;let a=yield E(g),t=s!=null?s:[],d=ee([...t,...a],K=>K.identifier);r(te,d),u=d,c.current=!1,m(!1)}),[g]),q=L(e=>{r(A,e,!1)},[]);D(()=>(x(!1),()=>{u=[]}),[]);let B=()=>f(this,null,function*(){let e=w({nft:l,tokenId:o});if(r(ne,e),e==="SemiFungibleDCDT"||e==="NonFungibleDCDT")return;let a=(i==null?void 0:i.find(t=>t.identifier===o))||l;if(e==="MetaDCDT"&&a){let t=a;r(p,t);let d=yield S(t);t=C(P({},t),{allowedReceivers:d}),r(p,t)}else r(p,void 0)}),j=V(A),i=[{name:"DharitrI eGold",identifier:T,balance:J,decimals:Number(z),ticker:T,usdPrice:y},...k];D(()=>{B()},[o]);let H=W(()=>h({tokens:i||[],tokenId:o}),[o,s]);return O.createElement(M.Provider,{value:{nft:l||(n==null?void 0:n.initialNft),tokens:k,allAvailableTokens:i,areTokensLoading:X&&k.length===0,tokenIdError:G,tokenId:o,tokenDetails:H,rewaLabel:T,RewaIcon:n==null?void 0:n.RewaIcon,rewaPriceInUsd:y,digits:U,isTokenIdInvalid:j,getTokens:x,onChangeTokenId:q}},R)}function Ee(){return Q(M)}export{M as a,Ie as b,Ee as c};
//# sourceMappingURL=chunk-EHDIKWFQ.js.map
