import{a as q}from"./chunk-42ZNKTTY.js";import{a as j}from"./chunk-DR7LZP42.js";import{a as G}from"./chunk-FSQY7PXI.js";import{a as W}from"./chunk-M76GUD7W.js";import{a as B}from"./chunk-M5JNVMWV.js";import{a as L}from"./chunk-UWJOB5BE.js";import{a as w}from"./chunk-PGRGVIEB.js";import{a as b}from"./chunk-JAFPFCVM.js";import{a as R}from"./chunk-5DAXBIME.js";import{a as U}from"./chunk-QD7FZ64B.js";import{a as F}from"./chunk-RTP27SPH.js";import{a as x}from"./chunk-SKD4AEJ2.js";import{a as f}from"./chunk-BS7544I4.js";import{a as D}from"./chunk-NE7BNGVU.js";import{a as A}from"./chunk-TY2EH5WY.js";import{b as s}from"./chunk-UN52NNL6.js";import{c as N}from"./chunk-R5VT33NT.js";import{c as M}from"./chunk-KAYKGLLS.js";import{a as S}from"./chunk-YTIFEKCD.js";import{b as t}from"./chunk-Z2Q55TPK.js";import{i as y}from"./chunk-SVQK3TVL.js";y();import n,{useState as H,useEffect as de,useCallback as P,useMemo as k,useRef as fe}from"react";import{faCheck as ve,faExclamationTriangle as Ie}from"@fortawesome/free-solid-svg-icons";import{FontAwesomeIcon as z}from"@fortawesome/react-fontawesome";import v from"classnames";import{useFormikContext as ge}from"formik";import Ce from"react-select";var Qe=J=>{let m=fe(null),{className:K}=J,{setFieldValue:i}=ge(),{receiverInfo:{scamError:c,fetchingScamAddress:Q,receiverInputValue:p,setReceiverInputValue:u,knownAddresses:r,receiver:o,onBlurReceiver:X,onChangeReceiver:Y},receiverUsernameInfo:{receiverUsername:Z},formInfo:{readonly:_}}=N(),[I,g]=H(!1),[$,d]=H(o?{label:o,value:o}:null),{receiverErrorDataTestId:ee,error:re}=j(),{isAddressError:ne,isUsernameError:oe,isRequiredError:se,isReceiverDropdownOpened:te}=q({menuIsOpen:I}),{usernameAccounts:a,isUsernameLoading:ie}=M(),C=()=>{X(new Event("blur"));let e=r==null?void 0:r.find(l=>l.username===p&&l.address===o);e&&(i("receiver",e.address),i("receiverUsername",e.username),i("rawReceiverUsername",e.rawUsername))},O=r==null?void 0:r.find(e=>e.username===p&&e.address===o),ae=k(()=>f(r),[r]),h=O?f([O]):ae,E=F({setFieldValue:i,setInputValue:u,setOption:d,options:h,knownAddresses:r!=null?r:[],usernameAccounts:a}),le=P(U({setAllValues:E,setOption:d}),[]),me=P(e=>{Y(e?e.trim():""),setTimeout(C)},[]),ce=D({changeAndBlurInput:me,setOption:d,setInputValue:u}),pe=k(()=>A(m),[m]);de(()=>{if(!o)return;let e=Object.keys(a).find(l=>{var T;return((T=a[l])==null?void 0:T.address)===o});E(e!=null?e:o),e&&u(e)},[a,o]);let V=ne||oe||se,ue=V&&!I;return n.createElement("div",{className:v(s.receiver,K)},n.createElement("div",{className:t.label,"data-testid":"receiverLabel","data-loading":Q},"Receiver"),n.createElement(Ce,{value:$,onInputChange:le,inputId:"receiverWrapper",maxMenuHeight:160,openMenuOnFocus:!0,isDisabled:S("receiver",_),options:h,filterOption:x,noOptionsMessage:()=>null,onChange:ce,onBlur:C,isMulti:!1,ref:m,inputValue:p,onMenuClose:()=>g(!1),onMenuOpen:()=>g(!0),components:{Menu:B,Input:pe,Control:b,ValueContainer:W,DropdownIndicator:R,SelectContainer:G,MenuList:L,Option:w,Placeholder:()=>null,SingleValue:()=>null,IndicatorSeparator:()=>null,LoadingIndicator:()=>null},className:v(s.receiverSelectContainer,{[s.opened]:te,[s.invalid]:V||c})}),ue&&n.createElement("div",{"data-testid":ee,className:t.error},re),ie&&n.createElement("div",{className:s.loading},"Loading..."),Z&&n.createElement("span",{className:s.found,"data-testid":"receiverUsernameAddress"},"Account found!"," ",n.createElement(z,{icon:ve,className:s.foundIcon})),c&&n.createElement("div",{"data-testid":"receiverScam",className:v(t.error,t.scam)},n.createElement("span",null,n.createElement(z,{icon:Ie}),n.createElement("small",null,c))))};export{Qe as a};
//# sourceMappingURL=chunk-JWNVNXNO.js.map
