import{a as W}from"./chunk-ULVDPH3L.js";import{a as G}from"./chunk-I5W3CRR7.js";import{a as O}from"./chunk-AAQHX5NX.js";import{b as s}from"./chunk-U3IHTZXB.js";import{a as D}from"./chunk-IS37ABQH.js";import{a as N}from"./chunk-JWNVNXNO.js";import{a as w}from"./chunk-NEDXXFMF.js";import{a as P}from"./chunk-YVSPKTRV.js";import{a as A}from"./chunk-QO5UV6S4.js";import{a as V}from"./chunk-BKI3YF2D.js";import{a as B}from"./chunk-6RN74R5E.js";import{a as x}from"./chunk-YBCXFO3D.js";import{c as I}from"./chunk-R5VT33NT.js";import{a as E}from"./chunk-VEHNL3AP.js";import{a as h}from"./chunk-2HZRMJEK.js";import{b as u}from"./chunk-Z2Q55TPK.js";import{a as r,g as p,i as k}from"./chunk-SVQK3TVL.js";k();import n,{useEffect as f,useState as sn}from"react";import{TransactionOptions as an,TransactionVersion as mn}from"@terradharitri/sdk-core/out";import cn from"classnames";import{useFormikContext as dn}from"formik";var Wn=({className:T,GuardianScreen:i})=>{let{formInfo:L,accountInfo:S,amountInfo:M,tokensInfo:y}=I(),{values:a}=dn(),{txType:m,tokenId:H,address:g,balance:J,chainId:K,ledger:X}=a,{nft:F}=y,[o,c]=sn(),{amountRange:j,onSetAmountPercentage:q}=M,{renderKey:z,onValidateForm:C,onInvalidateForm:Q,onCloseForm:U,onSubmitForm:Y,onPreviewClick:Z,areValidatedValuesReady:d,isGuardianScreenVisible:_,uiOptions:l,readonly:$,setGuardedTransaction:R,setHasGuardianScreen:nn}=L,en=()=>p(void 0,null,function*(){if(!d)return;let e=yield h(a);try{let t=yield E({address:g,balance:J,chainId:K,nonce:S.nonce,values:e});t.setVersion(mn.withTxOptions());let rn=r({guarded:!0},X?{hashSign:!0}:{});t.setOptions(an.withOptions(rn)),c({0:t})}catch(t){c({})}});f(()=>{en()},[a,d]),f(()=>{nn(Boolean(i))},[]),f(()=>{if(!o)return;let e=o[0];e&&R(e)},[o]);let on=e=>{e.preventDefault(),U()},b=m==="NonFungibleDCDT",v=m==="SemiFungibleDCDT",tn={onSignTransaction:()=>p(void 0,null,function*(){setTimeout(()=>{Y()})}),onPrev:Q,address:g,title:"",className:T,signedTransactions:o,setSignedTransactions:c,signStepInnerClasses:{}};return i&&_?n.createElement(i,r({},tn)):d?n.createElement(V,{providerType:S.providerType}):n.createElement("form",{key:z,onSubmit:C,className:cn(s.form,T)},n.createElement("fieldset",{className:s.formFieldset},(b||v)&&F&&n.createElement(x,r({onClick:Z,txType:m},F)),n.createElement(N,null),v?n.createElement(D,null):n.createElement(B,null),(l==null?void 0:l.showAmountSlider)&&!b&&n.createElement(A,{onPercentageChange:q,percentageValue:j,disabled:Boolean($)}),n.createElement(W,{tokenId:H}),n.createElement(G,null),n.createElement(w,null),n.createElement(P,null)),n.createElement("div",{className:s.formButtons},n.createElement("button",{type:"button",id:"sendBtn","data-testid":"sendBtn",onClick:C,className:u.buttonSend},"Send ",O(y)),n.createElement("button",{type:"button",id:"closeButton","data-testid":"returnToWalletBtn",onClick:on,className:u.buttonText},"Cancel")))};export{Wn as a};
//# sourceMappingURL=chunk-VJIPVDQN.js.map
