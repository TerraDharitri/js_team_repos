import{a as B}from"./chunk-BES6TWAC.js";import{a as G}from"./chunk-GG46MDT3.js";import{a as O}from"./chunk-G2KE7XO3.js";import{a as U}from"./chunk-EPSD43SA.js";import{a as _}from"./chunk-YMZPOD2P.js";import{a as A}from"./chunk-K2TVXLEN.js";import{b as C,c as M,h as p}from"./chunk-VMXC44RX.js";import{a as N,b as P,g as L,i as e}from"./chunk-SVQK3TVL.js";e();import z from"bignumber.js";e();e();import{GAS_LIMIT as Z}from"@terradharitri/sdk-dapp/constants/index";import{isContract as K}from"@terradharitri/sdk-dapp/utils/smartContracts";import{getIdentifierType as q}from"@terradharitri/sdk-dapp/utils/validation/getIdentifierType";import m from"bignumber.js";var ot=V=>L(void 0,[V],function*({computedTokenId:d,receiver:s,isInternal:l,balance:T,address:a,isGuarded:f,nonce:R,amount:x,data:c,gasLimit:o,gasPrice:g,delegationContractData:i,chainId:w}){var y;let t=O(f),I=i==null?void 0:i.delegationContract,r=(y=i==null?void 0:i.delegationContractData.minGasLimit)!=null?y:p;if(!new m(o).isNaN()&&new m(o).isGreaterThan(p))return{initGasLimit:o};if(K(s)&&!l){let{gasLimit:n,gasLimitCostError:u}=yield k({balance:T,address:a,nonce:R,values:{amount:x,receiver:s,data:c,gasLimit:o,gasPrice:g},chainId:w});return{initGasLimit:s===I?new m(n).plus(r).plus(t).toString():n,initGasLimitError:u}}if(c.length>0)return{initGasLimit:G({data:c.trim(),isGuarded:f})};let{isDcdt:h,isNft:b}=q(d);return h?{initGasLimit:new m(M).plus(t).toString()}:b?{initGasLimit:new m(U()).plus(t).toString()}:{initGasLimit:new m(Z).plus(t).toString()}});var H=R=>L(void 0,[R],function*({balance:d,address:s,isGuarded:l,nonce:T,values:a,chainId:f}){var n,u,S;let{amount:x,receiver:c,data:o,gasLimit:g,gasPrice:i}=a,V=_({balance:d,amount:String(x),gasLimit:String(g),gasPrice:B(i),data:o.trim(),receiver:c,sender:s,nonce:T,chainId:f}).toPlainObject(),{data:t,success:I}=yield A(P(N({},V),{sender:s})),r=Number((n=t==null?void 0:t.data)==null?void 0:n.txGasUnits),E=(u=t==null?void 0:t.data)==null?void 0:u.returnMessage;if(!Boolean(I&&(t==null?void 0:t.code)==="successful"&&r&&r!==0))return{gasLimit:g,gasLimitCostError:(S=t==null?void 0:t.data)==null?void 0:S.returnMessage};if(!E)return{gasLimit:new z(r).times(C).dividedToIntegerBy(100).plus(r).toString(10)};let b=G({data:a.data?a.data.trim():"",isGuarded:l});return{gasLimit:String(r)===p?b:String(r)}}),k=H;export{H as a,k as b,ot as c};
//# sourceMappingURL=chunk-QHMB2Z6Q.js.map
