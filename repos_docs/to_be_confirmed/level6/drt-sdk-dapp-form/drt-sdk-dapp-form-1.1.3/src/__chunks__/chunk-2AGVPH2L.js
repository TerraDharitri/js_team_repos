import{a as g}from"./chunk-Q4AAP2JD.js";import{b as f}from"./chunk-H7VQ5EXK.js";import{a as r,b as T,g as m,i as x}from"./chunk-SVQK3TVL.js";x();import{newTransaction as y}from"@terradharitri/sdk-dapp/models/newTransaction";import{getTokenFromData as k}from"@terradharitri/sdk-dapp/utils/transactions/getTokenFromData";import{parseMultiDcdtTransferData as h}from"@terradharitri/sdk-dapp/utils/transactions/parseMultiDcdtTransferData";function I(s){let{transaction:e,transactionIndex:o,trx:a}=s;return{newTx:T(r({},e),{transaction:y(e),multiTxData:a.data,transactionIndex:o}),txsData:{[a.data]:{tokenId:a.token||"",amount:a.amount||"",type:a.type,nonce:a.nonce||"",multiTxData:a.data,receiver:a.receiver}}}}function S(s){let{extractedTxs:e,address:o,chainId:a}=s,n={},l=[];return e.forEach((p,d)=>{let t=f({address:o,tx:p}),u=h(t.data);if(u.length>0)u.forEach(c=>{let{newTx:i,txsData:D}=I({trx:c,transaction:t,transactionIndex:d});n=r(r({},n),D),l.push(i)});else{let{tokenId:c,amount:i}=k(t.data);c&&t.data&&(n=T(r({},n),{[t.data]:{tokenId:c,amount:i,receiver:t.receiver}})),l.push(T(r({},t),{transactionIndex:d,transaction:y(T(r({},t),{chainID:a}))}))}}),{allTransactions:l,txsDataTokens:n}}function E(s){return m(this,null,function*(){let{address:e,rewaLabel:o,balance:a,chainId:n,apiConfig:l,allTransactions:p,txsDataTokens:d}=s,t={},u=p.map(i=>g({tx:i,txsDataTokens:d,address:e,rewaLabel:o,balance:a,chainId:n,apiConfig:l})),c=yield Promise.all(u);for(let i of c)t=r(r({},t),i);return t})}function A(s){return m(this,null,function*(){let{extractedTxs:e}=s;if(e&&e.length>0){let{allTransactions:o,txsDataTokens:a}=S(s),n=yield E(T(r({},s),{allTransactions:o,txsDataTokens:a}));return{txsDataTokens:a,errors:n,parsedTransactions:o}}return null})}export{A as a};
//# sourceMappingURL=chunk-2AGVPH2L.js.map
