import{a as M,b as y,e as q,f as Z,g as k,h as Y,i as j}from"./chunk-RU4WZGQA.js";import{d as v}from"./chunk-NRR4ZHNF.js";import{d as $}from"./chunk-IO4ZZN6V.js";import{a as W,c as U}from"./chunk-RNM37DYC.js";import{a as P,c as N,h as I}from"./chunk-AWV4CCGJ.js";import{i as u}from"./chunk-P4IVSQC4.js";import{f as l}from"./chunk-JH2LJGTQ.js";l();u();var jr=({shouldValidateForm:r,errors:o,touched:m})=>d=>Boolean(o[d]&&(m[d]||r));l();import{GAS_PER_DATA_BYTE as cr,GAS_PRICE_MODIFIER as pr}from"@terradharitri/sdk-dapp/constants/index";import{calculateFeeLimit as fr}from"@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit";import O from"bignumber.js";u();var T=({amount:r,balance:o,gasPrice:m,gasLimit:d,data:i,chainId:a})=>{let e=v(r.toString()),t=new O(e),n=new O(o),s=new O(fr({gasPrice:Z(m),gasLimit:d,data:i,chainId:a,gasPerDataByte:String(cr),gasPriceModifier:String(pr)}));return n.isGreaterThanOrEqualTo(t.plus(s))};l();l();l();import{DECIMALS as gr}from"@terradharitri/sdk-dapp/constants/index";import{maxDecimals as hr}from"@terradharitri/sdk-dapp/utils/validation/maxDecimals";import{stringIsFloat as Tr}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import S from"bignumber.js";import{string as D}from"yup";u();var Ir=r=>{let o=D().required(r.required),m=D().test("decimalFormat",r.maxDecimalsAllowed(gr),e=>hr(String(e))),d=D().test("minimum",r.tooLowGasPrice(M),e=>{let t=new S(String(e)),n=new S(M),s=e&&t.isGreaterThanOrEqualTo(n);return Boolean(s)}),i=D().test("maximum",r.tooHighGasPrice(y),e=>{let t=new S(String(e)),n=new S(y),s=e&&t.isLessThanOrEqualTo(n);return Boolean(s)}),a=D().test("isValidNumber",r.invalidNumber,e=>Boolean(e&&Tr(e)));return[o,m,d,i,a].reduce((e,t)=>e.concat(t),D())},z=Ir;l();import{maxDecimals as vr}from"@terradharitri/sdk-dapp/utils/validation/maxDecimals";import{stringIsFloat as Dr}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import{stringIsInteger as br}from"@terradharitri/sdk-dapp/utils/validation/stringIsInteger";import B from"bignumber.js";import{string as b}from"yup";u();var wr=r=>{let o=b().required(r.required),m=b().test({name:"formatDecimals",test:function(e){let{nft:t,txType:n}=this.parent;return n!=="MetaDCDT"||vr(String(e),t==null?void 0:t.decimals)?!0:this.createError({message:r.maxDecimalsAllowed(t==null?void 0:t.decimals),path:"amount"})}}),d=b().test("balance",r.insufficientFunds,function(e){let{txType:t,nft:n}=this.parent;if(!e)return!0;if(t==="MetaDCDT"){let s=v(e,n==null?void 0:n.decimals),c=new B(s);return new B((n==null?void 0:n.balance)||I).isGreaterThanOrEqualTo(c)}if(t==="SemiFungibleDCDT"){let s=new B(e);return new B((n==null?void 0:n.balance)||I).isGreaterThanOrEqualTo(s)}return!0}),i=b().test("nonZero",r.cannotBeZero,function(e){let t=this.parent,{ignoreTokenBalance:n}=t;return!e||n?!0:!new B(e).isZero()}),a=b().test("isValidNumber",r.invalidNumber,function(e){let{nft:t}=this.parent;return(t==null?void 0:t.type)===W.MetaDCDT?Boolean(e&&Dr(e)):Boolean(e&&br(e))});return[o,a,d,m,i].reduce((e,t)=>e.concat(t),b())},J=wr;l();l();import{stringIsInteger as xr}from"@terradharitri/sdk-dapp/utils/validation/stringIsInteger";import K from"bignumber.js";import{string as _}from"yup";u();var w=r=>{let o=_().required(r.required),m=_().test("isValidInteger",r.invalidNumber,i=>{let a=i&&xr(i);return Boolean(a)}),d=_().test("maximum",r.tooHighGasLimit(P),i=>{let a=new K(String(i)),e=new K(P),t=i&&e.comparedTo(a)>=0;return Boolean(t)});return[o,m,d]};import Q from"bignumber.js";import{string as A}from"yup";u();var Er=r=>{let o=A().required(r.required),m=A().test({name:"minValueData",test:function(i){let a=this.parent,{data:e,ignoreTokenBalance:t,isGuarded:n}=a;if(t)return!0;let s=j(e?e.trim():"");if(i){let c=new Q(i),h=new Q(s).plus(k(n));if(!(i&&c.isGreaterThanOrEqualTo(h)))return this.createError({message:r.tooLowGasLimit(h.toString()),path:"gasLimit"})}return!0}}),d=A().test("funds",r.insufficientFunds,function(i){let{data:a,gasPrice:e,balance:t,chainId:n,ignoreTokenBalance:s}=this.parent;return i&&!s?T({amount:I,balance:t,gasLimit:i,gasPrice:e,data:a,chainId:n}):!0});return[o,...w(r),d,m].reduce((i,a)=>i.concat(a),A())},X=Er;l();import{addressIsValid as Br}from"@terradharitri/sdk-dapp/utils/account/addressIsValid";import{string as G}from"yup";u();var Gr=r=>{let o=G().required(r.required),m=G().test("addressIsValid",r.invalidAddress,a=>Boolean(a&&Br(a))),d=G().test("sameAddress",r.sameAsOwnerAddress,function(a){let{ignoreTokenBalance:e,txType:t,readonly:n,address:s,isBurn:c}=this.parent;return $(t)&&!e&&!n&&!c?s!==a:!0}),i=G().test("canTransfer",r.receiverNotAllowed,function(a){let{nft:e,txType:t,ignoreTokenBalance:n,address:s}=this.parent,c=t==="MetaDCDT",h=n,E=e==null?void 0:e.allowedReceivers;return!a||!c||h||E==null||E.includes(s)?!0:E.includes(a)});return[o,m,d,i].reduce((a,e)=>a.concat(e),G())},rr=Gr;l();import{addressIsValid as Lr}from"@terradharitri/sdk-dapp/utils/account/addressIsValid";import{string as er}from"yup";u();var qr=r=>[er().test("invalidHerotag",r.invalidHerotag,function(o){let{receiver:m}=this.parent;if((m==null?void 0:m.startsWith("drt1"))||!o&&!m)return!0;let d=o&&Lr(m);return Boolean(d)})].reduce((o,m)=>o.concat(m),er()),tr=qr;l();import{LEDGER_HASH_SIGN_MINIMUM_VERSION as kr,LEDGER_WITH_GUARDIANS_MINIMUM_VERSION as Sr}from"@terradharitri/sdk-dapp/constants/ledger.constants";import Ar from"@terradharitri/sdk-dapp/utils/operations/ledger/getLedgerVersionOptions";import{string as R}from"yup";u();var Fr=R().test("ledgerDataActive","Data option is disabled in the Ledger DharitrI app",function(r){let{ledger:o}=this.parent;return!(o&&r&&r.length&&!o.ledgerDataActive)}),Vr=R().test({name:"hashSign",test:function(r){let{ledger:o,isGuarded:m}=this.parent;if(o){let{ledgerWithHashSign:d,ledgerWithGuardians:i}=Ar(o.version);if(r&&r.length>300&&!d)return this.createError({message:`Data too long. You need at least DharitrI app version ${kr}. Update DharitrI app to continue`,path:"data"});if(m&&!i)return this.createError({message:`You need at least DharitrI app version ${Sr} to use Guardians`,path:"data"})}return!0}}),Pr=[Fr,Vr],Nr=Pr.reduce((r,o)=>r.concat(o),R()),ar=Nr;l();import{DECIMALS as Mr}from"@terradharitri/sdk-dapp/constants/index";import{maxDecimals as yr}from"@terradharitri/sdk-dapp/utils/validation/maxDecimals";import{stringIsFloat as ir}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import{string as L}from"yup";u();var Or=r=>{let o=L().required(r.required),m=L().test("decimalFormat",r.maxDecimalsAllowed(Mr),a=>yr(String(a))),d=L().test("funds",r.insufficientFunds,function(a){if(a&&ir(a)){let{gasLimit:e,data:t,gasPrice:n,balance:s,chainId:c}=this.parent;return T({amount:a,balance:s,gasLimit:e,gasPrice:n,data:t,chainId:c})}return!0}),i=L().test("isValidNumber",r.invalidNumber,a=>Boolean(a&&ir(a)));return[o,i,m,d].reduce((a,e)=>a.concat(e),L())},or=Or;l();import{stringIsFloat as _r}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import nr from"bignumber.js";import{string as F}from"yup";u();var Rr=r=>{let o=F().required(r.required),m=F().test("funds",r.insufficientFunds,function(i){let{data:a,gasPrice:e,amount:t,balance:n,chainId:s,ignoreTokenBalance:c}=this.parent;return c?!0:t&&_r(t)&&i!=null?T({amount:t,balance:n,gasLimit:i,gasPrice:e,data:a,chainId:s}):!0}),d=F().test({name:"minValueData",test:function(i){let a=this.parent,{data:e,ignoreTokenBalance:t,isGuarded:n}=a;if(t)return!0;let s=Y({data:e?e.trim():"",isGuarded:n});if(i){let c=new nr(i),h=new nr(s);if(!(i&&c.isGreaterThanOrEqualTo(h)))return this.createError({message:r.tooLowGasLimit(s),path:"gasLimit"})}return!0}});return[o,...w(r),m,d].reduce((i,a)=>i.concat(a),F())},sr=Rr;l();import{maxDecimals as Cr}from"@terradharitri/sdk-dapp/utils/validation/maxDecimals";import{stringIsFloat as Hr}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import C from"bignumber.js";import{string as x}from"yup";u();var Wr=r=>{let o=x().required(r.required),m=x().test({name:"decimalFormat",test:function(e){let{tokenId:t,tokens:n}=this.parent;if(n){let{decimals:s}=q({tokens:n,tokenId:t});return Cr(String(e),s)?!0:this.createError({message:r.maxDecimalsAllowed(s),path:"amount"})}return!0}}),d=x().test("tokenBalance",r.insufficientFunds,function(e){let{ignoreTokenBalance:t,tokens:n}=this.parent;if(e!==void 0&&!t&&n){let{decimals:s,balance:c}=q({tokens:n,tokenId:this.parent.tokenId}),h=v(e.toString(),s),E=new C(h);return new C(c).comparedTo(E)>=0}return!0}),i=x().test("greaterThanZero",r.cannotBeZero,function(e){let{tokens:t,ignoreTokenBalance:n}=this.parent;if(!n&&e!=null&&t){let{decimals:s}=q({tokens:t,tokenId:this.parent.tokenId}),c=v(e.toString(),s);return new C(c).isGreaterThan(0)}return!0}),a=x().test("isValidNumber",r.invalidNumber,e=>Boolean(e&&Hr(e)));return[o,m,d,i,a].reduce((e,t)=>e.concat(t),x())},mr=Wr;l();import lr from"bignumber.js";import{string as V}from"yup";u();var Ur=r=>{let o=V().required(r.required),m=V().test("minValue",r.tooLowGasLimit(N),function(i){let a=this.parent,{ignoreTokenBalance:e,isGuarded:t}=a;if(e)return!0;let n=new lr(i),s=new lr(N).plus(k(t));return i&&n.isGreaterThanOrEqualTo(s)}),d=V().test("funds",r.insufficientFunds,function(i){let{data:a,gasPrice:e,ignoreTokenBalance:t,balance:n,chainId:s}=this.parent;return i&&!t?T({amount:I,balance:n,gasLimit:i,gasPrice:e,data:a,chainId:s}):!0});return[o,...w(r),d,m].reduce((i,a)=>i.concat(a),V())},ur=Ur;import{object as Zr,string as H}from"yup";u();var dr=r=>Zr().shape({receiver:rr(r),receiverUsername:tr(r),tokenId:H().required(r.required),gasPrice:z(r),data:ar,amount:H().when(["txType"],function(o){switch(o){case"DCDT":return mr(r);case"REWA":return or(r);default:return J(r)}}),gasLimit:H().when(["txType"],function(o){switch(o){case"DCDT":return ur(r);case"REWA":return sr(r);default:return X(r)}})});u();var Ct=({prefilledForm:r,initialValues:o,errorMessages:m})=>{if(!r||!o)return{};try{return dr(m).validateSync(o),{}}catch(d){let{path:i,message:a}=d;return{[String(i)]:a}}};l();u();var Zt=r=>Object.values(U).some(o=>r.startsWith(o));export{jr as a,T as b,dr as c,Ct as d,Zt as e};
//# sourceMappingURL=chunk-GVST6G3Q.js.map
