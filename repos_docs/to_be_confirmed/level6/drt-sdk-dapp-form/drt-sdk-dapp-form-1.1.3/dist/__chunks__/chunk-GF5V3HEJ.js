import{a as S}from"./chunk-K2ANZTWJ.js";import{b}from"./chunk-E43X7VZ4.js";import{a as h,b as p,g as f,i as o}from"./chunk-BL7T5FXS.js";import{f as a}from"./chunk-RGFNPOTZ.js";a();a();a();import T from"axios";o();function k(i,e){return f(this,null,function*(){try{let{data:n}=yield T.get(`${e}/accounts/${i}`);if(n!=null)return n}catch(n){console.error("error fetching numbat account")}return null})}import{useState as w}from"react";import{trimUsernameDomain as x}from"@terradharitri/sdk-dapp/hooks/account/helpers/trimUsernameDomain";o();var g={};function B(i){let[e,n]=w(!1),[m,l]=w(g);return{usernameAccounts:m,fetchUsernameAccount:s=>f(this,null,function*(){if(!(s in m||e)){n(!0);try{let r=yield S(s,i),t=r==null?void 0:r.username;l(d=>{var u;let c=p(h({},d),{[s]:{address:(u=r==null?void 0:r.address)!=null?u:"",username:t?String(x(t)):"",rawUsername:t!=null?t:""}});return g=c,c})}catch(r){l(t=>p(h({},t),{[s]:null}))}n(!1)}}),fetchUsernameByAddress:s=>f(this,null,function*(){if(!(Object.values(m).find(r=>r&&r.address===s)||e)){n(!0);try{let r=i||(yield b()),t=yield k(s,r.baseURL),d=t==null?void 0:t.address,u=t==null?void 0:t.username,c=x(u);if(!d||!c)return;l(L=>{let v=p(h({},L),{[c]:{address:d,username:String(c),rawUsername:u!=null?u:""}});return g=v,v})}catch(r){console.error(r)}n(!1)}}),fetchingUsernameAccount:e}}import{useEffect as $}from"react";import{addressIsValid as j}from"@terradharitri/sdk-dapp/utils";o();var K=({shouldSkipSearch:i=!1,searchPatternToLookFor:e})=>{let{fetchUsernameAccount:n,fetchUsernameByAddress:m,fetchingUsernameAccount:l,usernameAccounts:s}=B(),r=j(e);return $(()=>{if(!(!e||i)){if(r){m(e);return}n(e)}},[e,r]),{fetchingUsernameAccount:l,usernameAccounts:s}};a();o();export{K as a};
//# sourceMappingURL=chunk-GF5V3HEJ.js.map
