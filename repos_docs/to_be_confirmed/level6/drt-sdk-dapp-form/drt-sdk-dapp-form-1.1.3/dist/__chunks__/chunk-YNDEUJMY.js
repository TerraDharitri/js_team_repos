import{b as E}from"./chunk-TPFP64W5.js";import{j as q,n as G}from"./chunk-MEB4XTPU.js";import{b}from"./chunk-FEKYKXOC.js";import{b as N,c as F,f as P}from"./chunk-FUSY7N5I.js";import{a as w}from"./chunk-H5PSEE4B.js";import{a as L}from"./chunk-E43X7VZ4.js";import{d as S}from"./chunk-LQ5GJBXS.js";import{h as k}from"./chunk-65EH2VB7.js";import{a as c,b as y,c as x,g as m,i as s}from"./chunk-BL7T5FXS.js";import{f as n}from"./chunk-RGFNPOTZ.js";n();n();import{Address as H}from"@terradharitri/sdk-core";import{addressIsValid as J}from"@terradharitri/sdk-dapp/utils/account/addressIsValid";import{decodePart as Q}from"@terradharitri/sdk-dapp/utils/decoders/decodePart";s();var X=r=>r.split("@").map((t,a)=>[2,3].includes(a)?t:Q(t)),V=({data:r,nft:t,address:a})=>{let i=r==null?void 0:r.startsWith("DCDTNFTBurn"),o=r==null?void 0:r.startsWith("DCDTNFTTransfer");if((i||o)&&r.includes("@"))try{let[,e,d,p,g]=t?["DCDTNFTTransfer",t.collection,t.nonce,t.quantity,t.receiver]:X(r),v=i&&!g?a:g,T=[e,d,p,v].every(D=>D),h=J(new H(v).bech32());if(T&&h)return{collection:e,nonce:d,quantity:p,receiver:v}}catch(e){console.error("Could not extract NFT from data:",e);return}};import{Address as Y}from"@terradharitri/sdk-core";import rr from"bignumber.js";s();var tr=(r,t)=>m(void 0,null,function*(){let{address:a,identifier:i}=r;try{return yield N({address:a,identifier:i},t)}catch(o){return yield F(i,t)}}),A=(r,t)=>m(void 0,null,function*(){let{address:a,nft:i}=r,o=V(r);try{if(o){let{collection:e,nonce:d,quantity:p,receiver:g}=o,v=`${e}-${d}`,T=yield tr({identifier:v,address:a},t);if(T)return{receiver:new Y(g).bech32(),nft:T,quantity:i?p:new rr(p,16).toString(10)}}}catch(e){console.log(e)}return null});n();n();n();import{NftEnumType as er}from"@terradharitri/sdk-dapp/types/tokens.types";import{getIdentifierType as ir}from"@terradharitri/sdk-dapp/utils/validation/getIdentifierType";s();function R(r,t){return m(this,null,function*(){let{address:a,identifier:i}=r,{isNft:o}=ir(i);if(!o)return null;try{let e=yield N({address:a,identifier:i},t);if((e==null?void 0:e.type)===er.MetaDCDT){let d=yield E(e);e=y(c({},e),{allowedReceivers:d})}return e}catch(e){console.log(e)}return null})}import{getIdentifierType as ar}from"@terradharitri/sdk-dapp/utils/validation/getIdentifierType";s();var or={receiver:"",quantity:""},M=r=>m(void 0,[r],function*({data:t,address:a,identifier:i}){if(t)return yield A({data:t,address:a});let{isNft:o}=ar(i);if(i&&o){let e=yield R({identifier:i,address:a});return e?y(c({},or),{nft:e}):null}return null});n();import{getIdentifierType as nr}from"@terradharitri/sdk-dapp/utils/validation/getIdentifierType";s();function sr(r,t){return m(this,null,function*(){let{address:a,identifier:i}=r;try{let{data:o}=yield P({address:a,token:i},t);return o}catch(o){console.log(o)}return null})}function U(r){let{identifier:t,address:a}=r,{isDcdt:i}=nr(t);return t&&i?sr({address:a,identifier:t}):null}n();import{DIGITS as dr}from"@terradharitri/sdk-dapp/constants/index";s();var mr="1",B=({computedNft:r,amount:t})=>{var a,i,o;if(((a=r==null?void 0:r.nft)==null?void 0:a.type)===w.NonFungibleDCDT)return mr;let e=((i=r==null?void 0:r.nft)==null?void 0:i.type)===w.MetaDCDT,d=(r==null?void 0:r.quantity)||t;return e&&d?b({input:d,decimals:(o=r==null?void 0:r.nft)==null?void 0:o.decimals,showLastNonZeroDecimal:!0,addCommas:!1,digits:dr}):d};n();s();function W(r){let{computedNft:t,data:a,amount:i,receiver:o}=r,e=t==null?void 0:t.nft,d=e?G({nft:e,amount:i,receiver:o,errors:!1}):"";return a||d}n();s();var Z=r=>m(void 0,null,function*(){let t=r,{configValues:a}=t,i=x(t,["configValues"]),o=S(r.chainId),e=y(c(c({isInternal:["1","T"].includes(r.chainId)},i),a),{delegationContractData:o});return q(e)});n();import{DIGITS as lr,DECIMALS as fr,GAS_PRICE as ur}from"@terradharitri/sdk-dapp/constants/index";s();var $=r=>r!=null&&r!==k?r:b({input:String(ur),decimals:fr,showLastNonZeroDecimal:!0,digits:lr});import{getIdentifierType as cr}from"@terradharitri/sdk-dapp/utils/validation/getIdentifierType";s();function pr(){let r=new URLSearchParams(window.location.search);return Object.fromEntries(r).token}function ct(r){return m(this,null,function*(){let{address:t,rewaLabel:a,configValues:{receiver:i,receiverUsername:o,amount:e,gasPrice:d,data:p,tokenId:g},networkConfig:v}=r,T=pr(),h=g||T,D=h||a;v&&L(v);let[I,C,j]=yield Promise.all([M({data:p,address:t,identifier:h}),U({identifier:h,address:t}),Z(y(c({},r),{computedTokenId:D}))]),{initGasLimit:K,initGasLimitError:O}=j,_={receiver:i,receiverUsername:o,amount:B({computedNft:I,amount:e}),tokenId:D,gasLimit:K,gasPrice:$(d),data:W({computedNft:I,data:p,receiver:i,amount:e})},{isDcdt:z}=cr(h);return{initialValues:_,nft:I==null?void 0:I.nft,gasLimitCostError:O,computedTokens:C?[C]:[],computedTokenId:D,tokenFound:z?Boolean(C):!0}})}n();s();export{A as a,ct as b};
//# sourceMappingURL=chunk-YNDEUJMY.js.map
