import{a as P,b as y}from"./chunk-TPFP64W5.js";import{c as F}from"./chunk-BXMKJC34.js";import{c as x}from"./chunk-TBD3TB4W.js";import{c as E}from"./chunk-IYJRFSXF.js";import{c as L,d as N}from"./chunk-MEB4XTPU.js";import{i as h}from"./chunk-FUSY7N5I.js";import{a as T,b as w,g as c,i as D}from"./chunk-BL7T5FXS.js";import{f as C}from"./chunk-RGFNPOTZ.js";C();import X,{useCallback as R,useContext as Y,useEffect as M,useMemo as Z,useRef as _,useState as $,createContext as K}from"react";import{useFormikContext as ee}from"formik";import te from"lodash/uniqBy";D();var U=K({}),S="tokenId",k="nft",re="tokens",ae="txType",I=[];function ge({children:A,value:i}){let[G,p]=$(!0),{values:{tokenId:r,tokens:n,nft:d},errors:{tokenId:V},setFieldValue:a}=ee(),{address:v,balance:j}=x(),{checkInvalid:q}=E(),{networkConfig:{decimals:z}}=F(),f=_(!1),{rewaPriceInUsd:b,digits:B,rewaLabel:m}=P(),u=n||I,g=R((t=!0)=>c(this,null,function*(){if(p(t),f.current)return;f.current=!0;let s=yield h(v),e=n!=null?n:[],l=te([...e,...s],W=>W.identifier);a(re,l),I=l,f.current=!1,p(!1)}),[v]),H=R(t=>{a(S,t,!1)},[]);M(()=>(g(!1),()=>{I=[]}),[]);let J=()=>c(this,null,function*(){let t=L({nft:d,tokenId:r});if(a(ae,t),t==="SemiFungibleDCDT"||t==="NonFungibleDCDT")return;let s=(o==null?void 0:o.find(e=>e.identifier===r))||d;if(t==="MetaDCDT"&&s){let e=s;a(k,e);let l=yield y(e);e=w(T({},e),{allowedReceivers:l}),a(k,e)}else a(k,void 0)}),O=q(S),o=[{name:"DharitrI eGold",identifier:m,balance:j,decimals:Number(z),ticker:m,usdPrice:b},...u];M(()=>{J()},[r]);let Q=Z(()=>N({tokens:o||[],tokenId:r}),[r,n]);return X.createElement(U.Provider,{value:{nft:d||(i==null?void 0:i.initialNft),tokens:u,allAvailableTokens:o,areTokensLoading:G&&u.length===0,tokenIdError:V,tokenId:r,tokenDetails:Q,rewaLabel:m,RewaIcon:i==null?void 0:i.RewaIcon,rewaPriceInUsd:b,digits:B,isTokenIdInvalid:O,getTokens:g,onChangeTokenId:H}},A)}function Ce(){return Y(U)}export{U as a,ge as b,Ce as c};
//# sourceMappingURL=chunk-ANZEACB2.js.map
