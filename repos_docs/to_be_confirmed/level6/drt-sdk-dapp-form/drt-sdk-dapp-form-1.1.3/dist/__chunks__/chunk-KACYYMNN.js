import{a as L,b as x}from"./chunk-FKC26KNP.js";import{a as D}from"./chunk-5EBH4CLV.js";import{a as B}from"./chunk-TKZBP5YV.js";import{a as z}from"./chunk-DPL4KOV7.js";import{a as T}from"./chunk-XSM3VDGO.js";import{a as y}from"./chunk-DJQXWEOM.js";import{a as j}from"./chunk-Y7QBXNH2.js";import{a as q}from"./chunk-QG4AMRL2.js";import{a as H}from"./chunk-OK7PTRJR.js";import{a as F,b as P,c as Q,d as C,e as W}from"./chunk-4NPVLURW.js";import{a as l}from"./chunk-E77YS427.js";import{a as c}from"./chunk-5ASRFLQP.js";import{c as k}from"./chunk-EXRI3DJM.js";import{c as U}from"./chunk-YSLLB46T.js";import{c as S}from"./chunk-IO4ZZN6V.js";import{i as r}from"./chunk-P4IVSQC4.js";import{f as e}from"./chunk-JH2LJGTQ.js";e();import o,{useState as G,useEffect as Ie,useCallback as K,useMemo as X,useRef as ge}from"react";import{faCheck as Ce,faExclamationTriangle as Ae}from"@fortawesome/free-solid-svg-icons";import{FontAwesomeIcon as Y}from"@fortawesome/react-fontawesome";import A from"classnames";import{useFormikContext as Oe}from"formik";import Ve from"react-select";r();var Ze=Z=>{let f=ge(null),{className:_}=Z,{setFieldValue:u}=Oe(),{receiverInfo:{scamError:v,fetchingScamAddress:$,receiverInputValue:E,setReceiverInputValue:I,knownAddresses:m,receiver:s,onBlurReceiver:J,onChangeReceiver:ee},receiverUsernameInfo:{receiverUsername:re},formInfo:{readonly:ae}}=k(),[O,V]=G(!1),[oe,g]=G(s?{label:s,value:s}:null),{receiverErrorDataTestId:se,error:te}=L(),{isAddressError:ne,isUsernameError:ie,isRequiredError:me,isReceiverDropdownOpened:le}=x({menuIsOpen:O}),{usernameAccounts:p,isUsernameLoading:ce}=U(),b=()=>{J(new Event("blur"));let a=m==null?void 0:m.find(d=>d.username===E&&d.address===s);a&&(u("receiver",a.address),u("receiverUsername",a.username),u("rawReceiverUsername",a.rawUsername))},M=m==null?void 0:m.find(a=>a.username===E&&a.address===s),ue=X(()=>C(m),[m]),N=M?C([M]):ue,h=Q({setFieldValue:u,setInputValue:I,setOption:g,options:N,knownAddresses:m!=null?m:[],usernameAccounts:p}),pe=K(P({setAllValues:h,setOption:g}),[]),de=K(a=>{ee(a?a.trim():""),setTimeout(b)},[]),fe=W({changeAndBlurInput:de,setOption:g,setInputValue:I}),ve=X(()=>z(f),[f]);Ie(()=>{if(!s)return;let a=Object.keys(p).find(d=>{var R;return((R=p[d])==null?void 0:R.address)===s});h(a!=null?a:s),a&&I(a)},[p,s]);let w=ne||ie||me,Ee=w&&!O;return o.createElement("div",{className:A(l.receiver,_)},o.createElement("div",{className:c.label,"data-testid":"receiverLabel","data-loading":$},"Receiver"),o.createElement(Ve,{value:oe,onInputChange:pe,inputId:"receiverWrapper",maxMenuHeight:160,openMenuOnFocus:!0,isDisabled:S("receiver",ae),options:N,filterOption:F,noOptionsMessage:()=>null,onChange:fe,onBlur:b,isMulti:!1,ref:f,inputValue:E,onMenuClose:()=>V(!1),onMenuOpen:()=>V(!0),components:{Menu:T,Input:ve,Control:q,ValueContainer:B,DropdownIndicator:H,SelectContainer:D,MenuList:y,Option:j,Placeholder:()=>null,SingleValue:()=>null,IndicatorSeparator:()=>null,LoadingIndicator:()=>null},className:A(l.receiverSelectContainer,{[l.opened]:le,[l.invalid]:w||v})}),Ee&&o.createElement("div",{"data-testid":se,className:c.error},te),ce&&o.createElement("div",{className:l.loading},"Loading..."),re&&o.createElement("span",{className:l.found,"data-testid":"receiverUsernameAddress"},"Account found!"," ",o.createElement(Y,{icon:Ce,className:l.foundIcon})),v&&o.createElement("div",{"data-testid":"receiverScam",className:A(c.error,c.scam)},o.createElement("span",null,o.createElement(Y,{icon:Ae}),o.createElement("small",null,v))))};e();r();e();r();e();r();e();r();e();r();e();r();e();r();e();r();e();r();export{Ze as a};
//# sourceMappingURL=chunk-KACYYMNN.js.map
