import{a as A}from"./chunk-BCRGJ3VV.js";import{a as ia}from"./chunk-3DRZWQ3W.js";import{c as B}from"./chunk-DQQ56ZBR.js";import{c as $}from"./chunk-S4M5YVVR.js";import{a as sa}from"./chunk-6GROXHQ3.js";import{c as b}from"./chunk-AIKSBADL.js";import{a as Z,g as aa,i as ra,k as ta,l as oa}from"./chunk-RU4WZGQA.js";import{d as X}from"./chunk-NRR4ZHNF.js";import{b as v}from"./chunk-IO4ZZN6V.js";import{h as H}from"./chunk-AWV4CCGJ.js";import{g as W,i as s}from"./chunk-P4IVSQC4.js";import{f as o}from"./chunk-JH2LJGTQ.js";o();import{useEffect as va,useState as ea}from"react";import{MAINNET_CHAIN_ID as ha}from"@terradharitri/sdk-dapp/constants/index";import{isContract as Ca}from"@terradharitri/sdk-dapp/utils/smartContracts";import Pa from"bignumber.js";import{useFormikContext as Ea}from"formik";s();var J=500;function Ga(D){let{networkConfig:{chainId:h}}=B(),{prefilledForm:g}=b(),C=Ea(),{balance:e,address:P,nonce:E}=$(),{values:r,initialValues:G,touched:I,errors:{gasLimit:n,amount:t},setFieldValue:l}=C,{data:S,amount:T,gasLimit:c}=r,F=A(S,J),x=A(T,J),w=A(c,J),[k,i]=ea(!1),[N,f]=ea(D),y=()=>W(this,null,function*(){let V=n||t,R=F.length>0,M=new Pa(x).isGreaterThanOrEqualTo(0),_=v({initialValues:G,gasLimit:c,touched:I}),O=h!==ha||!1;if(!g&&Ca(r.receiver)&&O&&!_&&!V&&R&&M){i(!0);try{let{gasLimit:d,gasLimitCostError:j}=yield ta({balance:e,address:P,nonce:E,values:r,chainId:h});i(!1),f(j),l("gasLimit",d,!0)}catch(d){i(!1),console.error(d)}}});return va(()=>{y()},[F,x,w,r.receiver,g]),{gasCostLoading:k,gasCostError:N}}var ma=Ga;o();import Ia,{useCallback as u,createContext as Ta,useContext as Fa,useEffect as na,useMemo as xa}from"react";import{GAS_PER_DATA_BYTE as ka,GAS_PRICE_MODIFIER as ya}from"@terradharitri/sdk-dapp/constants/index";import{calculateFeeLimit as Va}from"@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit";import{stringIsFloat as _a}from"@terradharitri/sdk-dapp/utils/validation/stringIsFloat";import{stringIsInteger as la}from"@terradharitri/sdk-dapp/utils/validation/stringIsInteger";import ba from"bignumber.js";import{useFormikContext as Aa}from"formik";s();var ca=Ta({});function ur({children:D,initGasLimitError:h}){let g=Aa(),{values:C,touched:e,errors:{gasPrice:P,gasLimit:E},setFieldValue:r,setFieldTouched:G,initialValues:I}=g,{gasPrice:n,gasLimit:t,data:l,tokenId:S,txType:T,isGuarded:c,receiver:F,amount:x}=C,w=aa(c),{checkInvalid:k,isNftTransaction:i,isDcdtTransaction:N,prefilledForm:f,isRewaTransaction:y}=b(),{networkConfig:{chainId:V}}=B(),{gasCostLoading:R,gasCostError:M}=ma(h),_=ia({isNftTransaction:i,isDcdtTransaction:N,data:l,isGuarded:c}),O=!sa({values:C,errors:g.errors,touched:e})&&k("gasLimit"),d=k("gasPrice"),j=u((a,p=!1)=>{var m;let L=typeof a=="string"?a:(m=a==null?void 0:a.target)==null?void 0:m.value;r("gasPrice",L,p)},[]),q=u((a,p=!1)=>{var m;let L=typeof a=="string"?a:(m=a==null?void 0:a.target)==null?void 0:m.value;r("gasLimit",L,p)},[]),fa=u(()=>{r("gasPrice",Z)},[]),ua=u(()=>{r("gasLimit",_)},[i]),ga=u(()=>{G("gasPrice",!0)},[]),da=u(()=>{G("gasLimit",!0)},[]),z=Boolean(P)||Boolean(E),pa=xa(()=>{let a=!la(t),p=!_a(n);if(a||p)return H;let m=v({initialValues:I,gasLimit:t,touched:e}),L=!f&&!m&&y?l.trim():"",U=Va({gasLimit:t,gasPrice:X(n),data:L,chainId:V,gasPerDataByte:String(ka),gasPriceModifier:String(ya)});return la(U)?U:H},[z,n,t,V,f,y,e.gasLimit,l,F,x]);na(()=>{let a=v({initialValues:I,gasLimit:t,touched:e});!f&&i&&!a&&q(new ba(ra()).plus(w).toString())},[i,e]),na(()=>{f||q(oa({txType:T,data:l,isGuarded:c}),!0)},[S,T]);let La={gasPrice:n,gasLimit:t,gasCostLoading:R,feeLimit:pa,defaultGasLimit:_,gasPriceError:P,gasLimitError:E,gasCostError:M,hasErrors:z,isGasLimitInvalid:O,isGasPriceInvalid:d,onChangeGasLimit:q,onChangeGasPrice:j,onBlurGasPrice:ga,onBlurGasLimit:da,onResetGasPrice:fa,onResetGasLimit:ua};return Ia.createElement(ca.Provider,{value:La},D)}function gr(){return Fa(ca)}o();s();o();s();export{Ga as a,ca as b,ur as c,gr as d};
//# sourceMappingURL=chunk-KPOWNGQ6.js.map
