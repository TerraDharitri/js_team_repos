"use strict";var ei=Object.create;var _r=Object.defineProperty;var ri=Object.getOwnPropertyDescriptor;var ti=Object.getOwnPropertyNames;var ni=Object.getPrototypeOf,ii=Object.prototype.hasOwnProperty;var ai=(t,e)=>()=>(t&&(e=t(t=0)),e);var He=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var sr=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ti(e))!ii.call(t,o)&&o!==r&&_r(t,o,{get:()=>e[o],enumerable:!(i=ri(e,o))||i.enumerable});return t},lr=(t,e,r)=>(sr(t,e,"default"),r&&sr(r,e,"default")),Or=(t,e,r)=>(r=t!=null?ei(ni(t)):{},sr(e||!t||!t.__esModule?_r(r,"default",{value:t,enumerable:!0}):r,t)),oi=t=>sr(_r({},"__esModule",{value:!0}),t);var St=He(fr=>{"use strict";ee();fr.byteLength=si;fr.toByteArray=fi;fr.fromByteArray=di;var fe=[],ne=[],ui=typeof Uint8Array!="undefined"?Uint8Array:Array,Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Te=0,Bt=Vr.length;Te<Bt;++Te)fe[Te]=Vr[Te],ne[Vr.charCodeAt(Te)]=Te;var Te,Bt;ne["-".charCodeAt(0)]=62;ne["_".charCodeAt(0)]=63;function qt(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function si(t){var e=qt(t),r=e[0],i=e[1];return(r+i)*3/4-i}function li(t,e,r){return(e+r)*3/4-r}function fi(t){var e,r=qt(t),i=r[0],o=r[1],l=new ui(li(t,i,o)),f=0,u=o>0?i-4:i,d;for(d=0;d<u;d+=4)e=ne[t.charCodeAt(d)]<<18|ne[t.charCodeAt(d+1)]<<12|ne[t.charCodeAt(d+2)]<<6|ne[t.charCodeAt(d+3)],l[f++]=e>>16&255,l[f++]=e>>8&255,l[f++]=e&255;return o===2&&(e=ne[t.charCodeAt(d)]<<2|ne[t.charCodeAt(d+1)]>>4,l[f++]=e&255),o===1&&(e=ne[t.charCodeAt(d)]<<10|ne[t.charCodeAt(d+1)]<<4|ne[t.charCodeAt(d+2)]>>2,l[f++]=e>>8&255,l[f++]=e&255),l}function ci(t){return fe[t>>18&63]+fe[t>>12&63]+fe[t>>6&63]+fe[t&63]}function hi(t,e,r){for(var i,o=[],l=e;l<r;l+=3)i=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(t[l+2]&255),o.push(ci(i));return o.join("")}function di(t){for(var e,r=t.length,i=r%3,o=[],l=16383,f=0,u=r-i;f<u;f+=l)o.push(hi(t,f,f+l>u?u:f+l));return i===1?(e=t[r-1],o.push(fe[e>>2]+fe[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],o.push(fe[e>>10]+fe[e>>4&63]+fe[e<<2&63]+"=")),o.join("")}});var Ct=He($r=>{ee();$r.read=function(t,e,r,i,o){var l,f,u=o*8-i-1,d=(1<<u)-1,h=d>>1,v=-7,p=r?o-1:0,x=r?-1:1,b=t[e+p];for(p+=x,l=b&(1<<-v)-1,b>>=-v,v+=u;v>0;l=l*256+t[e+p],p+=x,v-=8);for(f=l&(1<<-v)-1,l>>=-v,v+=i;v>0;f=f*256+t[e+p],p+=x,v-=8);if(l===0)l=1-h;else{if(l===d)return f?NaN:(b?-1:1)*(1/0);f=f+Math.pow(2,i),l=l-h}return(b?-1:1)*f*Math.pow(2,l-i)};$r.write=function(t,e,r,i,o,l){var f,u,d,h=l*8-o-1,v=(1<<h)-1,p=v>>1,x=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:l-1,E=i?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,f=v):(f=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-f))<1&&(f--,d*=2),f+p>=1?e+=x/d:e+=x*Math.pow(2,1-p),e*d>=2&&(f++,d/=2),f+p>=v?(u=0,f=v):f+p>=1?(u=(e*d-1)*Math.pow(2,o),f=f+p):(u=e*Math.pow(2,p-1)*Math.pow(2,o),f=0));o>=8;t[r+b]=u&255,b+=E,u/=256,o-=8);for(f=f<<o|u,h+=o;h>0;t[r+b]=f&255,b+=E,f/=256,h-=8);t[r+b-E]|=A*128}});var Vt=He(Pe=>{"use strict";ee();var jr=St(),Re=Ct(),Ft=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Pe.Buffer=y;Pe.SlowBuffer=wi;Pe.INSPECT_MAX_BYTES=50;var cr=2147483647;Pe.kMaxLength=cr;y.TYPED_ARRAY_SUPPORT=pi();!y.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pi(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(r){return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(!!y.isBuffer(this))return this.buffer}});Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(!!y.isBuffer(this))return this.byteOffset}});function ve(t){if(t>cr)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,y.prototype),e}function y(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Hr(t)}return Ut(t,e,r)}y.poolSize=8192;function Ut(t,e,r){if(typeof t=="string")return gi(t,e);if(ArrayBuffer.isView(t))return vi(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ce(t,ArrayBuffer)||t&&ce(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ce(t,SharedArrayBuffer)||t&&ce(t.buffer,SharedArrayBuffer)))return Wr(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return y.from(i,e,r);var o=yi(t);if(o)return o;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return y.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}y.from=function(t,e,r){return Ut(t,e,r)};Object.setPrototypeOf(y.prototype,Uint8Array.prototype);Object.setPrototypeOf(y,Uint8Array);function Dt(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function mi(t,e,r){return Dt(t),t<=0?ve(t):e!==void 0?typeof r=="string"?ve(t).fill(e,r):ve(t).fill(e):ve(t)}y.alloc=function(t,e,r){return mi(t,e,r)};function Hr(t){return Dt(t),ve(t<0?0:Zr(t)|0)}y.allocUnsafe=function(t){return Hr(t)};y.allocUnsafeSlow=function(t){return Hr(t)};function gi(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=Rt(t,e)|0,i=ve(r),o=i.write(t,e);return o!==r&&(i=i.slice(0,o)),i}function zr(t){for(var e=t.length<0?0:Zr(t.length)|0,r=ve(e),i=0;i<e;i+=1)r[i]=t[i]&255;return r}function vi(t){if(ce(t,Uint8Array)){var e=new Uint8Array(t);return Wr(e.buffer,e.byteOffset,e.byteLength)}return zr(t)}function Wr(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,y.prototype),i}function yi(t){if(y.isBuffer(t)){var e=Zr(t.length)|0,r=ve(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Xr(t.length)?ve(0):zr(t);if(t.type==="Buffer"&&Array.isArray(t.data))return zr(t.data)}function Zr(t){if(t>=cr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cr.toString(16)+" bytes");return t|0}function wi(t){return+t!=t&&(t=0),y.alloc(+t)}y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==y.prototype};y.compare=function(e,r){if(ce(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),ce(r,Uint8Array)&&(r=y.from(r,r.offset,r.byteLength)),!y.isBuffer(e)||!y.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var i=e.length,o=r.length,l=0,f=Math.min(i,o);l<f;++l)if(e[l]!==r[l]){i=e[l],o=r[l];break}return i<o?-1:o<i?1:0};y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};y.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return y.alloc(0);var i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;var o=y.allocUnsafe(r),l=0;for(i=0;i<e.length;++i){var f=e[i];if(ce(f,Uint8Array))l+f.length>o.length?y.from(f).copy(o,l):Uint8Array.prototype.set.call(o,f,l);else if(y.isBuffer(f))f.copy(o,l);else throw new TypeError('"list" argument must be an Array of Buffers');l+=f.length}return o};function Rt(t,e){if(y.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ce(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Yr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Ot(t).length;default:if(o)return i?-1:Yr(t).length;e=(""+e).toLowerCase(),o=!0}}y.byteLength=Rt;function Ei(t,e,r){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Fi(this,e,r);case"utf8":case"utf-8":return Gt(this,e,r);case"ascii":return Si(this,e,r);case"latin1":case"binary":return Ci(this,e,r);case"base64":return Bi(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Li(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}y.prototype._isBuffer=!0;function Be(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}y.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Be(this,r,r+1);return this};y.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Be(this,r,r+3),Be(this,r+1,r+2);return this};y.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Be(this,r,r+7),Be(this,r+1,r+6),Be(this,r+2,r+5),Be(this,r+3,r+4);return this};y.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Gt(this,0,e):Ei.apply(this,arguments)};y.prototype.toLocaleString=y.prototype.toString;y.prototype.equals=function(e){if(!y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:y.compare(this,e)===0};y.prototype.inspect=function(){var e="",r=Pe.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Ft&&(y.prototype[Ft]=y.prototype.inspect);y.prototype.compare=function(e,r,i,o,l){if(ce(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),!y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),o===void 0&&(o=0),l===void 0&&(l=this.length),r<0||i>e.length||o<0||l>this.length)throw new RangeError("out of range index");if(o>=l&&r>=i)return 0;if(o>=l)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,o>>>=0,l>>>=0,this===e)return 0;for(var f=l-o,u=i-r,d=Math.min(f,u),h=this.slice(o,l),v=e.slice(r,i),p=0;p<d;++p)if(h[p]!==v[p]){f=h[p],u=v[p];break}return f<u?-1:u<f?1:0};function Pt(t,e,r,i,o){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Xr(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof e=="string"&&(e=y.from(e,i)),y.isBuffer(e))return e.length===0?-1:Lt(t,e,r,i,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Lt(t,[e],r,i,o);throw new TypeError("val must be string, number or Buffer")}function Lt(t,e,r,i,o){var l=1,f=t.length,u=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;l=2,f/=2,u/=2,r/=2}function d(b,E){return l===1?b[E]:b.readUInt16BE(E*l)}var h;if(o){var v=-1;for(h=r;h<f;h++)if(d(t,h)===d(e,v===-1?0:h-v)){if(v===-1&&(v=h),h-v+1===u)return v*l}else v!==-1&&(h-=h-v),v=-1}else for(r+u>f&&(r=f-u),h=r;h>=0;h--){for(var p=!0,x=0;x<u;x++)if(d(t,h+x)!==d(e,x)){p=!1;break}if(p)return h}return-1}y.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};y.prototype.indexOf=function(e,r,i){return Pt(this,e,r,i,!0)};y.prototype.lastIndexOf=function(e,r,i){return Pt(this,e,r,i,!1)};function xi(t,e,r,i){r=Number(r)||0;var o=t.length-r;i?(i=Number(i),i>o&&(i=o)):i=o;var l=e.length;i>l/2&&(i=l/2);for(var f=0;f<i;++f){var u=parseInt(e.substr(f*2,2),16);if(Xr(u))return f;t[r+f]=u}return f}function Ai(t,e,r,i){return hr(Yr(e,t.length-r),t,r,i)}function Ii(t,e,r,i){return hr(Di(e),t,r,i)}function bi(t,e,r,i){return hr(Ot(e),t,r,i)}function Ti(t,e,r,i){return hr(Ri(e,t.length-r),t,r,i)}y.prototype.write=function(e,r,i,o){if(r===void 0)o="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")o=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,o===void 0&&(o="utf8")):(o=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var l=this.length-r;if((i===void 0||i>l)&&(i=l),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var f=!1;;)switch(o){case"hex":return xi(this,e,r,i);case"utf8":case"utf-8":return Ai(this,e,r,i);case"ascii":case"latin1":case"binary":return Ii(this,e,r,i);case"base64":return bi(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ti(this,e,r,i);default:if(f)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),f=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bi(t,e,r){return e===0&&r===t.length?jr.fromByteArray(t):jr.fromByteArray(t.slice(e,r))}function Gt(t,e,r){r=Math.min(t.length,r);for(var i=[],o=e;o<r;){var l=t[o],f=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=r){var d,h,v,p;switch(u){case 1:l<128&&(f=l);break;case 2:d=t[o+1],(d&192)===128&&(p=(l&31)<<6|d&63,p>127&&(f=p));break;case 3:d=t[o+1],h=t[o+2],(d&192)===128&&(h&192)===128&&(p=(l&15)<<12|(d&63)<<6|h&63,p>2047&&(p<55296||p>57343)&&(f=p));break;case 4:d=t[o+1],h=t[o+2],v=t[o+3],(d&192)===128&&(h&192)===128&&(v&192)===128&&(p=(l&15)<<18|(d&63)<<12|(h&63)<<6|v&63,p>65535&&p<1114112&&(f=p))}}f===null?(f=65533,u=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|f&1023),i.push(f),o+=u}return qi(i)}var kt=4096;function qi(t){var e=t.length;if(e<=kt)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=kt));return r}function Si(t,e,r){var i="";r=Math.min(t.length,r);for(var o=e;o<r;++o)i+=String.fromCharCode(t[o]&127);return i}function Ci(t,e,r){var i="";r=Math.min(t.length,r);for(var o=e;o<r;++o)i+=String.fromCharCode(t[o]);return i}function Fi(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var o="",l=e;l<r;++l)o+=Pi[t[l]];return o}function Li(t,e,r){for(var i=t.slice(e,r),o="",l=0;l<i.length-1;l+=2)o+=String.fromCharCode(i[l]+i[l+1]*256);return o}y.prototype.slice=function(e,r){var i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);var o=this.subarray(e,r);return Object.setPrototypeOf(o,y.prototype),o};function Y(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Y(e,r,this.length);for(var o=this[e],l=1,f=0;++f<r&&(l*=256);)o+=this[e+f]*l;return o};y.prototype.readUintBE=y.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Y(e,r,this.length);for(var o=this[e+--r],l=1;r>0&&(l*=256);)o+=this[e+--r]*l;return o};y.prototype.readUint8=y.prototype.readUInt8=function(e,r){return e=e>>>0,r||Y(e,1,this.length),this[e]};y.prototype.readUint16LE=y.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Y(e,2,this.length),this[e]|this[e+1]<<8};y.prototype.readUint16BE=y.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Y(e,2,this.length),this[e]<<8|this[e+1]};y.prototype.readUint32LE=y.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};y.prototype.readUint32BE=y.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};y.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Y(e,r,this.length);for(var o=this[e],l=1,f=0;++f<r&&(l*=256);)o+=this[e+f]*l;return l*=128,o>=l&&(o-=Math.pow(2,8*r)),o};y.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Y(e,r,this.length);for(var o=r,l=1,f=this[e+--o];o>0&&(l*=256);)f+=this[e+--o]*l;return l*=128,f>=l&&(f-=Math.pow(2,8*r)),f};y.prototype.readInt8=function(e,r){return e=e>>>0,r||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};y.prototype.readInt16LE=function(e,r){e=e>>>0,r||Y(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};y.prototype.readInt16BE=function(e,r){e=e>>>0,r||Y(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};y.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};y.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};y.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),Re.read(this,e,!0,23,4)};y.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Y(e,4,this.length),Re.read(this,e,!1,23,4)};y.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Y(e,8,this.length),Re.read(this,e,!0,52,8)};y.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Y(e,8,this.length),Re.read(this,e,!1,52,8)};function Q(t,e,r,i,o,l){if(!y.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<l)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(e,r,i,o){if(e=+e,r=r>>>0,i=i>>>0,!o){var l=Math.pow(2,8*i)-1;Q(this,e,r,i,l,0)}var f=1,u=0;for(this[r]=e&255;++u<i&&(f*=256);)this[r+u]=e/f&255;return r+i};y.prototype.writeUintBE=y.prototype.writeUIntBE=function(e,r,i,o){if(e=+e,r=r>>>0,i=i>>>0,!o){var l=Math.pow(2,8*i)-1;Q(this,e,r,i,l,0)}var f=i-1,u=1;for(this[r+f]=e&255;--f>=0&&(u*=256);)this[r+f]=e/u&255;return r+i};y.prototype.writeUint8=y.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,1,255,0),this[r]=e&255,r+1};y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};y.prototype.writeIntLE=function(e,r,i,o){if(e=+e,r=r>>>0,!o){var l=Math.pow(2,8*i-1);Q(this,e,r,i,l-1,-l)}var f=0,u=1,d=0;for(this[r]=e&255;++f<i&&(u*=256);)e<0&&d===0&&this[r+f-1]!==0&&(d=1),this[r+f]=(e/u>>0)-d&255;return r+i};y.prototype.writeIntBE=function(e,r,i,o){if(e=+e,r=r>>>0,!o){var l=Math.pow(2,8*i-1);Q(this,e,r,i,l-1,-l)}var f=i-1,u=1,d=0;for(this[r+f]=e&255;--f>=0&&(u*=256);)e<0&&d===0&&this[r+f+1]!==0&&(d=1),this[r+f]=(e/u>>0)-d&255;return r+i};y.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};y.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};y.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Q(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Mt(t,e,r,i,o,l){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Nt(t,e,r,i,o){return e=+e,r=r>>>0,o||Mt(t,e,r,4,34028234663852886e22,-34028234663852886e22),Re.write(t,e,r,i,23,4),r+4}y.prototype.writeFloatLE=function(e,r,i){return Nt(this,e,r,!0,i)};y.prototype.writeFloatBE=function(e,r,i){return Nt(this,e,r,!1,i)};function _t(t,e,r,i,o){return e=+e,r=r>>>0,o||Mt(t,e,r,8,17976931348623157e292,-17976931348623157e292),Re.write(t,e,r,i,52,8),r+8}y.prototype.writeDoubleLE=function(e,r,i){return _t(this,e,r,!0,i)};y.prototype.writeDoubleBE=function(e,r,i){return _t(this,e,r,!1,i)};y.prototype.copy=function(e,r,i,o){if(!y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!o&&o!==0&&(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<i&&(o=i),o===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-i&&(o=e.length-r+i);var l=o-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,o):Uint8Array.prototype.set.call(e,this.subarray(i,o),r),l};y.prototype.fill=function(e,r,i,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,i=this.length):typeof i=="string"&&(o=i,i=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!y.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var l=e.charCodeAt(0);(o==="utf8"&&l<128||o==="latin1")&&(e=l)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var f;if(typeof e=="number")for(f=r;f<i;++f)this[f]=e;else{var u=y.isBuffer(e)?e:y.from(e,o),d=u.length;if(d===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(f=0;f<i-r;++f)this[f+r]=u[f%d]}return this};var ki=/[^+/0-9A-Za-z-_]/g;function Ui(t){if(t=t.split("=")[0],t=t.trim().replace(ki,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Yr(t,e){e=e||1/0;for(var r,i=t.length,o=null,l=[],f=0;f<i;++f){if(r=t.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&l.push(239,191,189);continue}else if(f+1===i){(e-=3)>-1&&l.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&l.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;l.push(r)}else if(r<2048){if((e-=2)<0)break;l.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;l.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;l.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return l}function Di(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Ri(t,e){for(var r,i,o,l=[],f=0;f<t.length&&!((e-=2)<0);++f)r=t.charCodeAt(f),i=r>>8,o=r%256,l.push(o),l.push(i);return l}function Ot(t){return jr.toByteArray(Ui(t))}function hr(t,e,r,i){for(var o=0;o<i&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function ce(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Xr(t){return t!==t}var Pi=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var i=r*16,o=0;o<16;++o)e[i+o]=t[r]+t[o];return e}()});var Yt=He((os,Wt)=>{ee();var V=Wt.exports={},he,de;function Jr(){throw new Error("setTimeout has not been defined")}function Kr(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?he=setTimeout:he=Jr}catch(t){he=Jr}try{typeof clearTimeout=="function"?de=clearTimeout:de=Kr}catch(t){de=Kr}})();function $t(t){if(he===setTimeout)return setTimeout(t,0);if((he===Jr||!he)&&setTimeout)return he=setTimeout,setTimeout(t,0);try{return he(t,0)}catch(e){try{return he.call(null,t,0)}catch(r){return he.call(this,t,0)}}}function Gi(t){if(de===clearTimeout)return clearTimeout(t);if((de===Kr||!de)&&clearTimeout)return de=clearTimeout,clearTimeout(t);try{return de(t)}catch(e){try{return de.call(null,t)}catch(r){return de.call(this,t)}}}var ye=[],Ge=!1,qe,dr=-1;function Mi(){!Ge||!qe||(Ge=!1,qe.length?ye=qe.concat(ye):dr=-1,ye.length&&jt())}function jt(){if(!Ge){var t=$t(Mi);Ge=!0;for(var e=ye.length;e;){for(qe=ye,ye=[];++dr<e;)qe&&qe[dr].run();dr=-1,e=ye.length}qe=null,Ge=!1,Gi(t)}}V.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ye.push(new zt(t,e)),ye.length===1&&!Ge&&$t(jt)};function zt(t,e){this.fun=t,this.array=e}zt.prototype.run=function(){this.fun.apply(null,this.array)};V.title="browser";V.browser=!0;V.env={};V.argv=[];V.version="";V.versions={};function we(){}V.on=we;V.addListener=we;V.once=we;V.off=we;V.removeListener=we;V.removeAllListeners=we;V.emit=we;V.prependListener=we;V.prependOnceListener=we;V.listeners=function(t){return[]};V.binding=function(t){throw new Error("process.binding is not supported")};V.cwd=function(){return"/"};V.chdir=function(t){throw new Error("process.chdir is not supported")};V.umask=function(){return 0}});var Ue,De,us,ee=ai(()=>{Ue=Or(Vt()),De=Or(Yt()),us=function(t){function e(){var i=this||self;return delete t.prototype.__magic__,i}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object)});var Xn=He((As,Zn)=>{"use strict";ee();var Ni=Object.create,tr=Object.defineProperty,_i=Object.defineProperties,Oi=Object.getOwnPropertyDescriptor,Vi=Object.getOwnPropertyDescriptors,$i=Object.getOwnPropertyNames,Ht=Object.getOwnPropertySymbols,ji=Object.getPrototypeOf,qn=Object.prototype.hasOwnProperty,zi=Object.prototype.propertyIsEnumerable,Zt=(t,e,r)=>e in t?tr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$=(t,e)=>{for(var r in e||(e={}))qn.call(e,r)&&Zt(t,r,e[r]);if(Ht)for(var r of Ht(e))zi.call(e,r)&&Zt(t,r,e[r]);return t},ge=(t,e)=>_i(t,Vi(e)),Wi=(t,e)=>()=>(t&&(e=t(t=0)),e),kr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Yi=(t,e)=>{for(var r in e)tr(t,r,{get:e[r],enumerable:!0})},Sn=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of $i(e))!qn.call(t,o)&&o!==r&&tr(t,o,{get:()=>e[o],enumerable:!(i=Oi(e,o))||i.enumerable});return t},q=(t,e,r)=>(r=t!=null?Ni(ji(t)):{},Sn(e||!t||!t.__esModule?tr(r,"default",{value:t,enumerable:!0}):r,t)),Hi=t=>Sn(tr({},"__esModule",{value:!0}),t),R=(t,e,r)=>new Promise((i,o)=>{var l=d=>{try{u(r.next(d))}catch(h){o(h)}},f=d=>{try{u(r.throw(d))}catch(h){o(h)}},u=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,f);u((r=r.apply(t,e)).next())}),Zi=kr(t=>{"use strict";g(),t.byteLength=d,t.toByteArray=v,t.fromByteArray=b;var e=[],r=[],i=typeof Uint8Array!="undefined"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,f=o.length;l<f;++l)e[l]=o[l],r[o.charCodeAt(l)]=l;var l,f;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function u(E){var A=E.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=E.indexOf("=");I===-1&&(I=A);var T=I===A?0:4-I%4;return[I,T]}function d(E){var A=u(E),I=A[0],T=A[1];return(I+T)*3/4-T}function h(E,A,I){return(A+I)*3/4-I}function v(E){var A,I=u(E),T=I[0],S=I[1],C=new i(h(E,T,S)),L=0,U=S>0?T-4:T,k;for(k=0;k<U;k+=4)A=r[E.charCodeAt(k)]<<18|r[E.charCodeAt(k+1)]<<12|r[E.charCodeAt(k+2)]<<6|r[E.charCodeAt(k+3)],C[L++]=A>>16&255,C[L++]=A>>8&255,C[L++]=A&255;return S===2&&(A=r[E.charCodeAt(k)]<<2|r[E.charCodeAt(k+1)]>>4,C[L++]=A&255),S===1&&(A=r[E.charCodeAt(k)]<<10|r[E.charCodeAt(k+1)]<<4|r[E.charCodeAt(k+2)]>>2,C[L++]=A>>8&255,C[L++]=A&255),C}function p(E){return e[E>>18&63]+e[E>>12&63]+e[E>>6&63]+e[E&63]}function x(E,A,I){for(var T,S=[],C=A;C<I;C+=3)T=(E[C]<<16&16711680)+(E[C+1]<<8&65280)+(E[C+2]&255),S.push(p(T));return S.join("")}function b(E){for(var A,I=E.length,T=I%3,S=[],C=16383,L=0,U=I-T;L<U;L+=C)S.push(x(E,L,L+C>U?U:L+C));return T===1?(A=E[I-1],S.push(e[A>>2]+e[A<<4&63]+"==")):T===2&&(A=(E[I-2]<<8)+E[I-1],S.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),S.join("")}}),Xi=kr(t=>{g(),t.read=function(e,r,i,o,l){var f,u,d=l*8-o-1,h=(1<<d)-1,v=h>>1,p=-7,x=i?l-1:0,b=i?-1:1,E=e[r+x];for(x+=b,f=E&(1<<-p)-1,E>>=-p,p+=d;p>0;f=f*256+e[r+x],x+=b,p-=8);for(u=f&(1<<-p)-1,f>>=-p,p+=o;p>0;u=u*256+e[r+x],x+=b,p-=8);if(f===0)f=1-v;else{if(f===h)return u?NaN:(E?-1:1)*(1/0);u=u+Math.pow(2,o),f=f-v}return(E?-1:1)*u*Math.pow(2,f-o)},t.write=function(e,r,i,o,l,f){var u,d,h,v=f*8-l-1,p=(1<<v)-1,x=p>>1,b=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:f-1,A=o?1:-1,I=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,u=p):(u=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+x>=1?r+=b/h:r+=b*Math.pow(2,1-x),r*h>=2&&(u++,h/=2),u+x>=p?(d=0,u=p):u+x>=1?(d=(r*h-1)*Math.pow(2,l),u=u+x):(d=r*Math.pow(2,x-1)*Math.pow(2,l),u=0));l>=8;e[i+E]=d&255,E+=A,d/=256,l-=8);for(u=u<<l|d,v+=l;v>0;e[i+E]=u&255,E+=A,u/=256,v-=8);e[i+E-A]|=I*128}}),Ji=kr(t=>{"use strict";g();var e=Zi(),r=Xi(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var n=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(n,a),n.foo()===42}catch(s){return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(n){if(n>o)throw new RangeError('The value "'+n+'" is invalid for option "size"');var a=new Uint8Array(n);return Object.setPrototypeOf(a,u.prototype),a}function u(n,a,s){if(typeof n=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(n)}return d(n,a,s)}u.poolSize=8192;function d(n,a,s){if(typeof n=="string")return x(n,a);if(ArrayBuffer.isView(n))return E(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(le(n,ArrayBuffer)||n&&le(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(le(n,SharedArrayBuffer)||n&&le(n.buffer,SharedArrayBuffer)))return A(n,a,s);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var c=n.valueOf&&n.valueOf();if(c!=null&&c!==n)return u.from(c,a,s);var m=I(n);if(m)return m;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return u.from(n[Symbol.toPrimitive]("string"),a,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}u.from=function(n,a,s){return d(n,a,s)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function v(n,a,s){return h(n),n<=0?f(n):a!==void 0?typeof s=="string"?f(n).fill(a,s):f(n).fill(a):f(n)}u.alloc=function(n,a,s){return v(n,a,s)};function p(n){return h(n),f(n<0?0:T(n)|0)}u.allocUnsafe=function(n){return p(n)},u.allocUnsafeSlow=function(n){return p(n)};function x(n,a){if((typeof a!="string"||a==="")&&(a="utf8"),!u.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var s=C(n,a)|0,c=f(s),m=c.write(n,a);return m!==s&&(c=c.slice(0,m)),c}function b(n){for(var a=n.length<0?0:T(n.length)|0,s=f(a),c=0;c<a;c+=1)s[c]=n[c]&255;return s}function E(n){if(le(n,Uint8Array)){var a=new Uint8Array(n);return A(a.buffer,a.byteOffset,a.byteLength)}return b(n)}function A(n,a,s){if(a<0||n.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<a+(s||0))throw new RangeError('"length" is outside of buffer bounds');var c;return a===void 0&&s===void 0?c=new Uint8Array(n):s===void 0?c=new Uint8Array(n,a):c=new Uint8Array(n,a,s),Object.setPrototypeOf(c,u.prototype),c}function I(n){if(u.isBuffer(n)){var a=T(n.length)|0,s=f(a);return s.length===0||n.copy(s,0,0,a),s}if(n.length!==void 0)return typeof n.length!="number"||Nr(n.length)?f(0):b(n);if(n.type==="Buffer"&&Array.isArray(n.data))return b(n.data)}function T(n){if(n>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return n|0}function S(n){return+n!=n&&(n=0),u.alloc(+n)}u.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==u.prototype},u.compare=function(n,a){if(le(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),le(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(n)||!u.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===a)return 0;for(var s=n.length,c=a.length,m=0,w=Math.min(s,c);m<w;++m)if(n[m]!==a[m]){s=n[m],c=a[m];break}return s<c?-1:c<s?1:0},u.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(n,a){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return u.alloc(0);var s;if(a===void 0)for(a=0,s=0;s<n.length;++s)a+=n[s].length;var c=u.allocUnsafe(a),m=0;for(s=0;s<n.length;++s){var w=n[s];if(le(w,Uint8Array))m+w.length>c.length?u.from(w).copy(c,m):Uint8Array.prototype.set.call(c,w,m);else if(u.isBuffer(w))w.copy(c,m);else throw new TypeError('"list" argument must be an Array of Buffers');m+=w.length}return c};function C(n,a){if(u.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||le(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);var s=n.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&s===0)return 0;for(var m=!1;;)switch(a){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Mr(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return It(n).length;default:if(m)return c?-1:Mr(n).length;a=(""+a).toLowerCase(),m=!0}}u.byteLength=C;function L(n,a,s){var c=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,a>>>=0,s<=a))return"";for(n||(n="utf8");;)switch(n){case"hex":return ke(this,a,s);case"utf8":case"utf-8":return se(this,a,s);case"ascii":return Le(this,a,s);case"latin1":case"binary":return Ye(this,a,s);case"base64":return J(this,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,a,s);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),c=!0}}u.prototype._isBuffer=!0;function U(n,a,s){var c=n[a];n[a]=n[s],n[s]=c}u.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<n;a+=2)U(this,a,a+1);return this},u.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<n;a+=4)U(this,a,a+3),U(this,a+1,a+2);return this},u.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<n;a+=8)U(this,a,a+7),U(this,a+1,a+6),U(this,a+2,a+5),U(this,a+3,a+4);return this},u.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?se(this,0,n):L.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(n){if(!u.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:u.compare(this,n)===0},u.prototype.inspect=function(){var n="",a=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(n+=" ... "),"<Buffer "+n+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(n,a,s,c,m){if(le(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),!u.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(a===void 0&&(a=0),s===void 0&&(s=n?n.length:0),c===void 0&&(c=0),m===void 0&&(m=this.length),a<0||s>n.length||c<0||m>this.length)throw new RangeError("out of range index");if(c>=m&&a>=s)return 0;if(c>=m)return-1;if(a>=s)return 1;if(a>>>=0,s>>>=0,c>>>=0,m>>>=0,this===n)return 0;for(var w=m-c,B=s-a,D=Math.min(w,B),X=this.slice(c,m),G=n.slice(a,s),j=0;j<D;++j)if(X[j]!==G[j]){w=X[j],B=G[j];break}return w<B?-1:B<w?1:0};function k(n,a,s,c,m){if(n.length===0)return-1;if(typeof s=="string"?(c=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Nr(s)&&(s=m?0:n.length-1),s<0&&(s=n.length+s),s>=n.length){if(m)return-1;s=n.length-1}else if(s<0)if(m)s=0;else return-1;if(typeof a=="string"&&(a=u.from(a,c)),u.isBuffer(a))return a.length===0?-1:H(n,a,s,c,m);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(n,a,s):Uint8Array.prototype.lastIndexOf.call(n,a,s):H(n,[a],s,c,m);throw new TypeError("val must be string, number or Buffer")}function H(n,a,s,c,m){var w=1,B=n.length,D=a.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(n.length<2||a.length<2)return-1;w=2,B/=2,D/=2,s/=2}function X(bt,Tt){return w===1?bt[Tt]:bt.readUInt16BE(Tt*w)}var G;if(m){var j=-1;for(G=s;G<B;G++)if(X(n,G)===X(a,j===-1?0:G-j)){if(j===-1&&(j=G),G-j+1===D)return j*w}else j!==-1&&(G-=G-j),j=-1}else for(s+D>B&&(s=B-D),G=s;G>=0;G--){for(var K=!0,ur=0;ur<D;ur++)if(X(n,G+ur)!==X(a,ur)){K=!1;break}if(K)return G}return-1}u.prototype.includes=function(n,a,s){return this.indexOf(n,a,s)!==-1},u.prototype.indexOf=function(n,a,s){return k(this,n,a,s,!0)},u.prototype.lastIndexOf=function(n,a,s){return k(this,n,a,s,!1)};function N(n,a,s,c){s=Number(s)||0;var m=n.length-s;c?(c=Number(c),c>m&&(c=m)):c=m;var w=a.length;c>w/2&&(c=w/2);for(var B=0;B<c;++B){var D=parseInt(a.substr(B*2,2),16);if(Nr(D))return B;n[s+B]=D}return B}function P(n,a,s,c){return or(Mr(a,n.length-s),n,s,c)}function F(n,a,s,c){return or(Jn(a),n,s,c)}function O(n,a,s,c){return or(It(a),n,s,c)}function Z(n,a,s,c){return or(Kn(a,n.length-s),n,s,c)}u.prototype.write=function(n,a,s,c){if(a===void 0)c="utf8",s=this.length,a=0;else if(s===void 0&&typeof a=="string")c=a,s=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(s)?(s=s>>>0,c===void 0&&(c="utf8")):(c=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-a;if((s===void 0||s>m)&&(s=m),n.length>0&&(s<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");for(var w=!1;;)switch(c){case"hex":return N(this,n,a,s);case"utf8":case"utf-8":return P(this,n,a,s);case"ascii":case"latin1":case"binary":return F(this,n,a,s);case"base64":return O(this,n,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,n,a,s);default:if(w)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),w=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(n,a,s){return a===0&&s===n.length?e.fromByteArray(n):e.fromByteArray(n.slice(a,s))}function se(n,a,s){s=Math.min(n.length,s);for(var c=[],m=a;m<s;){var w=n[m],B=null,D=w>239?4:w>223?3:w>191?2:1;if(m+D<=s){var X,G,j,K;switch(D){case 1:w<128&&(B=w);break;case 2:X=n[m+1],(X&192)===128&&(K=(w&31)<<6|X&63,K>127&&(B=K));break;case 3:X=n[m+1],G=n[m+2],(X&192)===128&&(G&192)===128&&(K=(w&15)<<12|(X&63)<<6|G&63,K>2047&&(K<55296||K>57343)&&(B=K));break;case 4:X=n[m+1],G=n[m+2],j=n[m+3],(X&192)===128&&(G&192)===128&&(j&192)===128&&(K=(w&15)<<18|(X&63)<<12|(G&63)<<6|j&63,K>65535&&K<1114112&&(B=K))}}B===null?(B=65533,D=1):B>65535&&(B-=65536,c.push(B>>>10&1023|55296),B=56320|B&1023),c.push(B),m+=D}return We(c)}var Ee=4096;function We(n){var a=n.length;if(a<=Ee)return String.fromCharCode.apply(String,n);for(var s="",c=0;c<a;)s+=String.fromCharCode.apply(String,n.slice(c,c+=Ee));return s}function Le(n,a,s){var c="";s=Math.min(n.length,s);for(var m=a;m<s;++m)c+=String.fromCharCode(n[m]&127);return c}function Ye(n,a,s){var c="";s=Math.min(n.length,s);for(var m=a;m<s;++m)c+=String.fromCharCode(n[m]);return c}function ke(n,a,s){var c=n.length;(!a||a<0)&&(a=0),(!s||s<0||s>c)&&(s=c);for(var m="",w=a;w<s;++w)m+=Qn[n[w]];return m}function Ie(n,a,s){for(var c=n.slice(a,s),m="",w=0;w<c.length-1;w+=2)m+=String.fromCharCode(c[w]+c[w+1]*256);return m}u.prototype.slice=function(n,a){var s=this.length;n=~~n,a=a===void 0?s:~~a,n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),a<0?(a+=s,a<0&&(a=0)):a>s&&(a=s),a<n&&(a=n);var c=this.subarray(n,a);return Object.setPrototypeOf(c,u.prototype),c};function _(n,a,s){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+a>s)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(n,a,s){n=n>>>0,a=a>>>0,s||_(n,a,this.length);for(var c=this[n],m=1,w=0;++w<a&&(m*=256);)c+=this[n+w]*m;return c},u.prototype.readUintBE=u.prototype.readUIntBE=function(n,a,s){n=n>>>0,a=a>>>0,s||_(n,a,this.length);for(var c=this[n+--a],m=1;a>0&&(m*=256);)c+=this[n+--a]*m;return c},u.prototype.readUint8=u.prototype.readUInt8=function(n,a){return n=n>>>0,a||_(n,1,this.length),this[n]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(n,a){return n=n>>>0,a||_(n,2,this.length),this[n]|this[n+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(n,a){return n=n>>>0,a||_(n,2,this.length),this[n]<<8|this[n+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(n,a){return n=n>>>0,a||_(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(n,a){return n=n>>>0,a||_(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},u.prototype.readIntLE=function(n,a,s){n=n>>>0,a=a>>>0,s||_(n,a,this.length);for(var c=this[n],m=1,w=0;++w<a&&(m*=256);)c+=this[n+w]*m;return m*=128,c>=m&&(c-=Math.pow(2,8*a)),c},u.prototype.readIntBE=function(n,a,s){n=n>>>0,a=a>>>0,s||_(n,a,this.length);for(var c=a,m=1,w=this[n+--c];c>0&&(m*=256);)w+=this[n+--c]*m;return m*=128,w>=m&&(w-=Math.pow(2,8*a)),w},u.prototype.readInt8=function(n,a){return n=n>>>0,a||_(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},u.prototype.readInt16LE=function(n,a){n=n>>>0,a||_(n,2,this.length);var s=this[n]|this[n+1]<<8;return s&32768?s|4294901760:s},u.prototype.readInt16BE=function(n,a){n=n>>>0,a||_(n,2,this.length);var s=this[n+1]|this[n]<<8;return s&32768?s|4294901760:s},u.prototype.readInt32LE=function(n,a){return n=n>>>0,a||_(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},u.prototype.readInt32BE=function(n,a){return n=n>>>0,a||_(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},u.prototype.readFloatLE=function(n,a){return n=n>>>0,a||_(n,4,this.length),r.read(this,n,!0,23,4)},u.prototype.readFloatBE=function(n,a){return n=n>>>0,a||_(n,4,this.length),r.read(this,n,!1,23,4)},u.prototype.readDoubleLE=function(n,a){return n=n>>>0,a||_(n,8,this.length),r.read(this,n,!0,52,8)},u.prototype.readDoubleBE=function(n,a){return n=n>>>0,a||_(n,8,this.length),r.read(this,n,!1,52,8)};function z(n,a,s,c,m,w){if(!u.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>m||a<w)throw new RangeError('"value" argument is out of bounds');if(s+c>n.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(n,a,s,c){if(n=+n,a=a>>>0,s=s>>>0,!c){var m=Math.pow(2,8*s)-1;z(this,n,a,s,m,0)}var w=1,B=0;for(this[a]=n&255;++B<s&&(w*=256);)this[a+B]=n/w&255;return a+s},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(n,a,s,c){if(n=+n,a=a>>>0,s=s>>>0,!c){var m=Math.pow(2,8*s)-1;z(this,n,a,s,m,0)}var w=s-1,B=1;for(this[a+w]=n&255;--w>=0&&(B*=256);)this[a+w]=n/B&255;return a+s},u.prototype.writeUint8=u.prototype.writeUInt8=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,1,255,0),this[a]=n&255,a+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,2,65535,0),this[a]=n&255,this[a+1]=n>>>8,a+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,2,65535,0),this[a]=n>>>8,this[a+1]=n&255,a+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,4,4294967295,0),this[a+3]=n>>>24,this[a+2]=n>>>16,this[a+1]=n>>>8,this[a]=n&255,a+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,4,4294967295,0),this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=n&255,a+4},u.prototype.writeIntLE=function(n,a,s,c){if(n=+n,a=a>>>0,!c){var m=Math.pow(2,8*s-1);z(this,n,a,s,m-1,-m)}var w=0,B=1,D=0;for(this[a]=n&255;++w<s&&(B*=256);)n<0&&D===0&&this[a+w-1]!==0&&(D=1),this[a+w]=(n/B>>0)-D&255;return a+s},u.prototype.writeIntBE=function(n,a,s,c){if(n=+n,a=a>>>0,!c){var m=Math.pow(2,8*s-1);z(this,n,a,s,m-1,-m)}var w=s-1,B=1,D=0;for(this[a+w]=n&255;--w>=0&&(B*=256);)n<0&&D===0&&this[a+w+1]!==0&&(D=1),this[a+w]=(n/B>>0)-D&255;return a+s},u.prototype.writeInt8=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,1,127,-128),n<0&&(n=255+n+1),this[a]=n&255,a+1},u.prototype.writeInt16LE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,2,32767,-32768),this[a]=n&255,this[a+1]=n>>>8,a+2},u.prototype.writeInt16BE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,2,32767,-32768),this[a]=n>>>8,this[a+1]=n&255,a+2},u.prototype.writeInt32LE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,4,2147483647,-2147483648),this[a]=n&255,this[a+1]=n>>>8,this[a+2]=n>>>16,this[a+3]=n>>>24,a+4},u.prototype.writeInt32BE=function(n,a,s){return n=+n,a=a>>>0,s||z(this,n,a,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=n&255,a+4};function W(n,a,s,c,m,w){if(s+c>n.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function ae(n,a,s,c,m){return a=+a,s=s>>>0,m||W(n,a,s,4,34028234663852886e22,-34028234663852886e22),r.write(n,a,s,c,23,4),s+4}u.prototype.writeFloatLE=function(n,a,s){return ae(this,n,a,!0,s)},u.prototype.writeFloatBE=function(n,a,s){return ae(this,n,a,!1,s)};function te(n,a,s,c,m){return a=+a,s=s>>>0,m||W(n,a,s,8,17976931348623157e292,-17976931348623157e292),r.write(n,a,s,c,52,8),s+8}u.prototype.writeDoubleLE=function(n,a,s){return te(this,n,a,!0,s)},u.prototype.writeDoubleBE=function(n,a,s){return te(this,n,a,!1,s)},u.prototype.copy=function(n,a,s,c){if(!u.isBuffer(n))throw new TypeError("argument should be a Buffer");if(s||(s=0),!c&&c!==0&&(c=this.length),a>=n.length&&(a=n.length),a||(a=0),c>0&&c<s&&(c=s),c===s||n.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),n.length-a<c-s&&(c=n.length-a+s);var m=c-s;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,s,c):Uint8Array.prototype.set.call(n,this.subarray(s,c),a),m},u.prototype.fill=function(n,a,s,c){if(typeof n=="string"){if(typeof a=="string"?(c=a,a=0,s=this.length):typeof s=="string"&&(c=s,s=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!u.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(n.length===1){var m=n.charCodeAt(0);(c==="utf8"&&m<128||c==="latin1")&&(n=m)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(a<0||this.length<a||this.length<s)throw new RangeError("Out of range index");if(s<=a)return this;a=a>>>0,s=s===void 0?this.length:s>>>0,n||(n=0);var w;if(typeof n=="number")for(w=a;w<s;++w)this[w]=n;else{var B=u.isBuffer(n)?n:u.from(n,c),D=B.length;if(D===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(w=0;w<s-a;++w)this[w+a]=B[w%D]}return this};var be=/[^+/0-9A-Za-z-_]/g;function ar(n){if(n=n.split("=")[0],n=n.trim().replace(be,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Mr(n,a){a=a||1/0;for(var s,c=n.length,m=null,w=[],B=0;B<c;++B){if(s=n.charCodeAt(B),s>55295&&s<57344){if(!m){if(s>56319){(a-=3)>-1&&w.push(239,191,189);continue}else if(B+1===c){(a-=3)>-1&&w.push(239,191,189);continue}m=s;continue}if(s<56320){(a-=3)>-1&&w.push(239,191,189),m=s;continue}s=(m-55296<<10|s-56320)+65536}else m&&(a-=3)>-1&&w.push(239,191,189);if(m=null,s<128){if((a-=1)<0)break;w.push(s)}else if(s<2048){if((a-=2)<0)break;w.push(s>>6|192,s&63|128)}else if(s<65536){if((a-=3)<0)break;w.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((a-=4)<0)break;w.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return w}function Jn(n){for(var a=[],s=0;s<n.length;++s)a.push(n.charCodeAt(s)&255);return a}function Kn(n,a){for(var s,c,m,w=[],B=0;B<n.length&&!((a-=2)<0);++B)s=n.charCodeAt(B),c=s>>8,m=s%256,w.push(m),w.push(c);return w}function It(n){return e.toByteArray(ar(n))}function or(n,a,s,c){for(var m=0;m<c&&!(m+s>=a.length||m>=n.length);++m)a[m+s]=n[m];return m}function le(n,a){return n instanceof a||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===a.name}function Nr(n){return n!==n}var Qn=function(){for(var n="0123456789abcdef",a=new Array(256),s=0;s<16;++s)for(var c=s*16,m=0;m<16;++m)a[c+m]=n[s]+n[m];return a}()}),Ki=kr((t,e)=>{g();var r=e.exports={},i,o;function l(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=l}catch(T){i=l}try{typeof clearTimeout=="function"?o=clearTimeout:o=f}catch(T){o=f}})();function u(T){if(i===setTimeout)return setTimeout(T,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(T,0);try{return i(T,0)}catch(S){try{return i.call(null,T,0)}catch(C){return i.call(this,T,0)}}}function d(T){if(o===clearTimeout)return clearTimeout(T);if((o===f||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(T);try{return o(T)}catch(S){try{return o.call(null,T)}catch(C){return o.call(this,T)}}}var h=[],v=!1,p,x=-1;function b(){!v||!p||(v=!1,p.length?h=p.concat(h):x=-1,h.length&&E())}function E(){if(!v){var T=u(b);v=!0;for(var S=h.length;S;){for(p=h,h=[];++x<S;)p&&p[x].run();x=-1,S=h.length}p=null,v=!1,d(T)}}r.nextTick=function(T){var S=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)S[C-1]=arguments[C];h.push(new A(T,S)),h.length===1&&!v&&u(E)};function A(T,S){this.fun=T,this.array=S}A.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function I(){}r.on=I,r.addListener=I,r.once=I,r.off=I,r.removeListener=I,r.removeAllListeners=I,r.emit=I,r.prependListener=I,r.prependOnceListener=I,r.listeners=function(T){return[]},r.binding=function(T){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(T){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),je,Qi,ea,g=Wi(()=>{je=q(Ji()),Qi=q(Ki()),ea=function(t){function e(){var i=this||self;return delete t.prototype.__magic__,i}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object)}),Cn={};Yi(Cn,{SendFormContainer:()=>rs});Zn.exports=Hi(Cn);g();var Xe=q(require("react")),ra=require("@terradharitri/sdk-dapp/constants/index"),ta=require("formik");g();g();g();var Xt="600000000",na=10,Br="500000",ia=75e4,aa=1e6,oa=2e5,ua="5000000000000000",M="0";g();var re=q(require("react")),sa=require("@terradharitri/sdk-dapp/constants/index");g();g();g();var la=q(require("axios"));g();g();g();var fa=require("@terradharitri/sdk-dapp/apiCalls/configuration/getServerConfiguration");g();var ca=require("@terradharitri/sdk-dapp/constants/index");g();var ha={D:"devnet",T:"testnet",1:"mainnet"};function gt(t){return ha[t]}function da(t){let e=gt(t),r=ca.fallbackNetworkConfigurations[e].apiAddress;if(!r)throw"Could not extract api address for environment, check if you have a valid chainID";return r}function Fn(t){return R(this,null,function*(){let e=da(t);return yield(0,fa.getServerConfiguration)(e)})}g();var pa={mainnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqxwakt2g7u9atsnr03gqcgmhcv38pt7mkd94q8vqld4",delegationContractData:{minGasLimit:"75000000"}},devnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqeyzkqc",delegationContractData:{minGasLimit:"75000000"}},testnet:{delegationContract:"drt1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqeyzkqc",delegationContractData:{minGasLimit:"75000000"}}};function ma(t){let e=gt(t);return e?pa[e]:null}var qr={value:null};function ht(t){return qr.value={baseURL:t.apiAddress,timeout:Number(t.apiTimeout)},qr.value}function xe(t){return R(this,null,function*(){if(qr.value!=null)return qr.value;if(console.error("Cannot get API config before initialization, make sure to call setApiConfig first"),t!=null){let r=yield Fn(t);return ht(r)}let e="Cannot get api config, make sure to initialize the context before calling APIs";throw console.error(e),e})}function ga(t,e){return R(this,null,function*(){let r=e||(yield xe()),{data:i}=yield la.default.get(`/accounts/${t}`,r);return i})}g();g();var va=q(require("axios"));function ya(){return R(this,null,function*(){try{let t=yield xe(),{data:e}=yield va.default.get("economics",t);return e}catch(t){return console.error("err fetching economics info",t),null}})}g();g();var Jt=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),ls=require("@terradharitri/sdk-dapp/apiCalls/tokens/getPersistedToken"),wa=q(require("axios")),Ea=q(require("lodash/uniqBy")),xa=1e3,dt=100;function Aa(t){return R(this,arguments,function*({address:e,size:r,from:i,search:o}){let l=new URLSearchParams(ge($($({},i!=null&&r!=null?{from:String(i),size:String(r)}:{}),o?{search:o}:{}),{includeMetaDCDT:"true"})).toString(),f=yield xe();return wa.default.get(`/${Jt.ACCOUNTS_ENDPOINT}/${e}/${Jt.TOKENS_ENDPOINT}?${l}`,f)})}function Ia(t){return R(this,arguments,function*({address:e,page:r=1,search:i,size:o}){let l={address:e,search:i};o!=null&&(l.from=(r-1)*dt,l.size=dt);let{data:f}=yield Aa(l);return f})}function ba(t){return R(this,null,function*(){let e=[],r=!0,i=1;for(;r;)try{let o=yield Ia({address:t,size:xa,page:i});if(o==null||(o==null?void 0:o.length)===0){r=!1;break}let l=o.map(f=>$({},f));if(e.push(...l),o.length!=dt){r=!1;break}i++}catch(o){console.log(o),r=!1}return(0,Ea.default)(e,o=>o.identifier)})}g();var Ta=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),Ba=q(require("axios"));g();g();g();var Ce=require("@terradharitri/sdk-dapp/types/tokens.types");g();var Ln=(t=>(t.receiver="receiver",t.gasPrice="gasPrice",t.data="data",t.tokenId="tokenId",t.amount="amount",t.gasLimit="gasLimit",t.receiverUsername="receiverUsername",t.rawReceiverUsername="rawReceiverUsername",t.senderUsername="senderUsername",t))(Ln||{});g();g();function qa(t,e){return R(this,null,function*(){if(t.type!==Ce.NftEnumType.MetaDCDT)return null;let r=e||(yield xe());try{let{data:i}=yield Ba.default.get(`/${Ta.COLLECTIONS_ENDPOINT}/${t.collection}`,r);return(i==null?void 0:i.canTransfer)===!1?i==null?void 0:i.roles.map(({address:o,canTransfer:l})=>l?o:"").filter(o=>Boolean(o)):null}catch(i){return console.error(`Unable to get canTransfer information for collection ${t.collection}`,i),null}})}g();var fs=require("@terradharitri/sdk-dapp/apiCalls/endpoints"),cs=q(require("axios"));g();g();var Sa=q(require("axios"));function Ca(t){return R(this,null,function*(){try{let e=yield xe(),{data:r}=yield Sa.default.post("/transaction/cost",t,e);return{data:r,success:!0}}catch(e){return console.error(e),{success:!1}}})}g();var vt=q(require("react")),kn=(0,vt.createContext)({});function Fa({children:t,value:e}){return vt.default.createElement(kn.Provider,{value:e},t)}function Fe(){return(0,vt.useContext)(kn)}g();g();var oe=q(require("react")),La=require("@terradharitri/sdk-dapp/constants/index"),ka=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Qr=q(require("bignumber.js")),Ua=require("formik");g();g();g();var Sr=require("bech32"),Da=t=>{let e=Sr.bech32.toWords(je.Buffer.from(t,"hex"));return Sr.bech32.encode("drt",e)},Ra=t=>{let e=Sr.bech32.decode(t,256);return je.Buffer.from(Sr.bech32.fromWords(e.words)).toString("hex")},Pa={encode:Da,decode:Ra};g();g();var Cr=({initialValues:t,gasLimit:e,touched:r})=>t.gasLimit!==e&&r.gasLimit;g();var Ga=(t,e)=>typeof e=="boolean"?e:Array.isArray(e)&&e.includes(t);g();var Un=t=>!["REWA","DCDT"].includes(t);g();var Ma=t=>Boolean(t==null?void 0:t.startsWith("drt1"));g();var Na=require("@terradharitri/sdk-dapp/constants"),_a=require("@terradharitri/sdk-dapp/utils/account/getAccount"),Oa=t=>R(void 0,null,function*(){let e=t.txType==="REWA"?t.amount:Na.ZERO,r=Un(t.txType),i=yield(0,_a.getAccount)(t.receiver),o=i==null?void 0:i.username,l=r?t.senderUsername:o,f=ge($({},t),{amount:e,receiverUsername:l});return delete f.rawReceiverUsername,f});g();g();var hs=require("@terradharitri/sdk-dapp/utils/transactions/transactionInfoHelpers/getScamFlag");g();var ds=require("@terradharitri/sdk-dapp/utils/buildUrlParams");g();var ps=q(require("anchorme"));g();g();var Va=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),rr=require("@terradharitri/sdk-dapp/utils/operations/formatAmount"),ms=require("@terradharitri/sdk-dapp/utils/operations/getUsdValue"),ue=require("@terradharitri/sdk-dapp/utils/operations/parseAmount");g();g();var pe=q(require("react")),$a=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType"),ja=require("formik");g();g();var Kt=require("@terradharitri/sdk-dapp/constants/index"),za=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),et=q(require("bignumber.js"));g();g();var gs=require("@terradharitri/sdk-dapp/constants/index");g();var Wa=require("@terradharitri/sdk-dapp/constants/index"),Ur=(t="")=>{let e=ia+t.length*Wa.GAS_PER_DATA_BYTE;return t.startsWith("DCDTNFTBurn")?oa.toString():String(Math.max(e,aa))};g();var Qt=require("@terradharitri/sdk-dapp/constants/index"),en=q(require("bignumber.js"));g();var Ya=require("@terradharitri/sdk-dapp/constants/index");function ze(t=!1){return t?Ya.EXTRA_GAS_LIMIT_GUARDED_TX:0}var Dr=({data:t,isGuarded:e})=>{let r=new en.default(Qt.GAS_LIMIT),i=new en.default(Qt.GAS_PER_DATA_BYTE),o=t?i.times(je.Buffer.from(t).length):0,l=ze(e);return r.plus(o).plus(l).toString(10)};g();var Ha=require("@terradharitri/sdk-dapp/constants/index");function yt({tokens:t,tokenId:e}){let r=t.find(({identifier:l})=>l===e),i=r?r.decimals:Ha.DECIMALS,o=(r==null?void 0:r.balance)||M;return ge($({},r),{decimals:i,identifier:(r==null?void 0:r.identifier)||"",name:(r==null?void 0:r.name)||"",ticker:(r==null?void 0:r.ticker)||"",balance:o})}var Ir=yt;g();g();var Me=require("@terradharitri/sdk-core"),Za=require("@terradharitri/sdk-dapp/constants/index"),Xa=q(require("bignumber.js"));function Dn({amount:t,data:e,nonce:r,receiver:i,receiverUsername:o,sender:l,senderUsername:f,gasPrice:u,gasLimit:d,chainId:h}){let v=new Xa.default((0,ue.parseAmount)(t));return new Me.Transaction({nonce:r,value:Me.TokenPayment.rewaFromBigInteger(v.toString(10)),sender:new Me.Address(l),receiver:new Me.Address(i),gasPrice:parseInt(u),gasLimit:parseInt(d),senderUsername:f,receiverUsername:o,data:new Me.TransactionPayload(e),chainID:h,version:new Me.TransactionVersion(Za.VERSION)})}g();function Rr(t){return isNaN(Number(t))||t===""?(0,ue.parseAmount)("0"):(0,ue.parseAmount)(t)}function Ja(t){return R(this,null,function*(){let{address:e,balance:r,chainId:i,nonce:o,values:l}=t,{amount:f,receiver:u,data:d,gasLimit:h,gasPrice:v,nft:p,receiverUsername:x,senderUsername:b}=l,E=Boolean(p)?e:u;try{return Dn({balance:r,amount:String(f),gasLimit:String(h),gasPrice:Rr(v),data:d.trim(),receiver:E,receiverUsername:x,senderUsername:b,sender:e,nonce:o,chainId:i})}catch(A){throw console.log("Prepare transaction error",A),A}})}g();var vs=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger");g();var Ka=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType");function Rn({nft:t,tokenId:e}){let{isDcdt:r,isNft:i,isRewa:o}=(0,Ka.getIdentifierType)(e);return o?"REWA":(t==null?void 0:t.type)===Ce.NftEnumType.NonFungibleDCDT?"NonFungibleDCDT":(t==null?void 0:t.type)===Ce.NftEnumType.SemiFungibleDCDT?"SemiFungibleDCDT":(t==null?void 0:t.type)===Ce.NftEnumType.MetaDCDT||i?"MetaDCDT":r?"DCDT":"REWA"}g();var pt=q(require("bignumber.js")),Fr=t=>t.length%2===0?t:`0${t}`,Qa=({amount:t,decimals:e,tokenId:r})=>{let i=Boolean(t)?t:M,o=Fr(je.Buffer.from(r).toString("hex")),l=Fr(new pt.default((0,ue.parseAmount)(i,e)).toString(16));return`DCDTTransfer@${o}@${l}`},eo=({nft:t,amount:e,receiver:r,errors:i})=>{if(!(t&&e&&r&&!i))return"";try{let o="DCDTNFTTransfer",l=(t==null?void 0:t.type)===Ce.NftEnumType.MetaDCDT?(0,ue.parseAmount)(e,t.decimals):e;return o+=`@${je.Buffer.from(String(t.collection)).toString("hex")}`,o+=`@${Fr(new pt.default(String(t.nonce)).toString(16))}`,o+=`@${Fr(new pt.default(l).toString(16))}`,o+=`@${Pa.decode(r)}`,o}catch(o){return""}},ro=({txType:t,values:e,nft:r,amountError:i,receiverError:o})=>{let{tokens:l,tokenId:f,amount:u,receiver:d}=e;if(l&&t==="DCDT"&&!i){let{decimals:h}=Ir({tokens:l,tokenId:f});return Qa({amount:u,tokenId:f,decimals:h})}return t!=="REWA"?eo({nft:r,amount:u,receiver:d,errors:Boolean(i||o)}):e.data};g();var ys=require("@terradharitri/sdk-dapp/constants/index"),ws=require("@terradharitri/sdk-dapp/utils/smartContracts"),Es=require("@terradharitri/sdk-dapp/utils/validation/getIdentifierType"),xs=q(require("bignumber.js"));g();var to=q(require("bignumber.js")),no=t=>R(void 0,[t],function*({balance:e,address:r,isGuarded:i,nonce:o,values:l,chainId:f}){var u,d,h;let{amount:v,receiver:p,data:x,gasLimit:b,gasPrice:E}=l,A=Dn({balance:e,amount:String(v),gasLimit:String(b),gasPrice:Rr(E),data:x.trim(),receiver:p,sender:r,nonce:o,chainId:f}).toPlainObject(),{data:I,success:T}=yield Ca(ge($({},A),{sender:r})),S=Number((u=I==null?void 0:I.data)==null?void 0:u.txGasUnits),C=(d=I==null?void 0:I.data)==null?void 0:d.returnMessage;if(!Boolean(T&&(I==null?void 0:I.code)==="successful"&&S&&S!==0))return{gasLimit:b,gasLimitCostError:(h=I==null?void 0:I.data)==null?void 0:h.returnMessage};if(!C)return{gasLimit:new to.default(S).times(na).dividedToIntegerBy(100).plus(S).toString(10)};let L=Dr({data:l.data?l.data.trim():"",isGuarded:i});return{gasLimit:String(S)===M?L:String(S)}});g();var rt=require("@terradharitri/sdk-dapp/constants/index"),io=q(require("bignumber.js")),rn,tn,nn,$e=(0,rr.formatAmount)({input:String((rn=rt.GAS_PRICE)!=null?rn:1e9),decimals:(tn=rt.DECIMALS)!=null?tn:18,showLastNonZeroDecimal:!0,digits:(nn=rt.DIGITS)!=null?nn:4}),mt=new io.default($e).times(10).toString(10);g();var Lr=require("@terradharitri/sdk-dapp/constants/index"),br=q(require("bignumber.js"));function ao({balance:t=M,gasLimit:e=M,gasPrice:r,decimals:i,digits:o,data:l="",chainId:f}){let u=new br.default(t),d=new br.default(ua),h=new br.default((0,Va.calculateFeeLimit)({gasPrice:r,gasLimit:e,data:l,chainId:f,gasPerDataByte:String(Lr.GAS_PER_DATA_BYTE),gasPriceModifier:String(Lr.GAS_PRICE_MODIFIER)})),v=u.minus(h),p=v.minus(d),x=v.isGreaterThanOrEqualTo(0)?(0,rr.formatAmount)({input:v.toString(10),decimals:i,digits:o,showLastNonZeroDecimal:!0,addCommas:!1}):M,b=p.isGreaterThanOrEqualTo(0)?(0,rr.formatAmount)({input:p.toString(10),decimals:i,digits:o,showLastNonZeroDecimal:!0,addCommas:!1}):x;return{entireBalance:x,entireBalanceMinusDust:b,parsedEntireBalance:v.isGreaterThan(0)?v.toString(10):M}}function an({balance:t=M,decimals:e=Lr.DECIMALS,digits:r=Lr.DIGITS}){let i=new br.default(t);if(i.isGreaterThanOrEqualTo(0)){let o=i.toString(10);return(0,rr.formatAmount)({input:o,decimals:e,digits:r>e?e:r,showLastNonZeroDecimal:!0,addCommas:!1})}return M}g();var oo=q(require("bignumber.js"));function Pn({txType:t,data:e="",isGuarded:r}){let i=ze(r),o=Ur();return t==="DCDT"&&(o=Br),t==="REWA"&&(o=Dr({data:e.trim()})),new oo.default(o).plus(i).toString(10)}var Pr=({amount:t,balance:e,gasPrice:r,gasLimit:i,data:o,chainId:l})=>{let f=(0,ue.parseAmount)(t.toString()),u=new et.default(f),d=new et.default(e),h=new et.default((0,za.calculateFeeLimit)({gasPrice:Rr(r),gasLimit:i,data:o,chainId:l,gasPerDataByte:String(Kt.GAS_PER_DATA_BYTE),gasPriceModifier:String(Kt.GAS_PRICE_MODIFIER)}));return d.isGreaterThanOrEqualTo(u.plus(h))};g();g();var pr=require("yup");g();var on=require("@terradharitri/sdk-dapp/constants/ledger.constants"),uo=q(require("@terradharitri/sdk-dapp/utils/operations/ledger/getLedgerVersionOptions")),wt=require("yup"),so=(0,wt.string)().test("ledgerDataActive","Data option is disabled in the Ledger DharitrI app",function(t){let{ledger:e}=this.parent;return!(e&&t&&t.length&&!e.ledgerDataActive)}),lo=(0,wt.string)().test({name:"hashSign",test:function(t){let{ledger:e,isGuarded:r}=this.parent;if(e){let{ledgerWithHashSign:i,ledgerWithGuardians:o}=(0,uo.default)(e.version);if(t&&t.length>300&&!i)return this.createError({message:`Data too long. You need at least DharitrI app version ${on.LEDGER_HASH_SIGN_MINIMUM_VERSION}. Update DharitrI app to continue`,path:"data"});if(r&&!o)return this.createError({message:`You need at least DharitrI app version ${on.LEDGER_WITH_GUARDIANS_MINIMUM_VERSION} to use Guardians`,path:"data"})}return!0}}),fo=[so,lo],co=fo.reduce((t,e)=>t.concat(e),(0,wt.string)()),ho=co;g();var po=require("@terradharitri/sdk-dapp/constants/index"),mo=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),un=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Je=require("yup"),go=t=>{let e=(0,Je.string)().required(t.required),r=(0,Je.string)().test("decimalFormat",t.maxDecimalsAllowed(po.DECIMALS),l=>(0,mo.maxDecimals)(String(l))),i=(0,Je.string)().test("funds",t.insufficientFunds,function(l){if(l&&(0,un.stringIsFloat)(l)){let{gasLimit:f,data:u,gasPrice:d,balance:h,chainId:v}=this.parent;return Pr({amount:l,balance:h,gasLimit:f,gasPrice:d,data:u,chainId:v})}return!0}),o=(0,Je.string)().test("isValidNumber",t.invalidNumber,l=>Boolean(l&&(0,un.stringIsFloat)(l)));return[e,o,r,i].reduce((l,f)=>l.concat(f),(0,Je.string)())},vo=go;g();var yo=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),sn=q(require("bignumber.js")),mr=require("yup");g();var wo=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),ln=q(require("bignumber.js")),tt=require("yup"),Et=t=>{let e=(0,tt.string)().required(t.required),r=(0,tt.string)().test("isValidInteger",t.invalidNumber,o=>{let l=o&&(0,wo.stringIsInteger)(o);return Boolean(l)}),i=(0,tt.string)().test("maximum",t.tooHighGasLimit(Xt),o=>{let l=new ln.default(String(o)),f=new ln.default(Xt),u=o&&f.comparedTo(l)>=0;return Boolean(u)});return[e,r,i]},Eo=t=>{let e=(0,mr.string)().required(t.required),r=(0,mr.string)().test("funds",t.insufficientFunds,function(o){let{data:l,gasPrice:f,amount:u,balance:d,chainId:h,ignoreTokenBalance:v}=this.parent;return v?!0:u&&(0,yo.stringIsFloat)(u)&&o!=null?Pr({amount:u,balance:d,gasLimit:o,gasPrice:f,data:l,chainId:h}):!0}),i=(0,mr.string)().test({name:"minValueData",test:function(o){let l=this.parent,{data:f,ignoreTokenBalance:u,isGuarded:d}=l;if(u)return!0;let h=Dr({data:f?f.trim():"",isGuarded:d});if(o){let v=new sn.default(o),p=new sn.default(h);if(!(o&&v.isGreaterThanOrEqualTo(p)))return this.createError({message:t.tooLowGasLimit(h),path:"gasLimit"})}return!0}});return[e,...Et(t),r,i].reduce((o,l)=>o.concat(l),(0,mr.string)())},xo=Eo;g();var Ao=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),Io=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),nt=q(require("bignumber.js")),Ne=require("yup"),bo=t=>{let e=(0,Ne.string)().required(t.required),r=(0,Ne.string)().test({name:"decimalFormat",test:function(f){let{tokenId:u,tokens:d}=this.parent;if(d){let{decimals:h}=Ir({tokens:d,tokenId:u});return(0,Ao.maxDecimals)(String(f),h)?!0:this.createError({message:t.maxDecimalsAllowed(h),path:"amount"})}return!0}}),i=(0,Ne.string)().test("tokenBalance",t.insufficientFunds,function(f){let{ignoreTokenBalance:u,tokens:d}=this.parent;if(f!==void 0&&!u&&d){let{decimals:h,balance:v}=Ir({tokens:d,tokenId:this.parent.tokenId}),p=(0,ue.parseAmount)(f.toString(),h),x=new nt.default(p);return new nt.default(v).comparedTo(x)>=0}return!0}),o=(0,Ne.string)().test("greaterThanZero",t.cannotBeZero,function(f){let{tokens:u,ignoreTokenBalance:d}=this.parent;if(!d&&f!=null&&u){let{decimals:h}=Ir({tokens:u,tokenId:this.parent.tokenId}),v=(0,ue.parseAmount)(f.toString(),h);return new nt.default(v).isGreaterThan(0)}return!0}),l=(0,Ne.string)().test("isValidNumber",t.invalidNumber,f=>Boolean(f&&(0,Io.stringIsFloat)(f)));return[e,r,i,o,l].reduce((f,u)=>f.concat(u),(0,Ne.string)())},To=bo;g();var fn=q(require("bignumber.js")),gr=require("yup"),Bo=t=>{let e=(0,gr.string)().required(t.required),r=(0,gr.string)().test("minValue",t.tooLowGasLimit(Br),function(o){let l=this.parent,{ignoreTokenBalance:f,isGuarded:u}=l;if(f)return!0;let d=new fn.default(o),h=new fn.default(Br).plus(ze(u));return o&&d.isGreaterThanOrEqualTo(h)}),i=(0,gr.string)().test("funds",t.insufficientFunds,function(o){let{data:l,gasPrice:f,ignoreTokenBalance:u,balance:d,chainId:h}=this.parent;return o&&!u?Pr({amount:M,balance:d,gasLimit:o,gasPrice:f,data:l,chainId:h}):!0});return[e,...Et(t),i,r].reduce((o,l)=>o.concat(l),(0,gr.string)())},qo=Bo;g();var So=require("@terradharitri/sdk-dapp/constants/index"),Co=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),Fo=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),vr=q(require("bignumber.js")),_e=require("yup"),Lo=t=>{let e=(0,_e.string)().required(t.required),r=(0,_e.string)().test("decimalFormat",t.maxDecimalsAllowed(So.DECIMALS),f=>(0,Co.maxDecimals)(String(f))),i=(0,_e.string)().test("minimum",t.tooLowGasPrice($e),f=>{let u=new vr.default(String(f)),d=new vr.default($e),h=f&&u.isGreaterThanOrEqualTo(d);return Boolean(h)}),o=(0,_e.string)().test("maximum",t.tooHighGasPrice(mt),f=>{let u=new vr.default(String(f)),d=new vr.default(mt),h=f&&u.isLessThanOrEqualTo(d);return Boolean(h)}),l=(0,_e.string)().test("isValidNumber",t.invalidNumber,f=>Boolean(f&&(0,Fo.stringIsFloat)(f)));return[e,r,i,o,l].reduce((f,u)=>f.concat(u),(0,_e.string)())},ko=Lo;g();var Uo=require("@terradharitri/sdk-dapp/utils/validation/maxDecimals"),Do=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),Ro=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),Ke=q(require("bignumber.js")),Oe=require("yup"),Po=t=>{let e=(0,Oe.string)().required(t.required),r=(0,Oe.string)().test({name:"formatDecimals",test:function(f){let{nft:u,txType:d}=this.parent;return d!=="MetaDCDT"||(0,Uo.maxDecimals)(String(f),u==null?void 0:u.decimals)?!0:this.createError({message:t.maxDecimalsAllowed(u==null?void 0:u.decimals),path:"amount"})}}),i=(0,Oe.string)().test("balance",t.insufficientFunds,function(f){let{txType:u,nft:d}=this.parent;if(!f)return!0;if(u==="MetaDCDT"){let h=(0,ue.parseAmount)(f,d==null?void 0:d.decimals),v=new Ke.default(h);return new Ke.default((d==null?void 0:d.balance)||M).isGreaterThanOrEqualTo(v)}if(u==="SemiFungibleDCDT"){let h=new Ke.default(f);return new Ke.default((d==null?void 0:d.balance)||M).isGreaterThanOrEqualTo(h)}return!0}),o=(0,Oe.string)().test("nonZero",t.cannotBeZero,function(f){let u=this.parent,{ignoreTokenBalance:d}=u;return!f||d?!0:!new Ke.default(f).isZero()}),l=(0,Oe.string)().test("isValidNumber",t.invalidNumber,function(f){let{nft:u}=this.parent;return(u==null?void 0:u.type)===Ce.NftEnumType.MetaDCDT?Boolean(f&&(0,Do.stringIsFloat)(f)):Boolean(f&&(0,Ro.stringIsInteger)(f))});return[e,l,i,r,o].reduce((f,u)=>f.concat(u),(0,Oe.string)())},Go=Po;g();var cn=q(require("bignumber.js")),yr=require("yup"),Mo=t=>{let e=(0,yr.string)().required(t.required),r=(0,yr.string)().test({name:"minValueData",test:function(o){let l=this.parent,{data:f,ignoreTokenBalance:u,isGuarded:d}=l;if(u)return!0;let h=Ur(f?f.trim():"");if(o){let v=new cn.default(o),p=new cn.default(h).plus(ze(d));if(!(o&&v.isGreaterThanOrEqualTo(p)))return this.createError({message:t.tooLowGasLimit(p.toString()),path:"gasLimit"})}return!0}}),i=(0,yr.string)().test("funds",t.insufficientFunds,function(o){let{data:l,gasPrice:f,balance:u,chainId:d,ignoreTokenBalance:h}=this.parent;return o&&!h?Pr({amount:M,balance:u,gasLimit:o,gasPrice:f,data:l,chainId:d}):!0});return[e,...Et(t),i,r].reduce((o,l)=>o.concat(l),(0,yr.string)())},No=Mo;g();var _o=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),Qe=require("yup"),Oo=t=>{let e=(0,Qe.string)().required(t.required),r=(0,Qe.string)().test("addressIsValid",t.invalidAddress,l=>Boolean(l&&(0,_o.addressIsValid)(l))),i=(0,Qe.string)().test("sameAddress",t.sameAsOwnerAddress,function(l){let{ignoreTokenBalance:f,txType:u,readonly:d,address:h,isBurn:v}=this.parent;return Un(u)&&!f&&!d&&!v?h!==l:!0}),o=(0,Qe.string)().test("canTransfer",t.receiverNotAllowed,function(l){let{nft:f,txType:u,ignoreTokenBalance:d,address:h}=this.parent,v=u==="MetaDCDT",p=d,x=f==null?void 0:f.allowedReceivers;return!l||!v||p||x==null||x.includes(h)?!0:x.includes(l)});return[e,r,i,o].reduce((l,f)=>l.concat(f),(0,Qe.string)())},Vo=Oo;g();var $o=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),hn=require("yup"),jo=t=>[(0,hn.string)().test("invalidHerotag",t.invalidHerotag,function(e){let{receiver:r}=this.parent;if((r==null?void 0:r.startsWith("drt1"))||!e&&!r)return!0;let i=e&&(0,$o.addressIsValid)(r);return Boolean(i)})].reduce((e,r)=>e.concat(r),(0,hn.string)()),zo=jo,Gn=t=>(0,pr.object)().shape({receiver:Vo(t),receiverUsername:zo(t),tokenId:(0,pr.string)().required(t.required),gasPrice:ko(t),data:ho,amount:(0,pr.string)().when(["txType"],function(e){switch(e){case"DCDT":return To(t);case"REWA":return vo(t);default:return Go(t)}}),gasLimit:(0,pr.string)().when(["txType"],function(e){switch(e){case"DCDT":return qo(t);case"REWA":return xo(t);default:return No(t)}})}),Wo=({prefilledForm:t,initialValues:e,errorMessages:r})=>{if(!t||!e)return{};try{return Gn(r).validateSync(e),{}}catch(i){let{path:o,message:l}=i;return{[String(o)]:l}}};g();var Yo=({shouldValidateForm:t,errors:e,touched:r})=>i=>Boolean(e[i]&&(r[i]||t));g();var Mn=(0,pe.createContext)({});function Ho({children:t,value:e}){let{skipToConfirm:r}=e,[i,o]=(0,pe.useState)(Boolean(r)),[l,f]=(0,pe.useState)(!1),[u,d]=(0,pe.useState)(Date.now()),{values:h,errors:v,touched:p,validateForm:x,setFieldTouched:b,setErrors:E,isValid:A,handleSubmit:I}=(0,ja.useFormikContext)(),T=(0,pe.useCallback)(e.onCloseForm,[]),{isDcdt:S,isNft:C,isRewa:L}=(0,$a.getIdentifierType)(h.tokenId),U=(0,pe.useCallback)(Yo({shouldValidateForm:i,errors:v,touched:p}),[i,v,p]),k=(0,pe.useCallback)(()=>R(this,null,function*(){o(!0),Object.values(Ln).forEach(F=>{b(F,!0)});let P=yield x();if(Object.keys(P).length===0){e.setIsFormSubmitted(!0);return}v.gasLimit||P.gasPrice?(E(P),d(Date.now())):b("gasLimit",!1)}),[v,x]),H=(0,pe.useCallback)(()=>{l?f(!1):e.setIsFormSubmitted(!1)},[l]),N=ge($({},e),{checkInvalid:U,isRewaTransaction:L,isDcdtTransaction:S,isNftTransaction:C,shouldValidateForm:i,areValidatedValuesReady:Boolean(e.isFormSubmitted||r)&&A,isGuardianScreenVisible:l,setIsGuardianScreenVisible:f,isFormValid:A,renderKey:u,txType:h.txType,onValidateForm:k,onInvalidateForm:H,onCloseForm:T,onSubmitForm:I});return pe.default.createElement(Mn.Provider,{value:N},t)}function Ae(){return(0,pe.useContext)(Mn)}g();g();var me=q(require("react")),Zo=require("formik"),Xo=q(require("lodash/uniqBy"));g();g();var er=q(require("react")),Nn=(0,er.createContext)({});function Jo({children:t,value:{networkConfig:e}}){let[r,i]=(0,er.useState)(null);(0,er.useEffect)(()=>{o()},[e]);function o(){let l=ma(e.id);i(l)}return er.default.createElement(Nn.Provider,{value:{networkConfig:e,delegationContractData:r}},t)}function nr(){return(0,er.useContext)(Nn)}g();g();var dn=require("react"),Ko=require("@terradharitri/sdk-dapp/constants/index"),it=require("@terradharitri/sdk-dapp/types/enums.types");function Qo(){let{networkConfig:t}=nr(),[e,r]=(0,dn.useState)(0);function i(){return R(this,null,function*(){let o=yield ya(),l=(o==null?void 0:o.price)||0;r(l)})}return(0,dn.useEffect)(()=>{![it.EnvironmentsEnum.mainnet,it.EnvironmentsEnum.testnet,it.EnvironmentsEnum.devnet].includes(t==null?void 0:t.id)||i()},[t==null?void 0:t.id]),{rewaLabel:t.rewaLabel,rewaPriceInUsd:e,digits:Ko.DIGITS}}g();var wr={},eu=t=>R(void 0,null,function*(){if(!t)return null;if(t.collection in wr)return wr[t.collection];let e=yield qa(t);return wr[t.collection]=e,wr[t.collection]}),_n=(0,me.createContext)({}),pn="tokenId",at="nft",ru="tokens",tu="txType",ot=[];function nu({children:t,value:e}){let[r,i]=(0,me.useState)(!0),{values:{tokenId:o,tokens:l,nft:f},errors:{tokenId:u},setFieldValue:d}=(0,Zo.useFormikContext)(),{address:h,balance:v}=Fe(),{checkInvalid:p}=Ae(),{networkConfig:{decimals:x}}=nr(),b=(0,me.useRef)(!1),{rewaPriceInUsd:E,digits:A,rewaLabel:I}=Qo(),T=l||ot,S=(0,me.useCallback)((N=!0)=>R(this,null,function*(){if(i(N),b.current)return;b.current=!0;let P=yield ba(h),F=l!=null?l:[],O=(0,Xo.default)([...F,...P],Z=>Z.identifier);d(ru,O),ot=O,b.current=!1,i(!1)}),[h]),C=(0,me.useCallback)(N=>{d(pn,N,!1)},[]);(0,me.useEffect)(()=>(S(!1),()=>{ot=[]}),[]);let L=()=>R(this,null,function*(){let N=Rn({nft:f,tokenId:o});if(d(tu,N),N==="SemiFungibleDCDT"||N==="NonFungibleDCDT")return;let P=(k==null?void 0:k.find(F=>F.identifier===o))||f;if(N==="MetaDCDT"&&P){let F=P;d(at,F);let O=yield eu(F);F=ge($({},F),{allowedReceivers:O}),d(at,F)}else d(at,void 0)}),U=p(pn),k=[{name:"DharitrI eGold",identifier:I,balance:v,decimals:Number(x),ticker:I,usdPrice:E},...T];(0,me.useEffect)(()=>{L()},[o]);let H=(0,me.useMemo)(()=>yt({tokens:k||[],tokenId:o}),[o,l]);return me.default.createElement(_n.Provider,{value:{nft:f||(e==null?void 0:e.initialNft),tokens:T,allAvailableTokens:k,areTokensLoading:r&&T.length===0,tokenIdError:u,tokenId:o,tokenDetails:H,rewaLabel:I,RewaIcon:e==null?void 0:e.RewaIcon,rewaPriceInUsd:E,digits:A,isTokenIdInvalid:U,getTokens:S,onChangeTokenId:C}},t)}function Gr(){return(0,me.useContext)(_n)}g();g();var Er=require("@terradharitri/sdk-dapp/constants/index"),iu=require("formik");g();g();var ie=q(require("react")),mn=require("@terradharitri/sdk-dapp/constants/index"),au=require("@terradharitri/sdk-dapp/utils/operations/calculateFeeLimit"),ou=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),gn=require("@terradharitri/sdk-dapp/utils/validation/stringIsInteger"),uu=q(require("bignumber.js")),su=require("formik");g();g();g();g();var vn=q(require("bignumber.js"));function lu({amount:t="",available:e,readonly:r=!1,entireBalanceMinusDust:i}){let o=new vn.default(t),l=new vn.default(i).isGreaterThan(o),f=!t,u=Ga("amount",r);return(f||l)&&e!==M&&!u}function fu({nft:t,amount:e,readonly:r,maxAmountAvailable:i,maxAmountMinusDust:o,txType:l}){switch(l){case"REWA":return lu({amount:e,entireBalanceMinusDust:o,readonly:r,available:i});case"DCDT":return e!==i&&!r&&i!==M;default:return t!=null&&e!==(t==null?void 0:t.balance)&&!r}}g();var yn=require("@terradharitri/sdk-dapp/utils/validation/stringIsFloat"),xr=q(require("bignumber.js")),Ar=(t,e)=>{let r=(0,yn.stringIsFloat)(String(t))?t:M,i=(0,yn.stringIsFloat)(String(e))?new xr.default(e):new xr.default(M),o=(0,xr.default)(100).dividedBy(i.dividedBy(r)).toNumber();return xr.default.minimum(o,100).toNumber()};g();function On({values:t,errors:e,touched:r}){let i=Boolean(e.amount&&r.amount);return t.txType==="REWA"?t.amount!=M?i:!1:i}g();var ut=require("react"),cu=require("@terradharitri/sdk-dapp/constants/index"),hu=require("@terradharitri/sdk-dapp/utils/smartContracts"),du=q(require("bignumber.js")),pu=require("formik");g();var wn=require("react");function mu(t,e){let[r,i]=(0,wn.useState)(t);return(0,wn.useEffect)(()=>{let o=setTimeout(()=>i(t),e);return()=>clearTimeout(o)},[t]),r}var Tr=mu,st=500;function gu(t){let{networkConfig:{chainId:e}}=nr(),{prefilledForm:r}=Ae(),i=(0,pu.useFormikContext)(),{balance:o,address:l,nonce:f}=Fe(),{values:u,initialValues:d,touched:h,errors:{gasLimit:v,amount:p},setFieldValue:x}=i,{data:b,amount:E,gasLimit:A}=u,I=Tr(b,st),T=Tr(E,st),S=Tr(A,st),[C,L]=(0,ut.useState)(!1),[U,k]=(0,ut.useState)(t),H=()=>R(this,null,function*(){let N=v||p,P=I.length>0,F=new du.default(T).isGreaterThanOrEqualTo(0),O=Cr({initialValues:d,gasLimit:A,touched:h}),Z=e!==cu.MAINNET_CHAIN_ID||!1;if(!r&&(0,hu.isContract)(u.receiver)&&Z&&!O&&!N&&P&&F){L(!0);try{let{gasLimit:J,gasLimitCostError:se}=yield no({balance:o,address:l,nonce:f,values:u,chainId:e});L(!1),k(se),x("gasLimit",J,!0)}catch(J){L(!1),console.error(J)}}});return(0,ut.useEffect)(()=>{H()},[I,T,S,u.receiver,r]),{gasCostLoading:C,gasCostError:U}}var vu=gu;g();g();var yu=require("@terradharitri/sdk-dapp/constants/index"),wu=q(require("bignumber.js")),Eu=({isNftTransaction:t,isDcdtTransaction:e,data:r,isGuarded:i})=>{let o=ze(i),l=yu.GAS_LIMIT.toString();return t&&(l=Ur(r)),e&&(l=Br),new wu.default(l).plus(o).toString(10)},Vn=(0,ie.createContext)({});function xu({children:t,initGasLimitError:e}){let r=(0,su.useFormikContext)(),{values:i,touched:o,errors:{gasPrice:l,gasLimit:f},setFieldValue:u,setFieldTouched:d,initialValues:h}=r,{gasPrice:v,gasLimit:p,data:x,tokenId:b,txType:E,isGuarded:A,receiver:I,amount:T}=i,S=ze(A),{checkInvalid:C,isNftTransaction:L,isDcdtTransaction:U,prefilledForm:k,isRewaTransaction:H}=Ae(),{networkConfig:{chainId:N}}=nr(),{gasCostLoading:P,gasCostError:F}=vu(e),O=Eu({isNftTransaction:L,isDcdtTransaction:U,data:x,isGuarded:A}),Z=!On({values:i,errors:r.errors,touched:o})&&C("gasLimit"),J=C("gasPrice"),se=(0,ie.useCallback)((W,ae=!1)=>{var te;let be=typeof W=="string"?W:(te=W==null?void 0:W.target)==null?void 0:te.value;u("gasPrice",be,ae)},[]),Ee=(0,ie.useCallback)((W,ae=!1)=>{var te;let be=typeof W=="string"?W:(te=W==null?void 0:W.target)==null?void 0:te.value;u("gasLimit",be,ae)},[]),We=(0,ie.useCallback)(()=>{u("gasPrice",$e)},[]),Le=(0,ie.useCallback)(()=>{u("gasLimit",O)},[L]),Ye=(0,ie.useCallback)(()=>{d("gasPrice",!0)},[]),ke=(0,ie.useCallback)(()=>{d("gasLimit",!0)},[]),Ie=Boolean(l)||Boolean(f),_=(0,ie.useMemo)(()=>{let W=!(0,gn.stringIsInteger)(p),ae=!(0,ou.stringIsFloat)(v);if(W||ae)return M;let te=Cr({initialValues:h,gasLimit:p,touched:o}),be=!k&&!te&&H?x.trim():"",ar=(0,au.calculateFeeLimit)({gasLimit:p,gasPrice:(0,ue.parseAmount)(v),data:be,chainId:N,gasPerDataByte:String(mn.GAS_PER_DATA_BYTE),gasPriceModifier:String(mn.GAS_PRICE_MODIFIER)});return(0,gn.stringIsInteger)(ar)?ar:M},[Ie,v,p,N,k,H,o.gasLimit,x,I,T]);(0,ie.useEffect)(()=>{let W=Cr({initialValues:h,gasLimit:p,touched:o});!k&&L&&!W&&Ee(new uu.default(Ur()).plus(S).toString())},[L,o]),(0,ie.useEffect)(()=>{k||Ee(Pn({txType:E,data:x,isGuarded:A}),!0)},[b,E]);let z={gasPrice:v,gasLimit:p,gasCostLoading:P,feeLimit:_,defaultGasLimit:O,gasPriceError:l,gasLimitError:f,gasCostError:F,hasErrors:Ie,isGasLimitInvalid:Z,isGasPriceInvalid:J,onChangeGasLimit:Ee,onChangeGasPrice:se,onBlurGasPrice:Ye,onBlurGasLimit:ke,onResetGasPrice:We,onResetGasLimit:Le};return ie.default.createElement(Vn.Provider,{value:z},t)}function xt(){return(0,ie.useContext)(Vn)}function Au(){let{values:t}=(0,iu.useFormikContext)(),{balance:e}=Fe(),{networkConfig:{chainId:r}}=nr(),{nft:i,tokens:o}=Gr(),{isDcdtTransaction:l,isNftTransaction:f,isRewaTransaction:u}=Ae(),{gasLimit:d,gasPrice:h}=xt(),{tokenId:v}=t,p=null;f&&i&&(p=an({balance:i.balance,decimals:i.type===Ce.NftEnumType.MetaDCDT?i.decimals:0,digits:Er.DIGITS}));let x=null;if(l){let{decimals:I,balance:T}=yt({tokens:o,tokenId:v});x=an({balance:T,decimals:I,digits:Er.DIGITS})}let b=M,E=e;if(e&&u){let{entireBalance:I,entireBalanceMinusDust:T}=ao({balance:e,gasPrice:Rr(h),gasLimit:d,decimals:Er.DECIMALS,digits:Er.DIGITS,chainId:r});b=I,E=T}let A=u?b:i&&p?p:x;return{maxAmountAvailable:A||M,maxAmountMinusDust:(u?E:A)||M}}var $n=(0,oe.createContext)({});function Iu({children:t}){let{values:e,errors:r,touched:i,handleBlur:o,setFieldValue:l,setFieldError:f,setFieldTouched:u}=(0,Ua.useFormikContext)(),{readonly:d,uiOptions:h}=Ae(),{maxAmountAvailable:v,maxAmountMinusDust:p}=Au(),[x,b]=(0,oe.useState)(Ar(e.amount,p)),[E,A]=(0,oe.useState)(!1),{nft:I}=Gr(),T=h!=null&&h.showAmountSlider?!1:fu({nft:I,amount:e.amount,readonly:d,maxAmountAvailable:v,maxAmountMinusDust:p,txType:e.txType});function S(){A(!1)}let C=(0,oe.useCallback)((F,O=!0)=>{if(new Qr.default(p).isZero()||!(0,ka.stringIsFloat)(F.toString())){b(0);return}let Z=new Qr.default(p).times(F).dividedBy(100),J=(0,rr.formatAmount)({input:(0,ue.parseAmount)(String(Z)),digits:La.DIGITS,showLastNonZeroDecimal:F>=100});if(O&&l("amount",J),F<0){b(0);return}if(F>100){b(100);return}b(F)},[p,l]),L=(0,oe.useCallback)((F,O=!0)=>{var Z;let J=typeof F=="string"?F:(Z=F==null?void 0:F.target)==null?void 0:Z.value;return u("amount",!0),C(Ar(J,p),!1),l("amount",J,O)},[l,C,p]),U=(0,oe.useCallback)(F=>f("amount",F),[f]),k=(0,oe.useCallback)(()=>{u("amount",!0)},[o]),H=(0,oe.useCallback)(()=>(A(!0),L(p||e.amount)),[p]);(0,oe.useEffect)(()=>{(0,Qr.default)(p).isGreaterThan(0)&&C(Ar(e.amount,p),!1)},[Ar,p]);let N=On({values:e,errors:r,touched:i}),P={amount:e.amount,error:r.amount,isInvalid:N,maxAmountAvailable:v,maxAmountMinusDust:p,isMaxButtonVisible:T,isMaxClicked:E,amountRange:x,onFocus:S,onBlur:k,onChange:L,onMaxClicked:H,onSetError:U,onSetAmountPercentage:C};return oe.default.createElement($n.Provider,{value:P},t)}function bu(){return(0,oe.useContext)($n)}g();g();var Se=q(require("react")),Tu=require("formik"),jn=(0,Se.createContext)({});function Bu({children:t}){let{values:e,errors:r,touched:i,setFieldValue:o,handleBlur:l,setFieldTouched:f,initialValues:u}=(0,Tu.useFormikContext)(),{checkInvalid:d,prefilledForm:h,isRewaTransaction:v}=Ae(),{nft:p}=Gr(),{receiver:x,txType:b,amount:E,tokenId:A,isAdvancedModeEnabled:I,gasLimit:T}=e,{onChangeGasLimit:S}=xt(),{isGuarded:C}=Fe(),L=d("data"),U=(P,F=!1)=>{var O;let Z=typeof P=="string"?P:(O=P==null?void 0:P.target)==null?void 0:O.value,J=Cr({initialValues:u,gasLimit:T,touched:i});if(o("data",Z,F),!h&&!J&&v){let se=Dr({data:Z,isGuarded:C});S(se)}},k=(0,Se.useCallback)(()=>{f("data",!0)},[l]),H=(0,Se.useCallback)(()=>{U("")},[]);(0,Se.useEffect)(()=>{if(!h){let P=b!=="DCDT"?r.receiver:"",F=ro({txType:b,values:e,nft:p,amountError:Boolean(r.amount),receiverError:P});U(F)}},[E,x,h,p,r.receiver,r.amount,b]),(0,Se.useEffect)(()=>{!h&&v&&U("")},[A,v]);let N={data:e.data,dataError:r.data,isDataInvalid:L,onChange:U,onBlur:k,onReset:H,isAdvancedModeEnabled:I};return Se.default.createElement(jn.Provider,{value:N},t)}function qu(){return(0,Se.useContext)(jn)}g();g();var Ve=q(require("react")),Su=require("formik");g();g();g();var En=require("react"),Cu=require("@terradharitri/sdk-dapp/apiCalls/transactions/getTransactions"),Fu=q(require("lodash/uniqBy"));g();g();var xn=require("@terradharitri/sdk-dapp/hooks/account/helpers/trimUsernameDomain"),An=require("@terradharitri/sdk-dapp/utils"),Lu=t=>t.reduce((e,r)=>{var i,o;let l=(i=r.receiverAssets)==null?void 0:i.name,f=(o=r.senderAssets)==null?void 0:o.name,u=(0,xn.trimUsernameDomain)(l),d=(0,xn.trimUsernameDomain)(f),h=(0,An.isContract)(r.receiver),v=(0,An.isContract)(r.sender),p={address:r.receiver,username:h?void 0:u,rawUsername:h?void 0:l},x={address:r.sender,username:v?void 0:d,rawUsername:v?void 0:f};return r?[...e,p,x]:e},[]);function ku(){let{address:t}=Fe(),[e,r]=(0,En.useState)(null);function i(){return R(this,null,function*(){try{let o=yield xe(),{data:l}=yield(0,Cu.getTransactions)({sender:t,receiver:t,transactionSize:50,apiAddress:o.baseURL,apiTimeout:o.timeout,withUsername:!0}),f=Lu(l),u=(0,Fu.default)(f,d=>d.address);r(u)}catch(o){console.error("Unable to fetch transactions",o),r([])}})}return(0,En.useEffect)(()=>{i()},[]),e}g();var Uu=require("react");g();var In=require("react"),Du=require("@terradharitri/sdk-dapp/utils/account/addressIsValid");function Ru(t){let[e,r]=(0,In.useState)({}),[i,o]=(0,In.useState)(!1);return{verifiedAddresses:e,verifyScamAddress:l=>R(this,[l],function*({address:f,addressToVerify:u=""}){let d=f!==u,h=!(u in e);if(d&&(0,Du.addressIsValid)(u)&&h&&!i){o(!0);try{let v=yield ga(u,t);r(p=>$($({},p),v.scamInfo?{[u]:v.scamInfo}:{}))}catch(v){console.error("Unable to find address",v)}o(!1)}}),fetchingScamAddress:i}}function Pu(t){var e;let{address:r}=Fe(),{verifiedAddresses:i,verifyScamAddress:o,fetchingScamAddress:l}=Ru(),f=(e=i[t])==null?void 0:e.info;return(0,Uu.useEffect)(()=>{t&&o({address:r,addressToVerify:t})},[t]),{scamError:f,fetchingScamAddress:l}}var zn=(0,Ve.createContext)({}),lt="receiver";function Gu({children:t}){let{values:{receiver:e},errors:{receiver:r},setFieldValue:i,setFieldTouched:o}=(0,Su.useFormikContext)(),{checkInvalid:l}=Ae(),[f,u]=(0,Ve.useState)(e),{scamError:d,fetchingScamAddress:h}=Pu(e),v=ku(),p=(0,Ve.useCallback)((E,A=!1)=>{i(lt,E,A)},[]),x=(0,Ve.useCallback)(()=>{o(lt,!0)},[]),b={receiver:e,receiverError:r,receiverInputValue:f,setReceiverInputValue:E=>u(E),isReceiverInvalid:l(lt),scamError:d,fetchingScamAddress:h,knownAddresses:v,onChangeReceiver:p,onBlurReceiver:x};return Ve.default.createElement(zn.Provider,{value:b},t)}function Wn(){return(0,Ve.useContext)(zn)}g();g();var At=q(require("react")),Mu=require("formik");g();g();var Nu=({knownAddresses:t,inputValue:e,key:r})=>!t||!e?!1:t.some(i=>{var o;return Boolean((o=i[r])==null?void 0:o.startsWith(e))});g();g();g();var _u=require("react"),Ou=require("@terradharitri/sdk-dapp/utils");g();var bn=require("react"),Tn=require("@terradharitri/sdk-dapp/hooks/account/helpers/trimUsernameDomain");g();g();var Vu=require("@terradharitri/sdk-dapp/utils/account/addressIsValid"),$u=q(require("axios"));function ju(t,e){return R(this,null,function*(){var r;try{let i=e||(yield xe()),{request:o,data:l}=yield $u.default.get(`usernames/${t}`,i);if(!(o!=null&&o.responseURL))return null;let[,f]=(r=o.responseURL.split("/accounts/"))!=null?r:[],u=f!=null?f:l.address;return(0,Vu.addressIsValid)(u)?l:null}catch(i){return null}})}g();var zu=q(require("axios"));function Wu(t,e){return R(this,null,function*(){try{let{data:r}=yield zu.default.get(`${e}/accounts/${t}`);if(r!=null)return r}catch(r){console.error("error fetching numbat account")}return null})}var ft={};function Yu(t){let[e,r]=(0,bn.useState)(!1),[i,o]=(0,bn.useState)(ft);return{usernameAccounts:i,fetchUsernameAccount:l=>R(this,null,function*(){if(!(l in i||e)){r(!0);try{let f=yield ju(l,t),u=f==null?void 0:f.username;o(d=>{var h;let v=ge($({},d),{[l]:{address:(h=f==null?void 0:f.address)!=null?h:"",username:u?String((0,Tn.trimUsernameDomain)(u)):"",rawUsername:u!=null?u:""}});return ft=v,v})}catch(f){o(u=>ge($({},u),{[l]:null}))}r(!1)}}),fetchUsernameByAddress:l=>R(this,null,function*(){if(!(Object.values(i).find(f=>f&&f.address===l)||e)){r(!0);try{let f=t||(yield xe()),u=yield Wu(l,f.baseURL),d=u==null?void 0:u.address,h=u==null?void 0:u.username,v=(0,Tn.trimUsernameDomain)(h);if(!d||!v)return;o(p=>{let x=ge($({},p),{[v]:{address:d,username:String(v),rawUsername:h!=null?h:""}});return ft=x,x})}catch(f){console.error(f)}r(!1)}}),fetchingUsernameAccount:e}}var Hu=({shouldSkipSearch:t=!1,searchPatternToLookFor:e})=>{let{fetchUsernameAccount:r,fetchUsernameByAddress:i,fetchingUsernameAccount:o,usernameAccounts:l}=Yu(),f=(0,Ou.addressIsValid)(e);return(0,_u.useEffect)(()=>{if(!(!e||t)){if(f){i(e);return}r(e)}},[e,f]),{fetchingUsernameAccount:o,usernameAccounts:l}},Yn=(0,At.createContext)({}),Zu=1e3;function Xu({children:t}){var e;let{values:{receiverUsername:r},errors:{receiverUsername:i}}=(0,Mu.useFormikContext)(),{receiverInputValue:o,knownAddresses:l}=Wn(),f=Ma(o),u=Tr(o,Zu),d=l==null?void 0:l.some(I=>I.username===o),{usernameAccounts:h}=Hu({shouldSkipSearch:Boolean(d),searchPatternToLookFor:u}),v=(e=h[o])==null?void 0:e.username,p=o!==u&&v!==null,x=Nu({key:"username",knownAddresses:l,inputValue:o}),b=!p&&v===void 0&&o,E=Boolean(b&&!f&&!x),A={showUsernameError:Boolean(o&&u&&!p&&!b&&!v&&!f),isUsernameLoading:E,isUsernameDebouncing:p,usernameIsAmongKnown:x,receiverUsername:r,receiverUsernameError:i,isReceiverUsernameInvalid:Boolean(i),usernameAccounts:h,searchQueryIsAddress:f};return At.default.createElement(Yn.Provider,{value:A},t)}function Ju(){return(0,At.useContext)(Yn)}g();var Hn=q(require("react")),Ku=(0,Hn.createContext)({});function Qu({children:t}){let e=Fe(),r=Ae(),i=Gr(),o=bu(),l=xt(),f=qu(),u=Wn(),d=Ju();return Hn.default.createElement(Ku.Provider,{value:{accountInfo:e,formInfo:r,tokensInfo:i,gasInfo:l,dataFieldInfo:f,receiverInfo:u,receiverUsernameInfo:d,amountInfo:o}},t)}function es({accountInfo:t,formInfo:e,tokensInfo:r,networkConfig:i,children:o,Loader:l,initGasLimitError:f}){let[u,d]=(0,re.useState)();function h(){return R(this,null,function*(){let v=!i.skipFetchFromServer,{chainId:p}=i,x=gt(p),b=sa.fallbackNetworkConfigurations[x]||{};if(v){let A=yield Fn(p);if(A){let I=$($($({},b),A),i);ht(I),d(I);return}}let E=$($({},b),i);ht(E),d(E)})}return(0,re.useEffect)(()=>{h()},[i]),u?re.default.createElement(Jo,{value:{networkConfig:u}},re.default.createElement(Fa,{value:t},re.default.createElement(Ho,{value:e},re.default.createElement(nu,{value:r},re.default.createElement(Gu,null,re.default.createElement(Xu,null,re.default.createElement(xu,{initGasLimitError:f},re.default.createElement(Bu,null,re.default.createElement(Iu,null,re.default.createElement(Qu,null,o)))))))))):l!=null?re.default.createElement(l,null):null}g();var Bn=require("@terradharitri/sdk-dapp/constants/index"),ct={insufficientFunds:"Insufficient funds",invalidAddress:"Invalid address",invalidGasPrice:"Invalid gas price",invalidNumber:"Invalid number",invalidFeePerDataByte:"Invalid fee per data byte",cannotBeZero:"Cannot be zero",required:"Required",amountTooSmall:"Amount too small",sameAsOwnerAddress:"Same as owner address",receiverNotAllowed:"Receiver not allowed",invalidHerotag:"Invalid herotag",tooLowGasLimit:(t=Bn.GAS_LIMIT)=>`Gas limit must be greater or equal to ${t}`,tooHighGasLimit:(t=Bn.GAS_LIMIT)=>`Gas limit must be lower than ${t}`,tooLowGasPrice:(t=$e)=>`Gas price must be greater or equal to ${t}`,tooHighGasPrice:(t=mt)=>`Gas price must be lower or equal to ${t}`,maxDecimalsAllowed:t=>`Maximum ${t} decimals allowed`};function rs(t){var e,r,i,o,l,f,u,d;let{initialValues:h,onFormSubmit:v,formInfo:p,children:x,accountInfo:b,tokensInfo:E,initGasLimitError:A,networkConfig:I,enableReinitialize:T=!0,Loader:S,errorMessageTranslations:C=ct,shouldGenerateTransactionOnSubmit:L=!0}=t,{address:U,balance:k,username:H}=b,{chainId:N}=I,[P,F]=(0,Xe.useState)(Boolean(t.formInfo.skipToConfirm)),[O,Z]=(0,Xe.useState)(),[J,se]=(0,Xe.useState)(!1),Ee=Wo({initialValues:h,prefilledForm:p.prefilledForm,errorMessages:ct});function We(W){return R(this,null,function*(){let ae=yield Oa(W),te=L?O!=null?O:yield Ja({address:U,balance:k,chainId:N,nonce:b.nonce,values:ae}):null;return v(ae,te,F)})}let Le=(h==null?void 0:h.tokenId)||(I==null?void 0:I.rewaLabel)||ra.fallbackNetworkConfigurations.mainnet.rewaLabel,Ye=Gn($($({},C),ct)),ke=(e=h==null?void 0:h.data)!=null?e:"",Ie=(r=h==null?void 0:h.txType)!=null?r:Rn({nft:E==null?void 0:E.initialNft,tokenId:Le}),_=(i=h==null?void 0:h.gasLimit)!=null?i:Pn({txType:Ie,data:ke,isGuarded:b.isGuarded}),z={address:(o=h==null?void 0:h.address)!=null?o:U,amount:(l=h==null?void 0:h.amount)!=null?l:M,balance:(h==null?void 0:h.balance)||k,chainId:(h==null?void 0:h.chainId)||I.chainId,code:"",data:ke,gasLimit:_,gasPrice:(f=h==null?void 0:h.gasPrice)!=null?f:$e,isBurn:p.isBurn,isGuarded:(u=h==null?void 0:h.isGuarded)!=null?u:b.isGuarded,ledger:h==null?void 0:h.ledger,nft:E==null?void 0:E.initialNft,receiver:(d=h==null?void 0:h.receiver)!=null?d:"",receiverUsername:h==null?void 0:h.receiverUsername,senderUsername:H,tokenId:Le,tokens:E==null?void 0:E.initialTokens,txType:Ie};return Xe.default.createElement(ta.Formik,{initialValues:z,enableReinitialize:T,onSubmit:We,initialErrors:Ee,validationSchema:Ye},Xe.default.createElement(es,{initGasLimitError:A,accountInfo:b,formInfo:ge($({},p),{isFormSubmitted:P,setIsFormSubmitted:F,setGuardedTransaction:Z,hasGuardianScreen:J,setHasGuardianScreen:se}),networkConfig:I,tokensInfo:E,Loader:S},x))}});var ir={};module.exports=oi(ir);ee();lr(ir,Or(Xn()),module.exports);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.d.js.map
